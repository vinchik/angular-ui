import{a as Xo,b as Et}from"./chunk-OCEYPPE6.js";import{$ as he,$a as Ct,A as W,Ab as En,B as Fe,Ba as di,Bb as Mt,C as li,Ca as pi,Cb as xt,D as A,Da as Ze,Db as Tn,E as Le,Ea as mi,Eb as kn,F as gn,Fa as wn,Fb as fi,G as me,Ga as Do,Gb as qt,H as ue,Ha as Ao,Hb as Yo,I as fn,Ia as No,Ib as dt,J as _n,Ja as Ro,Jb as le,K as yn,Ka as Fo,Kb as nt,L as Bt,La as Pn,Lb as Zo,M as ci,Mb as _i,Na as ui,O as ho,Oa as Lo,Ob as Jo,P as m,Pa as bn,Pb as er,Q as O,Qa as Vo,R as go,Ra as Sn,S as fo,Sa as $o,Sb as tr,T as vn,Ta as jo,Tb as In,U as _o,Ua as zo,Ub as Kt,V as P,Va as hi,Vb as Te,W as u,Wa as Go,X as H,Xa as Je,Y as c,Ya as z,Z as d,Za as Wo,_ as b,_a as ge,a as un,aa as v,ab as X,ba as x,bb as Be,c as k,ca as yo,cb as Uo,da as vo,db as wt,ea as Co,eb as et,f as He,fa as wo,fb as tt,g as so,ga as Po,gb as Bo,h as we,ha as bo,hb as Pt,i as hn,ia as f,ja as I,k as ao,ka as yt,l as lo,la as So,lb as bt,m as oe,ma as Oo,mb as St,n as Pe,na as Mo,nb as qo,o as Qe,oa as Cn,ob as Ko,p as co,pa as xo,pb as Ho,q as po,qa as Ye,qb as On,r as mo,ra as Xe,rb as $,s as uo,sa as Eo,ta as To,tb as gi,u as pe,ua as be,ub as te,v as F,va as Y,vb as L,w as ai,wa as re,wb as Qo,x as j,xa as ko,xb as Ot,y as Re,ya as vt,yb as Mn,z as Ee,za as Io,zb as xn}from"./chunk-PB5LIWOK.js";import{a as Z,b as Ne,c as ro,d as U}from"./chunk-4CLCTAJ7.js";var D=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(D||{}),Ve="*";function nr(i,e=null){return{type:D.Sequence,steps:i,options:e}}function yi(i){return{type:D.Style,styles:i,offset:null}}var it=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ht=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,o=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==r&&this._onFinish()}),a.onDestroy(()=>{++n==r&&this._onDestroy()}),a.onStart(()=>{++o==r&&this._onStart()})}),this.totalTime=this.players.reduce((a,s)=>Math.max(a,s.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let o=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(o)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Dn="!";function ir(i){return new F(3e3,!1)}function ss(){return new F(3100,!1)}function as(){return new F(3101,!1)}function ls(i){return new F(3001,!1)}function cs(i){return new F(3003,!1)}function ds(i){return new F(3004,!1)}function ps(i,e){return new F(3005,!1)}function ms(){return new F(3006,!1)}function us(){return new F(3007,!1)}function hs(i,e){return new F(3008,!1)}function gs(i){return new F(3002,!1)}function fs(i,e,t,n,o){return new F(3010,!1)}function _s(){return new F(3011,!1)}function ys(){return new F(3012,!1)}function vs(){return new F(3200,!1)}function Cs(){return new F(3202,!1)}function ws(){return new F(3013,!1)}function Ps(i){return new F(3014,!1)}function bs(i){return new F(3015,!1)}function Ss(i){return new F(3016,!1)}function Os(i,e){return new F(3404,!1)}function Ms(i){return new F(3502,!1)}function xs(i){return new F(3503,!1)}function Es(){return new F(3300,!1)}function Ts(i){return new F(3504,!1)}function ks(i){return new F(3301,!1)}function Is(i,e){return new F(3302,!1)}function Ds(i){return new F(3303,!1)}function As(i,e){return new F(3400,!1)}function Ns(i){return new F(3401,!1)}function Rs(i){return new F(3402,!1)}function Fs(i,e){return new F(3505,!1)}function ot(i){switch(i.length){case 0:return new it;case 1:return i[0];default:return new Ht(i)}}function _r(i,e,t=new Map,n=new Map){let o=[],r=[],a=-1,s=null;if(e.forEach(l=>{let p=l.get("offset"),g=p==a,h=g&&s||new Map;l.forEach((y,S)=>{let C=S,_=y;if(S!=="offset")switch(C=i.normalizePropertyName(C,o),_){case Dn:_=t.get(S);break;case Ve:_=n.get(S);break;default:_=i.normalizeStyleValue(S,C,_,o);break}h.set(C,_)}),g||r.push(h),s=h,a=p}),o.length)throw Ms(o);return r}function zi(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&vi(t,"start",i)));break;case"done":i.onDone(()=>n(t&&vi(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&vi(t,"destroy",i)));break}}function vi(i,e,t){let n=t.totalTime,o=!!t.disabled,r=Gi(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,o),a=i._data;return a!=null&&(r._data=a),r}function Gi(i,e,t,n,o="",r=0,a){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:o,totalTime:r,disabled:!!a}}function ye(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function or(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var Ls=typeof document>"u"?null:document.documentElement;function Wi(i){let e=i.parentNode||i.host||null;return e===Ls?null:e}function Vs(i){return i.substring(1,6)=="ebkit"}var pt=null,rr=!1;function $s(i){pt||(pt=js()||{},rr=pt.style?"WebkitAppearance"in pt.style:!1);let e=!0;return pt.style&&!Vs(i)&&(e=i in pt.style,!e&&rr&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in pt.style)),e}function js(){return typeof document<"u"?document.body:null}function yr(i,e){for(;e;){if(e===i)return!0;e=Wi(e)}return!1}function vr(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Ui=(()=>{let e=class e{validateStyleProperty(n){return $s(n)}containsElement(n,o){return yr(n,o)}getParentElement(n){return Wi(n)}query(n,o,r){return vr(n,o,r)}computeStyle(n,o,r){return r||""}animate(n,o,r,a,s,l=[],p){return new it(r,a)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let i=e;return i})(),Hi=class Hi{};Hi.NOOP=new Ui;var ht=Hi,gt=class{};var zs=1e3,Cr="{{",Gs="}}",wr="ng-enter",Oi="ng-leave",An="ng-trigger",Vn=".ng-trigger",sr="ng-animating",Mi=".ng-animating";function qe(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xi(parseFloat(e[1]),e[2])}function xi(i,e){switch(e){case"s":return i*zs;default:return i}}function $n(i,e,t){return i.hasOwnProperty("duration")?i:Ws(i,e,t)}function Ws(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,r=0,a="";if(typeof i=="string"){let s=i.match(n);if(s===null)return e.push(ir(i)),{duration:0,delay:0,easing:""};o=xi(parseFloat(s[1]),s[2]);let l=s[3];l!=null&&(r=xi(parseFloat(l),s[4]));let p=s[5];p&&(a=p)}else o=i;if(!t){let s=!1,l=e.length;o<0&&(e.push(ss()),s=!0),r<0&&(e.push(as()),s=!0),s&&e.splice(l,0,ir(i))}return{duration:o,delay:r,easing:a}}function Us(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function $e(i,e,t){e.forEach((n,o)=>{let r=Bi(o);t&&!t.has(o)&&t.set(o,i.style[r]),i.style[r]=n})}function ut(i,e){e.forEach((t,n)=>{let o=Bi(n);i.style[o]=""})}function Qt(i){return Array.isArray(i)?i.length==1?i[0]:nr(i):i}function Bs(i,e,t){let n=e.params||{},o=Pr(i);o.length&&o.forEach(r=>{n.hasOwnProperty(r)||t.push(ls(r))})}var Ei=new RegExp(`${Cr}\\s*(.+?)\\s*${Gs}`,"g");function Pr(i){let e=[];if(typeof i=="string"){let t;for(;t=Ei.exec(i);)e.push(t[1]);Ei.lastIndex=0}return e}function Xt(i,e,t){let n=`${i}`,o=n.replace(Ei,(r,a)=>{let s=e[a];return s==null&&(t.push(cs(a)),s=""),s.toString()});return o==n?i:o}var qs=/-+([a-z0-9])/g;function Bi(i){return i.replace(qs,(...e)=>e[1].toUpperCase())}function Ks(i,e){return i===0||e===0}function Hs(i,e,t){if(t.size&&e.length){let n=e[0],o=[];if(t.forEach((r,a)=>{n.has(a)||o.push(a),n.set(a,r)}),o.length)for(let r=1;r<e.length;r++){let a=e[r];o.forEach(s=>a.set(s,qi(i,s)))}}return e}function _e(i,e,t){switch(e.type){case D.Trigger:return i.visitTrigger(e,t);case D.State:return i.visitState(e,t);case D.Transition:return i.visitTransition(e,t);case D.Sequence:return i.visitSequence(e,t);case D.Group:return i.visitGroup(e,t);case D.Animate:return i.visitAnimate(e,t);case D.Keyframes:return i.visitKeyframes(e,t);case D.Style:return i.visitStyle(e,t);case D.Reference:return i.visitReference(e,t);case D.AnimateChild:return i.visitAnimateChild(e,t);case D.AnimateRef:return i.visitAnimateRef(e,t);case D.Query:return i.visitQuery(e,t);case D.Stagger:return i.visitStagger(e,t);default:throw ds(e.type)}}function qi(i,e){return window.getComputedStyle(i)[e]}var Qs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),jn=class extends gt{normalizePropertyName(e,t){return Bi(e)}normalizeStyleValue(e,t,n,o){let r="",a=n.toString().trim();if(Qs.has(t)&&n!==0&&n!=="0")if(typeof n=="number")r="px";else{let s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&s[1].length==0&&o.push(ps(e,n))}return a+r}};var zn="*";function Ys(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>Xs(n,t,e)):t.push(i),t}function Xs(i,e,t){if(i[0]==":"){let l=Zs(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(bs(i)),e;let o=n[1],r=n[2],a=n[3];e.push(ar(o,a));let s=o==zn&&a==zn;r[0]=="<"&&!s&&e.push(ar(a,o))}function Zs(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(Ss(i)),"* => *"}}var Nn=new Set(["true","1"]),Rn=new Set(["false","0"]);function ar(i,e){let t=Nn.has(i)||Rn.has(i),n=Nn.has(e)||Rn.has(e);return(o,r)=>{let a=i==zn||i==o,s=e==zn||e==r;return!a&&t&&typeof o=="boolean"&&(a=o?Nn.has(i):Rn.has(i)),!s&&n&&typeof r=="boolean"&&(s=r?Nn.has(e):Rn.has(e)),a&&s}}var br=":self",Js=new RegExp(`s*${br}s*,?`,"g");function Sr(i,e,t,n){return new Ti(i).build(e,t,n)}var lr="",Ti=class{constructor(e){this._driver=e}build(e,t,n){let o=new ki(t);return this._resetContextStyleTimingState(o),_e(this,Qt(e),o)}_resetContextStyleTimingState(e){e.currentQuerySelector=lr,e.collectedStyles=new Map,e.collectedStyles.set(lr,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,o=t.depCount=0,r=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(ms()),e.definitions.forEach(s=>{if(this._resetContextStyleTimingState(t),s.type==D.State){let l=s,p=l.name;p.toString().split(/\s*,\s*/).forEach(g=>{l.name=g,r.push(this.visitState(l,t))}),l.name=p}else if(s.type==D.Transition){let l=this.visitTransition(s,t);n+=l.queryCount,o+=l.depCount,a.push(l)}else t.errors.push(us())}),{type:D.Trigger,name:e.name,states:r,transitions:a,queryCount:n,depCount:o,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(n.containsDynamicStyles){let r=new Set,a=o||{};n.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{Pr(l).forEach(p=>{a.hasOwnProperty(p)||r.add(p)})})}),r.size&&t.errors.push(hs(e.name,[...r.values()]))}return{type:D.State,name:e.name,style:n,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=_e(this,Qt(e.animation),t),o=Ys(e.expr,t.errors);return{type:D.Transition,matchers:o,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:mt(e.options)}}visitSequence(e,t){return{type:D.Sequence,steps:e.steps.map(n=>_e(this,n,t)),options:mt(e.options)}}visitGroup(e,t){let n=t.currentTime,o=0,r=e.steps.map(a=>{t.currentTime=n;let s=_e(this,a,t);return o=Math.max(o,t.currentTime),s});return t.currentTime=o,{type:D.Group,steps:r,options:mt(e.options)}}visitAnimate(e,t){let n=ia(e.timings,t.errors);t.currentAnimateTimings=n;let o,r=e.styles?e.styles:yi({});if(r.type==D.Keyframes)o=this.visitKeyframes(r,t);else{let a=e.styles,s=!1;if(!a){s=!0;let p={};n.easing&&(p.easing=n.easing),a=yi(p)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(a,t);l.isEmptyStep=s,o=l}return t.currentAnimateTimings=null,{type:D.Animate,timings:n,style:o,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let s of o)typeof s=="string"?s===Ve?n.push(s):t.errors.push(gs(s)):n.push(new Map(Object.entries(s)));let r=!1,a=null;return n.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(a=s.get("easing"),s.delete("easing")),!r)){for(let l of s.values())if(l.toString().indexOf(Cr)>=0){r=!0;break}}}),{type:D.Style,styles:n,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,o=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((s,l)=>{let p=t.collectedStyles.get(t.currentQuerySelector),g=p.get(l),h=!0;g&&(r!=o&&r>=g.startTime&&o<=g.endTime&&(t.errors.push(fs(l,g.startTime,g.endTime,r,o)),h=!1),r=g.startTime),h&&p.set(l,{startTime:r,endTime:o}),t.options&&Bs(s,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:D.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(_s()),n;let o=1,r=0,a=[],s=!1,l=!1,p=0,g=e.steps.map(G=>{let Q=this._makeStyleAst(G,t),se=Q.offset!=null?Q.offset:na(Q.styles),ee=0;return se!=null&&(r++,ee=Q.offset=se),l=l||ee<0||ee>1,s=s||ee<p,p=ee,a.push(ee),Q});l&&t.errors.push(ys()),s&&t.errors.push(vs());let h=e.steps.length,y=0;r>0&&r<h?t.errors.push(Cs()):r==0&&(y=o/(h-1));let S=h-1,C=t.currentTime,_=t.currentAnimateTimings,T=_.duration;return g.forEach((G,Q)=>{let se=y>0?Q==S?1:y*Q:a[Q],ee=se*T;t.currentTime=C+_.delay+ee,_.duration=ee,this._validateStyleAst(G,t),G.offset=se,n.styles.push(G)}),n}visitReference(e,t){return{type:D.Reference,animation:_e(this,Qt(e.animation),t),options:mt(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:D.AnimateChild,options:mt(e.options)}}visitAnimateRef(e,t){return{type:D.AnimateRef,animation:this.visitReference(e.animation,t),options:mt(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;let[r,a]=ea(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,ye(t.collectedStyles,t.currentQuerySelector,new Map);let s=_e(this,Qt(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:D.Query,selector:r,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:s,originalSelector:e.selector,options:mt(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(ws());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:$n(e.timings,t.errors,!0);return{type:D.Stagger,animation:_e(this,Qt(e.animation),t),timings:n,options:null}}};function ea(i){let e=!!i.split(/\s*,\s*/).find(t=>t==br);return e&&(i=i.replace(Js,"")),i=i.replace(/@\*/g,Vn).replace(/@\w+/g,t=>Vn+"-"+t.slice(1)).replace(/:animating/g,Mi),[i,e]}function ta(i){return i?Z({},i):null}var ki=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function na(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function ia(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let r=$n(i,e).duration;return Ci(r,0,"")}let t=i;if(t.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=Ci(0,0,"");return r.dynamic=!0,r.strValue=t,r}let o=$n(t,e);return Ci(o.duration,o.delay,o.easing)}function mt(i){return i?(i=Z({},i),i.params&&(i.params=ta(i.params))):i={},i}function Ci(i,e,t){return{duration:i,delay:e,easing:t}}function Ki(i,e,t,n,o,r,a=null,s=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:o,delay:r,totalTime:o+r,easing:a,subTimeline:s}}var Zt=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},oa=1,ra=":enter",sa=new RegExp(ra,"g"),aa=":leave",la=new RegExp(aa,"g");function Or(i,e,t,n,o,r=new Map,a=new Map,s,l,p=[]){return new Ii().buildKeyframes(i,e,t,n,o,r,a,s,l,p)}var Ii=class{buildKeyframes(e,t,n,o,r,a,s,l,p,g=[]){p=p||new Zt;let h=new Di(e,t,p,o,r,g,[]);h.options=l;let y=l.delay?qe(l.delay):0;h.currentTimeline.delayNextStep(y),h.currentTimeline.setStyles([a],null,h.errors,l),_e(this,n,h);let S=h.timelines.filter(C=>C.containsAnimation());if(S.length&&s.size){let C;for(let _=S.length-1;_>=0;_--){let T=S[_];if(T.element===t){C=T;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([s],null,h.errors,l)}return S.length?S.map(C=>C.buildKeyframes()):[Ki(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let o=t.createSubContext(e.options),r=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,o,o.options);r!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let o of e){let r=o?.delay;if(r){let a=typeof r=="number"?r:qe(Xt(r,o?.params??{},t.errors));n.delayNextStep(a)}}}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime,a=n.duration!=null?qe(n.duration):null,s=n.delay!=null?qe(n.delay):null;return a!==0&&e.forEach(l=>{let p=t.appendInstructionToTimeline(l,a,s);r=Math.max(r,p.duration+p.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),_e(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,o=t,r=e.options;if(r&&(r.params||r.delay)&&(o=t.createSubContext(r),o.transformIntoNewTimeline(),r.delay!=null)){o.previousNode.type==D.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Gn);let a=qe(r.delay);o.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>_e(this,a,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>n&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],o=t.currentTimeline.currentTime,r=e.options&&e.options.delay?qe(e.options.delay):0;e.steps.forEach(a=>{let s=t.createSubContext(e.options);r&&s.delayNextStep(r),_e(this,a,s),o=Math.max(o,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,o=t.params?Xt(n,t.params,t.errors):n;return $n(o,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),o.snapshotCurrentStyles());let r=e.style;r.type==D.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,o=t.currentAnimateTimings;!o&&n.hasCurrentStyleProperties()&&n.forwardFrame();let r=o&&o.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,o=t.currentTimeline.duration,r=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(l=>{let p=l.offset||0;s.forwardTime(p*r),s.setStyles(l.styles,l.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(o+r),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,o=e.options||{},r=o.delay?qe(o.delay):0;r&&(t.previousNode.type===D.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Gn);let a=n,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=s.length;let l=null;s.forEach((p,g)=>{t.currentQueryIndex=g;let h=t.createSubContext(e.options,p);r&&h.delayNextStep(r),p===t.element&&(l=h.currentTimeline),_e(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let y=h.currentTimeline.currentTime;a=Math.max(a,y)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,o=t.currentTimeline,r=e.timings,a=Math.abs(r.duration),s=a*(t.currentQueryTotal-1),l=a*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=s-l;break;case"full":l=n.currentStaggerTime;break}let g=t.currentTimeline;l&&g.delayNextStep(l);let h=g.currentTime;_e(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=o.currentTime-h+(o.startTime-n.currentTimeline.startTime)}},Gn={},Di=class i{constructor(e,t,n,o,r,a,s,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=o,this._leaveClassName=r,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Gn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Wn(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,o=this.options;n.duration!=null&&(o.duration=qe(n.duration)),n.delay!=null&&(o.delay=qe(n.delay));let r=n.params;if(r){let a=o.params;a||(a=this.options.params={}),Object.keys(r).forEach(s=>{(!t||!a.hasOwnProperty(s))&&(a[s]=Xt(r[s],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(o=>{n[o]=t[o]})}}return e}createSubContext(e=null,t,n){let o=t||this.element,r=new i(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=Gn,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let o={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},r=new Ai(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(r),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,o,r,a){let s=[];if(o&&s.push(this.element),e.length>0){e=e.replace(sa,"."+this._enterClassName),e=e.replace(la,"."+this._leaveClassName);let l=n!=1,p=this._driver.query(this.element,e,l);n!==0&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),s.push(...p)}return!r&&s.length==0&&a.push(Ps(t)),s}},Wn=class i{constructor(e,t,n,o){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=oa,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Ve),this._currentKeyframe.set(t,Ve);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,o){t&&this._previousKeyframe.set("easing",t);let r=o&&o.params||{},a=ca(e,this._globalTimelineStyles);for(let[s,l]of a){let p=Xt(l,r,n);this._pendingStyles.set(s,p),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??Ve),this._updateStyle(s,p)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let o=this._styleSummary.get(n);(!o||t.time>o.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((s,l)=>{let p=new Map([...this._backFill,...s]);p.forEach((g,h)=>{g===Dn?e.add(h):g===Ve&&t.add(h)}),n||p.set("offset",l/this.duration),o.push(p)});let r=[...e.values()],a=[...t.values()];if(n){let s=o[0],l=new Map(s);s.set("offset",0),l.set("offset",1),o=[s,l]}return Ki(this.element,o,r,a,this.duration,this.startTime,this.easing,!1)}},Ai=class extends Wn{constructor(e,t,n,o,r,a,s=!1){super(e,t,a.delay),this.keyframes=n,this.preStyleProps=o,this.postStyleProps=r,this._stretchStartingKeyframe=s,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){let r=[],a=n+t,s=t/a,l=new Map(e[0]);l.set("offset",0),r.push(l);let p=new Map(e[0]);p.set("offset",cr(s)),r.push(p);let g=e.length-1;for(let h=1;h<=g;h++){let y=new Map(e[h]),S=y.get("offset"),C=t+S*n;y.set("offset",cr(C/a)),r.push(y)}n=a,t=0,o="",e=r}return Ki(this.element,e,this.preStyleProps,this.postStyleProps,n,t,o,!0)}};function cr(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function ca(i,e){let t=new Map,n;return i.forEach(o=>{if(o==="*"){n??=e.keys();for(let r of n)t.set(r,Ve)}else for(let[r,a]of o)t.set(r,a)}),t}function dr(i,e,t,n,o,r,a,s,l,p,g,h,y){return{type:0,element:i,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:r,toState:n,toStyles:a,timelines:s,queriedElements:l,preStyleProps:p,postStyleProps:g,totalTime:h,errors:y}}var wi={},Un=class{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,o){return da(this.ast.matchers,e,t,n,o)}buildStyles(e,t,n){let o=this._stateStyles.get("*");return e!==void 0&&(o=this._stateStyles.get(e?.toString())||o),o?o.buildStyles(t,n):new Map}build(e,t,n,o,r,a,s,l,p,g){let h=[],y=this.ast.options&&this.ast.options.params||wi,S=s&&s.params||wi,C=this.buildStyles(n,S,h),_=l&&l.params||wi,T=this.buildStyles(o,_,h),G=new Set,Q=new Map,se=new Map,ee=o==="void",ft={params:Mr(_,y),delay:this.ast.options?.delay},De=g?[]:Or(e,t,this.ast.animation,r,a,C,T,ft,p,h),ae=0;return De.forEach(de=>{ae=Math.max(de.duration+de.delay,ae)}),h.length?dr(t,this._triggerName,n,o,ee,C,T,[],[],Q,se,ae,h):(De.forEach(de=>{let at=de.element,_t=ye(Q,at,new Set);de.preStyleProps.forEach(lt=>_t.add(lt));let to=ye(se,at,new Set);de.postStyleProps.forEach(lt=>to.add(lt)),at!==t&&G.add(at)}),dr(t,this._triggerName,n,o,ee,C,T,De,[...G.values()],Q,se,ae))}};function da(i,e,t,n,o){return i.some(r=>r(e,t,n,o))}function Mr(i,e){let t=Z({},e);return Object.entries(i).forEach(([n,o])=>{o!=null&&(t[n]=o)}),t}var Ni=class{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,o=Mr(e,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((a,s)=>{a&&(a=Xt(a,o,t));let l=this.normalizer.normalizePropertyName(s,t);a=this.normalizer.normalizeStyleValue(s,l,a,t),n.set(s,a)})}),n}};function pa(i,e,t){return new Ri(i,e,t)}var Ri=class{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(o=>{let r=o.options&&o.options.params||{};this.states.set(o.name,new Ni(o.style,r,n))}),pr(this.states,"true","1"),pr(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new Un(e,o,this.states))}),this.fallbackTransition=ma(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,o){return this.transitionFactories.find(a=>a.match(e,t,n,o))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function ma(i,e,t){let n=[(a,s)=>!0],o={type:D.Sequence,steps:[],options:null},r={type:D.Transition,animation:o,matchers:n,options:null,queryCount:0,depCount:0};return new Un(i,r,e)}function pr(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var ua=new Zt,Fi=class{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let n=[],o=[],r=Sr(this._driver,t,n,o);if(n.length)throw xs(n);o.length&&void 0,this._animations.set(e,r)}_buildPlayer(e,t,n){let o=e.element,r=_r(this._normalizer,e.keyframes,t,n);return this._driver.animate(o,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let o=[],r=this._animations.get(e),a,s=new Map;if(r?(a=Or(this._driver,t,r,wr,Oi,new Map,new Map,n,ua,o),a.forEach(g=>{let h=ye(s,g.element,new Map);g.postStyleProps.forEach(y=>h.set(y,null))})):(o.push(Es()),a=[]),o.length)throw Ts(o);s.forEach((g,h)=>{g.forEach((y,S)=>{g.set(S,this._driver.computeStyle(h,S,Ve))})});let l=a.map(g=>{let h=s.get(g.element);return this._buildPlayer(g,new Map,h)}),p=ot(l);return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ks(e);return t}listen(e,t,n,o){let r=Gi(t,"","","");return zi(this._getPlayer(e),n,r,o),()=>{}}command(e,t,n,o){if(n=="register"){this.register(e,o[0]);return}if(n=="create"){let a=o[0]||{};this.create(e,t,a);return}let r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e);break}}},mr="ng-animate-queued",ha=".ng-animate-queued",Pi="ng-animate-disabled",ga=".ng-animate-disabled",fa="ng-star-inserted",_a=".ng-star-inserted",ya=[],xr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},va={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ke="__ng_removed",Jt=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),o=n?e.value:e;if(this.value=wa(o),n){let r=e,{value:a}=r,s=ro(r,["value"]);this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(o=>{n[o]==null&&(n[o]=t[o])})}}},Yt="void",bi=new Jt(Yt),Li=class{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Se(t,this._hostClassName)}listen(e,t,n,o){if(!this._triggers.has(t))throw Is(n,t);if(n==null||n.length==0)throw Ds(t);if(!Pa(n))throw As(n,t);let r=ye(this._elementListeners,e,[]),a={name:t,phase:n,callback:o};r.push(a);let s=ye(this._engine.statesByElement,e,new Map);return s.has(t)||(Se(e,An),Se(e,An+"-"+t),s.set(t,bi)),()=>{this._engine.afterFlush(()=>{let l=r.indexOf(a);l>=0&&r.splice(l,1),this._triggers.has(t)||s.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Ns(e);return t}trigger(e,t,n,o=!0){let r=this._getTrigger(t),a=new en(this.id,t,e),s=this._engine.statesByElement.get(e);s||(Se(e,An),Se(e,An+"-"+t),this._engine.statesByElement.set(e,s=new Map));let l=s.get(t),p=new Jt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&p.absorbOptions(l.options),s.set(t,p),l||(l=bi),!(p.value===Yt)&&l.value===p.value){if(!Oa(l.params,p.params)){let _=[],T=r.matchStyles(l.value,l.params,_),G=r.matchStyles(p.value,p.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{ut(e,T),$e(e,G)})}return}let y=ye(this._engine.playersByElement,e,[]);y.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let S=r.matchTransition(l.value,p.value,e,p.params),C=!1;if(!S){if(!o)return;S=r.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:l,toState:p,player:a,isFallbackTransition:C}),C||(Se(e,mr),a.onStart(()=>{Tt(e,mr)})),a.onDone(()=>{let _=this.players.indexOf(a);_>=0&&this.players.splice(_,1);let T=this._engine.playersByElement.get(e);if(T){let G=T.indexOf(a);G>=0&&T.splice(G,1)}}),this.players.push(a),y.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,Vn,!0);n.forEach(o=>{if(o[ke])return;let r=this._engine.fetchNamespacesByElement(o);r.size?r.forEach(a=>a.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,n,o){let r=this._engine.statesByElement.get(e),a=new Map;if(r){let s=[];if(r.forEach((l,p)=>{if(a.set(p,l.value),this._triggers.has(p)){let g=this.trigger(e,p,Yt,o);g&&s.push(g)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),n&&ot(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let o=new Set;t.forEach(r=>{let a=r.name;if(o.has(a))return;o.add(a);let l=this._triggers.get(a).fallbackTransition,p=n.get(a)||bi,g=new Jt(Yt),h=new en(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:l,fromState:p,toState:g,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(n.totalAnimations){let r=n.players.length?n.playersByQueriedElement.get(e):[];if(r&&r.length)o=!0;else{let a=e;for(;a=a.parentNode;)if(n.statesByElement.get(a)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)n.markElementAsRemoved(this.id,e,!1,t);else{let r=e[ke];(!r||r===xr)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Se(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let o=n.player;if(o.destroyed)return;let r=n.element,a=this._elementListeners.get(r);a&&a.forEach(s=>{if(s.name==n.triggerName){let l=Gi(r,n.triggerName,n.fromState.value,n.toState.value);l._data=e,zi(n.player,s.phase,l,s.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(n)}),this._queue=[],t.sort((n,o)=>{let r=n.transition.ast.depCount,a=o.transition.ast.depCount;return r==0||a==0?r-a:this._engine.driver.containsElement(n.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Vi=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,r)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new Li(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,o=this.namespacesByHostElement;if(n.length-1>=0){let a=!1,s=this.driver.getParentElement(t);for(;s;){let l=o.get(s);if(l){let p=n.indexOf(l);n.splice(p+1,0,e),a=!0;break}s=this.driver.getParentElement(s)}a||n.unshift(e)}else n.push(e);return o.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let o=this._namespaceLookup[e];o&&o.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let o=this._namespaceList.indexOf(n);o>=0&&this._namespaceList.splice(o,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let o of n.values())if(o.namespaceId){let r=this._fetchNamespace(o.namespaceId);r&&t.add(r)}}return t}trigger(e,t,n,o){if(Fn(t)){let r=this._fetchNamespace(e);if(r)return r.trigger(t,n,o),!0}return!1}insertNode(e,t,n,o){if(!Fn(t))return;let r=t[ke];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,n)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Se(e,Pi)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Tt(e,Pi))}removeNode(e,t,n){if(Fn(t)){let o=e?this._fetchNamespace(e):null;o?o.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let r=this.namespacesByHostElement.get(t);r&&r.id!==e&&r.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,o,r){this.collectedLeaveElements.push(t),t[ke]={namespaceId:e,setForRemoval:o,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,n,o,r){return Fn(t)?this._fetchNamespace(e).listen(t,n,o,r):()=>{}}_buildInstruction(e,t,n,o,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,o,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,Vn,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Mi,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ot(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ke];if(t&&t.setForRemoval){if(e[ke]=xr,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Pi)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ga,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,o)=>this._balanceNamespaceList(n,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let o=this.collectedEnterElements[n];Se(o,fa)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let o=0;o<n.length;o++)n[o]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let o=this.collectedLeaveElements[n];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?ot(t).onDone(()=>{n.forEach(o=>o())}):n.forEach(o=>o())}}reportError(e){throw Rs(e)}_flushAnimations(e,t){let n=new Zt,o=[],r=new Map,a=[],s=new Map,l=new Map,p=new Map,g=new Set;this.disabledNodes.forEach(w=>{g.add(w);let M=this.driver.query(w,ha,!0);for(let E=0;E<M.length;E++)g.add(M[E])});let h=this.bodyNode,y=Array.from(this.statesByElement.keys()),S=gr(y,this.collectedEnterElements),C=new Map,_=0;S.forEach((w,M)=>{let E=wr+_++;C.set(M,E),w.forEach(R=>Se(R,E))});let T=[],G=new Set,Q=new Set;for(let w=0;w<this.collectedLeaveElements.length;w++){let M=this.collectedLeaveElements[w],E=M[ke];E&&E.setForRemoval&&(T.push(M),G.add(M),E.hasAnimation?this.driver.query(M,_a,!0).forEach(R=>G.add(R)):Q.add(M))}let se=new Map,ee=gr(y,Array.from(G));ee.forEach((w,M)=>{let E=Oi+_++;se.set(M,E),w.forEach(R=>Se(R,E))}),e.push(()=>{S.forEach((w,M)=>{let E=C.get(M);w.forEach(R=>Tt(R,E))}),ee.forEach((w,M)=>{let E=se.get(M);w.forEach(R=>Tt(R,E))}),T.forEach(w=>{this.processLeaveNode(w)})});let ft=[],De=[];for(let w=this._namespaceList.length-1;w>=0;w--)this._namespaceList[w].drainQueuedTransitions(t).forEach(E=>{let R=E.player,J=E.element;if(ft.push(R),this.collectedEnterElements.length){let ie=J[ke];if(ie&&ie.setForMove){if(ie.previousTriggersValues&&ie.previousTriggersValues.has(E.triggerName)){let ct=ie.previousTriggersValues.get(E.triggerName),Ce=this.statesByElement.get(E.element);if(Ce&&Ce.has(E.triggerName)){let mn=Ce.get(E.triggerName);mn.value=ct,Ce.set(E.triggerName,mn)}}R.destroy();return}}let Ae=!h||!this.driver.containsElement(h,J),fe=se.get(J),Ke=C.get(J),K=this._buildInstruction(E,n,Ke,fe,Ae);if(K.errors&&K.errors.length){De.push(K);return}if(Ae){R.onStart(()=>ut(J,K.fromStyles)),R.onDestroy(()=>$e(J,K.toStyles)),o.push(R);return}if(E.isFallbackTransition){R.onStart(()=>ut(J,K.fromStyles)),R.onDestroy(()=>$e(J,K.toStyles)),o.push(R);return}let oo=[];K.timelines.forEach(ie=>{ie.stretchStartingKeyframe=!0,this.disabledNodes.has(ie.element)||oo.push(ie)}),K.timelines=oo,n.append(J,K.timelines);let rs={instruction:K,player:R,element:J};a.push(rs),K.queriedElements.forEach(ie=>ye(s,ie,[]).push(R)),K.preStyleProps.forEach((ie,ct)=>{if(ie.size){let Ce=l.get(ct);Ce||l.set(ct,Ce=new Set),ie.forEach((mn,si)=>Ce.add(si))}}),K.postStyleProps.forEach((ie,ct)=>{let Ce=p.get(ct);Ce||p.set(ct,Ce=new Set),ie.forEach((mn,si)=>Ce.add(si))})});if(De.length){let w=[];De.forEach(M=>{w.push(Fs(M.triggerName,M.errors))}),ft.forEach(M=>M.destroy()),this.reportError(w)}let ae=new Map,de=new Map;a.forEach(w=>{let M=w.element;n.has(M)&&(de.set(M,M),this._beforeAnimationBuild(w.player.namespaceId,w.instruction,ae))}),o.forEach(w=>{let M=w.element;this._getPreviousPlayers(M,!1,w.namespaceId,w.triggerName,null).forEach(R=>{ye(ae,M,[]).push(R),R.destroy()})});let at=T.filter(w=>fr(w,l,p)),_t=new Map;hr(_t,this.driver,Q,p,Ve).forEach(w=>{fr(w,l,p)&&at.push(w)});let lt=new Map;S.forEach((w,M)=>{hr(lt,this.driver,new Set(w),l,Dn)}),at.forEach(w=>{let M=_t.get(w),E=lt.get(w);_t.set(w,new Map([...M?.entries()??[],...E?.entries()??[]]))});let ri=[],no=[],io={};a.forEach(w=>{let{element:M,player:E,instruction:R}=w;if(n.has(M)){if(g.has(M)){E.onDestroy(()=>$e(M,R.toStyles)),E.disabled=!0,E.overrideTotalTime(R.totalTime),o.push(E);return}let J=io;if(de.size>1){let fe=M,Ke=[];for(;fe=fe.parentNode;){let K=de.get(fe);if(K){J=K;break}Ke.push(fe)}Ke.forEach(K=>de.set(K,J))}let Ae=this._buildAnimation(E.namespaceId,R,ae,r,lt,_t);if(E.setRealPlayer(Ae),J===io)ri.push(E);else{let fe=this.playersByElement.get(J);fe&&fe.length&&(E.parentPlayer=ot(fe)),o.push(E)}}else ut(M,R.fromStyles),E.onDestroy(()=>$e(M,R.toStyles)),no.push(E),g.has(M)&&o.push(E)}),no.forEach(w=>{let M=r.get(w.element);if(M&&M.length){let E=ot(M);w.setRealPlayer(E)}}),o.forEach(w=>{w.parentPlayer?w.syncPlayerEvents(w.parentPlayer):w.destroy()});for(let w=0;w<T.length;w++){let M=T[w],E=M[ke];if(Tt(M,Oi),E&&E.hasAnimation)continue;let R=[];if(s.size){let Ae=s.get(M);Ae&&Ae.length&&R.push(...Ae);let fe=this.driver.query(M,Mi,!0);for(let Ke=0;Ke<fe.length;Ke++){let K=s.get(fe[Ke]);K&&K.length&&R.push(...K)}}let J=R.filter(Ae=>!Ae.destroyed);J.length?ba(this,M,J):this.processLeaveNode(M)}return T.length=0,ri.forEach(w=>{this.players.push(w),w.onDone(()=>{w.destroy();let M=this.players.indexOf(w);this.players.splice(M,1)}),w.play()}),ri}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,o,r){let a=[];if(t){let s=this.playersByQueriedElement.get(e);s&&(a=s)}else{let s=this.playersByElement.get(e);if(s){let l=!r||r==Yt;s.forEach(p=>{p.queued||!l&&p.triggerName!=o||a.push(p)})}}return(n||o)&&(a=a.filter(s=>!(n&&n!=s.namespaceId||o&&o!=s.triggerName))),a}_beforeAnimationBuild(e,t,n){let o=t.triggerName,r=t.element,a=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:o;for(let l of t.timelines){let p=l.element,g=p!==r,h=ye(n,p,[]);this._getPreviousPlayers(p,g,a,s,t.toState).forEach(S=>{let C=S.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),S.destroy(),h.push(S)})}ut(r,t.fromStyles)}_buildAnimation(e,t,n,o,r,a){let s=t.triggerName,l=t.element,p=[],g=new Set,h=new Set,y=t.timelines.map(C=>{let _=C.element;g.add(_);let T=_[ke];if(T&&T.removedBeforeQueried)return new it(C.duration,C.delay);let G=_!==l,Q=Sa((n.get(_)||ya).map(ae=>ae.getRealPlayer())).filter(ae=>{let de=ae;return de.element?de.element===_:!1}),se=r.get(_),ee=a.get(_),ft=_r(this._normalizer,C.keyframes,se,ee),De=this._buildPlayer(C,ft,Q);if(C.subTimeline&&o&&h.add(_),G){let ae=new en(e,s,_);ae.setRealPlayer(De),p.push(ae)}return De});p.forEach(C=>{ye(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>Ca(this.playersByQueriedElement,C.element,C))}),g.forEach(C=>Se(C,sr));let S=ot(y);return S.onDestroy(()=>{g.forEach(C=>Tt(C,sr)),$e(l,t.toStyles)}),h.forEach(C=>{ye(o,C,[]).push(S)}),S}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new it(e.duration,e.delay)}},en=class{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new it,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(o=>zi(e,n,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ye(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Ca(i,e,t){let n=i.get(e);if(n){if(n.length){let o=n.indexOf(t);n.splice(o,1)}n.length==0&&i.delete(e)}return n}function wa(i){return i??null}function Fn(i){return i&&i.nodeType===1}function Pa(i){return i=="start"||i=="done"}function ur(i,e){let t=i.style.display;return i.style.display=e??"none",t}function hr(i,e,t,n,o){let r=[];t.forEach(l=>r.push(ur(l)));let a=[];n.forEach((l,p)=>{let g=new Map;l.forEach(h=>{let y=e.computeStyle(p,h,o);g.set(h,y),(!y||y.length==0)&&(p[ke]=va,a.push(p))}),i.set(p,g)});let s=0;return t.forEach(l=>ur(l,r[s++])),a}function gr(i,e){let t=new Map;if(i.forEach(s=>t.set(s,[])),e.length==0)return t;let n=1,o=new Set(e),r=new Map;function a(s){if(!s)return n;let l=r.get(s);if(l)return l;let p=s.parentNode;return t.has(p)?l=p:o.has(p)?l=n:l=a(p),r.set(s,l),l}return e.forEach(s=>{let l=a(s);l!==n&&t.get(l).push(s)}),t}function Se(i,e){i.classList?.add(e)}function Tt(i,e){i.classList?.remove(e)}function ba(i,e,t){ot(t).onDone(()=>i.processLeaveNode(e))}function Sa(i){let e=[];return Er(i,e),e}function Er(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof Ht?Er(n.players,e):e.push(n)}}function Oa(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let o=0;o<t.length;o++){let r=t[o];if(!e.hasOwnProperty(r)||i[r]!==e[r])return!1}return!0}function fr(i,e,t){let n=t.get(i);if(!n)return!1;let o=e.get(i);return o?n.forEach(r=>o.add(r)):e.set(i,n),t.delete(i),!0}var It=class{constructor(e,t,n){this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(o,r)=>{},this._transitionEngine=new Vi(e.body,t,n),this._timelineEngine=new Fi(e.body,t,n),this._transitionEngine.onRemovalComplete=(o,r)=>this.onRemovalComplete(o,r)}registerTrigger(e,t,n,o,r){let a=e+"-"+o,s=this._triggerCache[a];if(!s){let l=[],p=[],g=Sr(this._driver,r,l,p);if(l.length)throw Os(o,l);p.length&&void 0,s=pa(o,g,this._normalizer),this._triggerCache[a]=s}this._transitionEngine.registerTrigger(t,o,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,o){this._transitionEngine.insertNode(e,t,n,o)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,o){if(n.charAt(0)=="@"){let[r,a]=or(n),s=o;this._timelineEngine.command(r,t,a,s)}else this._transitionEngine.trigger(e,t,n,o)}listen(e,t,n,o,r){if(n.charAt(0)=="@"){let[a,s]=or(n);return this._timelineEngine.listen(a,t,s,r)}return this._transitionEngine.listen(e,t,n,o,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Ma(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=Si(e[0]),e.length>1&&(n=Si(e[e.length-1]))):e instanceof Map&&(t=Si(e)),t||n?new $i(i,t,n):null}var kt=class kt{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let o=kt.initialStylesByElement.get(e);o||kt.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&$e(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($e(this._element,this._initialStyles),this._endStyles&&($e(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(kt.initialStylesByElement.delete(this._element),this._startStyles&&(ut(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ut(this._element,this._endStyles),this._endStyles=null),$e(this._element,this._initialStyles),this._state=3)}};kt.initialStylesByElement=new WeakMap;var $i=kt;function Si(i){let e=null;return i.forEach((t,n)=>{xa(n)&&(e=e||new Map,e.set(n,t))}),e}function xa(i){return i==="display"||i==="position"}var Bn=class{constructor(e,t,n,o){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,o)=>{o!=="offset"&&e.set(o,this._finished?n:qi(this.element,o))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},qn=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return yr(e,t)}getParentElement(e){return Wi(e)}query(e,t,n){return vr(e,t,n)}computeStyle(e,t,n){return qi(e,t)}animate(e,t,n,o,r,a=[]){let s=o==0?"both":"forwards",l={duration:n,delay:o,fill:s};r&&(l.easing=r);let p=new Map,g=a.filter(S=>S instanceof Bn);Ks(n,o)&&g.forEach(S=>{S.currentSnapshot.forEach((C,_)=>p.set(_,C))});let h=Us(t).map(S=>new Map(S));h=Hs(e,h,p);let y=Ma(e,h);return new Bn(e,h,l,y)}};var Ln="@",Tr="@.disabled",Kn=class{constructor(e,t,n,o){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,o=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,o){this.delegate.setAttribute(e,t,n,o)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,o){this.delegate.setStyle(e,t,n,o)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Ln&&t==Tr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},ji=class extends Kn{constructor(e,t,n,o,r){super(t,n,o,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Ln?t.charAt(1)=="."&&t==Tr?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Ln){let o=Ea(e),r=t.slice(1),a="";return r.charAt(0)!=Ln&&([r,a]=Ta(r)),this.engine.listen(this.namespaceId,o,r,a,s=>{let l=s._data||-1;this.factory.scheduleListenerCallback(l,n,s)})}return this.delegate.listen(e,t,n)}};function Ea(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Ta(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var Hn=class{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(o,r)=>{let a=r?.parentNode(o);a&&r.removeChild(a,o)}}createRenderer(e,t){let n="",o=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let p=this._rendererCache,g=p.get(o);if(!g){let h=()=>p.delete(o);g=new Kn(n,o,this.engine,h),p.set(o,g)}return g}let r=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let s=p=>{Array.isArray(p)?p.forEach(s):this.engine.registerTrigger(r,a,e,p.name,p)};return t.data.animation.forEach(s),new ji(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(r=>{let[a,s]=r;a(s)}),this._animationCallbacksBuffer=[]})}),o.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Ia=(()=>{let e=class e extends It{constructor(n,o,r){super(n,o,r)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(o){return new(o||e)(W(To),W(ht),W(gt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let i=e;return i})();function Da(){return new jn}function Aa(i,e,t){return new Hn(i,e,t)}var Ir=[{provide:gt,useFactory:Da},{provide:It,useClass:Ia},{provide:go,useFactory:Aa,deps:[Ro,It,vn]}],kr=[{provide:ht,useFactory:()=>new qn},{provide:ci,useValue:"BrowserAnimations"},...Ir],Na=[{provide:ht,useClass:Ui},{provide:ci,useValue:"NoopAnimations"},...Ir],Dr=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?Na:kr}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Le({type:e}),e.\u0275inj=Re({providers:kr,imports:[Pn]});let i=e;return i})();var Qi="@@STATE",Qn=!1,Yn=new Ee(Qn?"USER_OPTIONS":""),Ar=new Ee(Qn?"ALL_STATES_PERSISTED":"",{providedIn:"root",factory:()=>Fe(Yn).keys==="*"}),tn=new Ee(Qn?"NGXS_STORAGE_PLUGIN_OPTIONS":""),Yi=new Ee(Qn?"STORAGE_ENGINE":"");function Xi(i){return i!=null&&!!i.engine}function Nr(i){return Xi(i)&&(i=i.key),i.hasOwnProperty(ui)&&(i=i[ui].name),i instanceof Lo?i.getName():i}function Fa(i){return Ne(Z({storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:e=>e,afterDeserialize:e=>e},i),{keys:i.keys==="*"?[Qi]:i.keys})}function La(i,e){return pi(e)?null:i.storage===0?localStorage:i.storage===1?sessionStorage:null}function Rr(i,e){return e?.namespace?`${e.namespace}:${i}`:i}var Va=(()=>{let e=class e{constructor(){this._keys=new Set,this._injector=Fe(_n),this._keysWithEngines=[];let{keys:n}=Fe(tn);this.addKeys(n)}getKeysWithEngines(){return[...this._keysWithEngines]}addKeys(n){for(let o of n){let r=Nr(o);if(this._keys.has(r))continue;this._keys.add(r);let a=Xi(o)?this._injector.get(o.engine):this._injector.get(Yi);this._keysWithEngines.push({key:r,engine:a})}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Fr=!1,$a=(()=>{let e=class e{constructor(n,o,r){this._keysManager=n,this._options=o,this._platformId=r,this._allStatesPersisted=Fe(Ar)}handle(n,o,r){if(pi(this._platformId))return r(n,o);let a=jo(o),s=a(bn),l=a(Vo),p=s||l,g=!1;if(p){let h=l&&o.addedStates;for(let{key:y,engine:S}of this._keysManager.getKeysWithEngines()){if(!this._allStatesPersisted&&h){let T=y.indexOf(ja),G=T>-1?y.slice(0,T):y;if(!h.hasOwnProperty(G))continue}let C=Rr(y,this._options),_=S.getItem(C);if(_!=="undefined"&&_!=null){try{let T=this._options.deserialize(_);_=this._options.afterDeserialize(T,y)}catch{Fr&&console.error(`Error ocurred while deserializing the ${C} store value, falling back to empty object, the value obtained from the store: `,_),_={}}this._options.migrations?.forEach(T=>{let G=T.version===hi(_,T.versionKey||"version"),Q=!T.key&&this._allStatesPersisted||T.key===y;G&&Q&&(_=T.migrate(_),g=!0)}),this._allStatesPersisted?(_=this._hydrateSelectivelyOnUpdate(_,h),n=Z(Z({},n),_)):n=zo(n,y,_)}}}return r(n,o).pipe(pe(h=>{if(!(p&&!g))for(let{key:y,engine:S}of this._keysManager.getKeysWithEngines()){let C=h,_=Rr(y,this._options);y!==Qi&&(C=hi(h,y));try{let T=this._options.beforeSerialize(C,y);S.setItem(_,this._options.serialize(T))}catch(T){Fr&&(T&&(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")?console.error(`The ${_} store value exceeds the browser storage quota: `,C):console.error(`Error ocurred while serializing the ${_} store value, value not updated, the value obtained from the store: `,C))}}}))}_hydrateSelectivelyOnUpdate(n,o){return!n||!o||Object.keys(o).length===0?n:Object.keys(o).reduce((r,a)=>(n.hasOwnProperty(a)&&(r[a]=n[a]),r),{})}};e.\u0275fac=function(o){return new(o||e)(W(Va),W(tn),W(Bt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let i=e;return i})(),ja=".",Lr=(()=>{let e=class e{static forRoot(n){return{ngModule:e,providers:[{provide:Sn,useClass:$a,multi:!0},{provide:Yn,useValue:n},{provide:tn,useFactory:Fa,deps:[Yn]},{provide:Yi,useFactory:La,deps:[tn,Bt]}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Le({type:e}),e.\u0275inj=Re({});let i=e;return i})();var Vr=!1,ed=new Ee(Vr?"LOCAL_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>di(Fe(Bt))?localStorage:null}),td=new Ee(Vr?"SESSION_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>di(Fe(Bt))?sessionStorage:null});var jr=new Ee("NGXS_DEVTOOLS_OPTIONS"),za=(()=>{let e=class e{constructor(n,o,r){this._options=n,this._injector=o,this._ngZone=r,this.devtoolsExtension=null,this.globalDevtools=ai.__REDUX_DEVTOOLS_EXTENSION__||ai.devToolsExtension,this.unsubscribe=null,this.connect()}ngOnDestroy(){this.unsubscribe?.(),this.globalDevtools?.disconnect()}get store(){return this._injector.get(z)}handle(n,o,r){return!this.devtoolsExtension||this._options.disabled?r(n,o):r(n,o).pipe(Pe(a=>{let s=this.store.snapshot();throw this.sendToDevTools(n,o,s),a}),pe(a=>{this.sendToDevTools(n,o,a)}))}sendToDevTools(n,o,r){let a=$o(o);a===bn.type?this.devtoolsExtension.init(n):this.devtoolsExtension.send(Ne(Z({},o),{action:null,type:a}),r)}dispatched(n){if(n.type==="DISPATCH"){if(n.payload.type==="JUMP_TO_ACTION"||n.payload.type==="JUMP_TO_STATE"){let o=JSON.parse(n.state);o.router&&o.router.trigger&&(o.router.trigger="devtools"),this.store.reset(o)}else if(n.payload.type==="TOGGLE_ACTION")console.warn("Skip is not supported at this time.");else if(n.payload.type==="IMPORT_STATE"){let{actionsById:o,computedStates:r,currentStateIndex:a}=n.payload.nextLiftedState;this.devtoolsExtension.init(r[0].state),Object.keys(o).filter(s=>s!=="0").forEach(s=>this.devtoolsExtension.send(o[s],r[s].state)),this.store.reset(r[a].state)}}else if(n.type==="ACTION"){let o=JSON.parse(n.payload);this.store.dispatch(o)}}connect(){!this.globalDevtools||this._options.disabled||(this.devtoolsExtension=this._ngZone.runOutsideAngular(()=>this.globalDevtools.connect(this._options)),this.unsubscribe=this.devtoolsExtension.subscribe(n=>{(n.type==="DISPATCH"||n.type==="ACTION")&&this.dispatched(n)}))}};e.\u0275fac=function(o){return new(o||e)(W(jr),W(_n),W(vn))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let i=e;return i})();function Ga(i){return Z({name:"NGXS"},i)}var $r=new Ee("USER_OPTIONS"),zr=(()=>{let e=class e{static forRoot(n){return{ngModule:e,providers:[{provide:Sn,useClass:za,multi:!0},{provide:$r,useValue:n},{provide:jr,useFactory:Ga,deps:[$r]}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Le({type:e}),e.\u0275inj=Re({});let i=e;return i})();var je,rt=(je=class{registerOrLoginSuccess(e,t){e.patchState({lastError:t.payload})}static lastError(e){return e.lastError}},je.\u0275fac=function(t){return new(t||je)},je.\u0275prov=j({token:je,factory:je.\u0275fac}),je);k([ge(qt)],rt.prototype,"registerOrLoginSuccess",null);k([Be()],rt,"lastError",null);rt=k([Ct({name:"httpErrors"})],rt);var Gr=Et("Keyboard");var Dt=(()=>{let e=class e{constructor(n){this.elementRef=n}onClick(n){let o=this.elementRef.nativeElement.contains(n),r=n.tagName==="INPUT";!o&&!r&&Gr.hide()}};e.\u0275fac=function(o){return new(o||e)(O(yn))},e.\u0275dir=gn({type:e,selectors:[["","appClickOutside",""]],hostBindings:function(o,r){o&1&&v("click",function(s){return r.onClick(s.target)},!1,ho)}});let i=e;return i})();function Wa(i,e){i&1&&(c(0,"span"),f(1,"Login"),d())}function Ua(i,e){i&1&&(c(0,"span"),f(1,"Email or Login"),d())}function Ba(i,e){i&1&&(c(0,"span"),f(1,"minimum 5 characters"),d())}function qa(i,e){i&1&&(c(0,"span"),f(1,"Make sure it is valid"),d())}function Ka(i,e){if(i&1&&(c(0,"div",3)(1,"p")(2,"span"),f(3,"Email"),d(),P(4,qa,2,0,"span",4),d(),b(5,"input",12),d()),i&2){let t=x();m(4),u("ngIf",t.email.touched&&t.email.errors),m(),u("formControl",t.email)}}function Ha(i,e){i&1&&(c(0,"span"),f(1,"minimum 8 characters"),d())}function Qa(i,e){i&1&&(c(0,"div",13)(1,"span"),f(2,"Forgot password"),d()())}function Ya(i,e){i&1&&(c(0,"div"),f(1,"Sign In"),d())}function Xa(i,e){i&1&&(c(0,"div"),f(1,"Get started, it\u2019s free!"),d())}function Za(i,e){i&1&&(c(0,"div"),b(1,"img",14),d())}function Ja(i,e){i&1&&(c(0,"div",15),f(1,"Don't have an account yet?"),d())}function el(i,e){i&1&&(c(0,"div",15),f(1,"Do you already have an account?"),d())}function tl(i,e){i&1&&(c(0,"div"),f(1,"Sign Up"),d())}function nl(i,e){i&1&&(c(0,"div"),f(1,"Log In"),d())}var At=class At{constructor(e,t){this.router=e,this.store=t,this.isLoading=!1,this.isLogin=!0,this.login=new tt(""),this.email=new tt(""),this.password=new tt("")}ngOnInit(){this.tokenSubscription=this.token$.subscribe({next:e=>{e&&this.router.navigate([L.Dictionary])}}),this.lastErrorSubscription=this.lastError$.subscribe({next:e=>{e&&(this.isLoading=!1)}})}switchModes(){this.isLogin=!this.isLogin}submit(){return U(this,null,function*(){if(this.isLoading)return;this.isLoading=!0;let e;if(this.isLogin){let t={loginOrEmail:this.login.value,password:this.password.value};e=new Tn(t)}else{let t={login:this.login.value,email:this.email.value,password:this.password.value,language:Qo.Russian};e=new kn(t)}this.store.dispatch(e)})}checkIfDisabled(){return this.password.errors||this.login.errors||!this.isLogin&&this.email.errors}ngOnDestroy(){this.tokenSubscription.unsubscribe(),this.lastErrorSubscription.unsubscribe()}};At.\u0275fac=function(t){return new(t||At)(O($),O(z))},At.\u0275cmp=A({type:At,selectors:[["app-login"]],decls:29,vars:16,consts:[[1,"login-container"],[1,"login-title"],[1,"login-subtitle"],[1,"input-set"],[4,"ngIf"],["type","text","minlength","5","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],["class","input-set",4,"ngIf"],["type","password","minlength","8","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],["class","forgot-password",4,"ngIf"],[1,"submit-bright-btn",3,"click","disabled"],["class","alternative-text",4,"ngIf"],[1,"alternative-btn",3,"click"],["type","email","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"forgot-password"],["src","assets/redesign/loader-circle.svg","width","14","height","14"],[1,"alternative-text"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div")(2,"p",1),f(3,"LinguaTone"),d(),c(4,"p",2),f(5,"Tune into Fluency"),d()(),c(6,"div",3)(7,"p"),P(8,Wa,2,0,"span",4)(9,Ua,2,0,"span",4)(10,Ba,2,0,"span",4),d(),b(11,"input",5),d(),P(12,Ka,6,2,"div",6),c(13,"div",3)(14,"p")(15,"span"),f(16,"Password"),d(),P(17,Ha,2,0,"span",4),d(),b(18,"input",7),d(),P(19,Qa,3,0,"div",8),c(20,"button",9),v("click",function(){return n.submit()}),P(21,Ya,2,0,"div",4)(22,Xa,2,0,"div",4)(23,Za,2,0,"div",4),d(),P(24,Ja,2,0,"div",10)(25,el,2,0,"div",10),c(26,"button",11),v("click",function(){return n.switchModes()}),P(27,tl,2,0,"div",4)(28,nl,2,0,"div",4),d()()),t&2&&(m(8),u("ngIf",!n.isLogin),m(),u("ngIf",n.isLogin),m(),u("ngIf",n.login.touched&&n.login.errors),m(),u("formControl",n.login),m(),u("ngIf",!n.isLogin),m(5),u("ngIf",n.password.touched&&n.password.errors),m(),u("formControl",n.password),m(),u("ngIf",n.isLogin),m(),u("disabled",n.checkIfDisabled()),m(),u("ngIf",n.isLogin&&!n.isLoading),m(),u("ngIf",!n.isLogin&&!n.isLoading),m(),u("ngIf",n.isLoading),m(),u("ngIf",n.isLogin),m(),u("ngIf",!n.isLogin),m(2),u("ngIf",n.isLogin),m(),u("ngIf",!n.isLogin))},dependencies:[re,wt,et,bt,St,Pt,Dt],styles:[".login-container[_ngcontent-%COMP%]{background-color:#1c1c23;width:100vw;height:100vh;color:#666680;display:grid;grid-gap:10px;justify-items:center;align-items:center;grid-auto-rows:3fr 1fr 1fr 1fr 1fr 2fr 1fr 1fr}.login-container[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{text-align:center;font-size:2em;font-weight:700;color:#ff7966}.login-container[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:100;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:2px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){color:#b1060f}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:15px;border:2px solid #353542;border-radius:15px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   .input-field.ng-invalid.ng-dirty.ng-touched[_ngcontent-%COMP%]{border:2px solid #B1060F}.login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{justify-self:end;padding-right:30px;align-self:start;min-height:74px}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px;align-self:center;color:#fff;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;border:0;padding:0;font-family:inherit;font-size:inherit}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]:disabled{background:#dcdad1;box-shadow:none}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:10px 0}.login-container[_ngcontent-%COMP%]   .alternative-text[_ngcontent-%COMP%]{color:#fff;align-self:end}.login-container[_ngcontent-%COMP%]   .alternative-btn[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px;align-self:start;color:#fff;background:#ffffff1a;box-shadow:-1px -1px #585858;border-radius:999px;border:0;padding:0;font-family:inherit;font-size:inherit}.login-container[_ngcontent-%COMP%]   .alternative-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:10px 0}"]});var Nt=At;k([X(dt.token)],Nt.prototype,"token$",void 0);k([X(rt.lastError)],Nt.prototype,"lastError$",void 0);var Wr=(()=>{let e=class e{constructor(n){this.router=n}changeRoute(n){this.router.navigate([n])}};e.\u0275fac=function(o){return new(o||e)(O($))},e.\u0275cmp=A({type:e,selectors:[["app-home-page"]],decls:3,vars:0,consts:[[1,"home-container"]],template:function(o,r){o&1&&(c(0,"div",0)(1,"div"),b(2,"router-outlet"),d()())},dependencies:[On],styles:[".home-container[_ngcontent-%COMP%]{background-color:#1c1c23;color:#fff}"]});let i=e;return i})();var ze,ve=(ze=class{getUserVocabularySuccess(e,t){let n=t.payload.map(o=>({wordId:o.word.id,userWordId:o.id,word:o.word.word,progress:o.progress,createdAt:o.createdAt,translations:o.word.Translation.map(r=>r.translation)}));e.patchState({userVocabulary:In(n,"createdAt")})}static userVocabulary(e){return e.userVocabulary}},ze.\u0275fac=function(t){return new(t||ze)},ze.\u0275prov=j({token:ze,factory:ze.\u0275fac}),ze);k([ge(xn)],ve.prototype,"getUserVocabularySuccess",null);k([Be()],ve,"userVocabulary",null);ve=k([Ct({name:"vocabulary",defaults:{userVocabulary:[]}})],ve);var il=["*"];function ol(i,e){i&1&&(c(0,"div"),vo(1),d())}var B=(()=>{let e=class e{constructor(n,o){this.store=n,this.router=o,this.routes=L,this.currentRoute=this.router.url}goToPage(n){this.router.navigate([n])}};e.\u0275fac=function(o){return new(o||e)(O(z),O($))},e.\u0275cmp=A({type:e,selectors:[["app-footer-menu"]],inputs:{isButtonVisible:"isButtonVisible"},ngContentSelectors:il,decls:11,vars:7,consts:[[1,"footer-container"],[4,"ngIf"],[1,"footer-body"],[3,"click"],["src","assets/redesign/book-.svg"],["src","assets/redesign/game-.svg"],["src","assets/redesign/image-.svg"],["src","assets/redesign/person-.svg"]],template:function(o,r){o&1&&(yo(),c(0,"footer",0),P(1,ol,2,0,"div",1),c(2,"div",2)(3,"div",3),v("click",function(){return r.goToPage(r.routes.Dictionary)}),b(4,"img",4),d(),c(5,"div",3),v("click",function(){return r.goToPage(r.routes.Exercises)}),b(6,"img",5),d(),c(7,"div"),b(8,"img",6),d(),c(9,"div",3),v("click",function(){return r.goToPage(r.routes.UserProfile)}),b(10,"img",7),d()()()),o&2&&(m(),u("ngIf",r.isButtonVisible),m(),H("with-action-button",r.isButtonVisible),m(),H("active",r.currentRoute.startsWith(r.routes.Dictionary)),m(2),H("active",r.currentRoute.startsWith(r.routes.Exercises)))},dependencies:[re],styles:['.footer-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]{background-image:url("./media/footer-no-hole-MOKN222C.svg");background-repeat:no-repeat;height:100%;position:relative}.footer-container[_ngcontent-%COMP%]   .footer-body.with-action-button[_ngcontent-%COMP%]{background-image:url("./media/footer-hole-G2LTRVOZ.svg")}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;z-index:50;position:absolute;top:25px;filter:invert(67%) sepia(5%) saturate(796%) hue-rotate(202deg) brightness(97%) contrast(90%)}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{filter:invert(96%) sepia(81%) saturate(227%) hue-rotate(207deg) brightness(107%) contrast(101%)}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:11%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:28%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){right:28%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){right:11%}']});let i=e;return i})();var Ur=(()=>{let e=class e{getPlatform(){return Xo.getPlatform()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var q=(()=>{let e=class e{constructor(n,o,r){this.elementRef=n,this.renderer=o,this.platformService=r,this.iosStyles={height:"calc(100vh - 54px)","padding-top":"54px"}}ngOnInit(){if(this.platformService.getPlatform()==="ios")for(let n in this.iosStyles)this.renderer.setStyle(this.elementRef.nativeElement,n,this.iosStyles[n])}};e.\u0275fac=function(o){return new(o||e)(O(yn),O(fo),O(Ur))},e.\u0275dir=gn({type:e,selectors:[["","appIosStyles",""]]});let i=e;return i})();var sl=i=>({"--progress":i});function al(i,e){if(i&1&&(c(0,"div",14),b(1,"div",15),c(2,"div")(3,"p"),f(4),d(),c(5,"p"),f(6),d()()()),i&2){let t=e.$implicit;m(),u("ngStyle",Cn(3,sl,t.progress+"%")),m(3),I(t.word),m(2),I(t.translations.join(", "))}}var Rt=class Rt{constructor(e,t){this.router=e,this.store=t,this.search=new tt("")}actionButtonPressed(){this.router.navigate([L.AddNewWord])}disableScroll(e){e.preventDefault(),e.stopPropagation()}ngOnInit(){this.store.dispatch(new Mn),this.filteredDictionary$=hn([this.search.valueChanges.pipe(uo("")),this.userVocabulary$]).pipe(we(([e,t])=>{let n=e.toLowerCase();return t.filter(o=>o.word.toLowerCase().includes(n))}))}};Rt.\u0275fac=function(t){return new(t||Rt)(O($),O(z))},Rt.\u0275cmp=A({type:Rt,selectors:[["app-vocabulary-page"]],decls:19,vars:5,consts:[["appIosStyles","",1,"vocabulary-container"],[1,"header",3,"touchmove"],[1,"top-panel"],["src","assets/redesign/edit-.svg"],["src","assets/redesign/filter-.svg"],[1,"search"],["type","text","minlength","5","autocomplete","off","placeholder","Search for a word","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"main-content"],[1,"vocabulary-list"],["class","word-container",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/add-.svg"],[1,"word-container"],[1,"progress-bar",3,"ngStyle"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),v("touchmove",function(r){return n.disableScroll(r)}),c(2,"div",2)(3,"div"),b(4,"img",3),d(),c(5,"div"),f(6,"My Vocaburary"),d(),c(7,"div"),b(8,"img",4),d()(),c(9,"div",5),b(10,"input",6),d()(),c(11,"div",7)(12,"div",8),P(13,al,7,5,"div",9),Ye(14,"async"),d()(),c(15,"div",10),v("touchmove",function(r){return n.disableScroll(r)}),c(16,"app-footer-menu",11)(17,"div",12),v("click",function(){return n.actionButtonPressed()}),b(18,"img",13),d()()()()),t&2&&(m(10),u("formControl",n.search),m(3),u("ngForOf",Xe(14,3,n.filteredDictionary$)),m(3),u("isButtonVisible",!0))},dependencies:[Y,ko,wt,et,bt,St,Pt,B,Dt,q,vt],styles:[`.vocabulary-container{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,1.1fr) minmax(0,8fr) minmax(0,1.2fr)}.vocabulary-container .header .top-panel{display:flex;justify-content:space-around;color:#a2a2b5;align-items:center;font-size:1.2em;margin-top:10px}.vocabulary-container .header .top-panel img{width:30px;filter:invert(67%) sepia(5%) saturate(796%) hue-rotate(202deg) brightness(97%) contrast(90%)}.vocabulary-container .header .search{margin:0 30px}.vocabulary-container .header .search input{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:8px 15px;border:1px solid #353542;border-radius:15px}.vocabulary-container .main-content{overflow:scroll}.vocabulary-container .main-content .vocabulary-list{margin:0 30px}.vocabulary-container .main-content .vocabulary-list .word-container{margin-top:7px;border:1px solid #353542;border-radius:16px;padding:10px;height:30px;box-shadow:-1px -1px #5858584d;background-color:#26262f;display:flex;align-items:center}.vocabulary-container .main-content .vocabulary-list .word-container .progress-bar{margin-right:10px;width:30px;height:30px;border-radius:50%;background:radial-gradient(closest-side,#26262F 79%,transparent 80%),conic-gradient(#00FAD9 var(--progress),#4E4E61 0)}.vocabulary-container .main-content .vocabulary-list .word-container p:nth-child(1){margin:0;color:#fff}.vocabulary-container .main-content .vocabulary-list .word-container p:nth-child(2){margin:3px 0 0;color:#a2a2b5;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 130px);white-space:nowrap}.vocabulary-container .footer .footer-action-button{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.vocabulary-container .footer .footer-action-button img{width:40px;height:40px}
`],encapsulation:2});var nn=Rt;k([X(ve.userVocabulary)],nn.prototype,"userVocabulary$",void 0);var Br=(()=>{let e=class e{constructor(n,o){this.router=n,this.store=o}logout(){this.store.dispatch(new Yo),this.router.navigate([L.Login])}disableScroll(n){n.preventDefault(),n.stopPropagation()}};e.\u0275fac=function(o){return new(o||e)(O($),O(z))},e.\u0275cmp=A({type:e,selectors:[["app-user-profile-page"]],decls:8,vars:1,consts:[["appIosStyles","",1,"user-profile-container"],[1,"main-content"],[3,"click"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(o,r){o&1&&(c(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return r.logout()}),f(3,"LOGOUT"),d()(),c(4,"div",3),v("touchmove",function(s){return r.disableScroll(s)}),c(5,"app-footer-menu",4)(6,"div",5),b(7,"img",6),d()()()()),o&2&&(m(5),u("isButtonVisible",!1))},dependencies:[B,q],styles:[".user-profile-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.user-profile-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.user-profile-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});let i=e;return i})();var Xn=(()=>{let e=class e{constructor(n){this.payload=n}};e.type="[Game] Init Pronunciation Game";let i=e;return i})(),Zn=(()=>{let e=class e{constructor(n){this.payload=n}};e.type="[Game] Finish Crossword Game";let i=e;return i})(),Jn=(()=>{let e=class e{};e.type="[Game] Clear Game Data";let i=e;return i})(),ei=(()=>{let e=class e{};e.type="[Game] Init Crossword";let i=e;return i})(),ti=(()=>{let e=class e{constructor(n){this.payload=n}};e.type="[Game] Highlight Cells";let i=e;return i})(),ni=(()=>{let e=class e{constructor(n){this.payload=n}};e.type="[Game] Save Correct Word";let i=e;return i})(),ii=(()=>{let e=class e{};e.type="[Game] Init Dialog Game";let i=e;return i})();var qr=(()=>{let e=class e{constructor(n,o){this.store=n,this.router=o,this.routes=L}goToPage(n){this.router.navigate([n])}disableScroll(n){n.preventDefault(),n.stopPropagation()}ngOnInit(){this.store.dispatch(new Jn)}};e.\u0275fac=function(o){return new(o||e)(O(z),O($))},e.\u0275cmp=A({type:e,selectors:[["app-exercises-main"]],decls:28,vars:0,consts:[["appIosStyles","",1,"exercises-container"],[1,"main-content"],[1,"game-item",3,"click"],["src","assets/redesign/loudspeaker.svg",1,"image"],[1,"title"],[1,"description"],["src","assets/redesign/dialog.svg",1,"image"],["src","assets/redesign/crossword.svg",1,"image"],[1,"footer",3,"touchmove"]],template:function(o,r){o&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),v("click",function(){return r.goToPage(r.routes.PronunciationPreparation)}),c(3,"div"),b(4,"img",3),d(),c(5,"div")(6,"div",4),f(7,"Pronunciation"),d(),c(8,"div",5),f(9,"Using examples as hints, pronounce the hidden word"),d()()(),c(10,"div",2),v("click",function(){return r.goToPage(r.routes.Dialog)}),c(11,"div"),b(12,"img",6),d(),c(13,"div")(14,"div",4),f(15,"Dialog"),d(),c(16,"div",5),f(17,"Maintain the dialog using the words form the vocabulary"),d()()(),c(18,"div",2),v("click",function(){return r.goToPage(r.routes.Crossword)}),c(19,"div"),b(20,"img",7),d(),c(21,"div")(22,"div",4),f(23,"Crossword"),d(),c(24,"div",5),f(25,"Solve the crossword"),d()()()(),c(26,"div",8),v("touchmove",function(s){return r.disableScroll(s)}),b(27,"app-footer-menu"),d()())},dependencies:[B,q],styles:[".exercises-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:20px;gap:10px;background:#4e4e6133;border-radius:16px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{height:50px;width:50px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4em;margin-bottom:10px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#a2a2b5;font-size:.8em}"]});let i=e;return i})();var Ft=(()=>{let e=class e{constructor(n,o){this.http=n,this.store=o,this.getSearchWordUrl=r=>`${Te.apiUrl}/words/search?q=${r}`,this.getAddWordToVocabularyUrl=r=>`${Te.apiUrl}/words/${r}`,this.getRandomWordsUrl=r=>`${Te.apiUrl}/words/random/${r}`,this.getUserVocabularyUrl=`${Te.apiUrl}/words`,this.updateWordsProgressUrl=`${Te.apiUrl}/words/progress/update`,this.speechRecognitionUrl=`${Te.apiUrl}/speech/recognize`,this.randomDialogUrl=`${Te.apiUrl}/words/dialog`}getToken(){return this.store.selectSnapshot(dt.token)}searchWord(n){return this.http.get(this.getSearchWordUrl(n),{headers:new Ze({Authorization:`Bearer ${this.getToken()}`})})}addWordToUserVocabulary(n){return this.http.post(this.getAddWordToVocabularyUrl(n),{},{headers:new Ze({Authorization:`Bearer ${this.getToken()}`})})}getUserVocabulary(n){let o=new mi({fromObject:{include:n}});return this.http.get(this.getUserVocabularyUrl,{headers:new Ze({Authorization:`Bearer ${this.getToken()}`}),params:o})}getSeveralRandomWords(n,o,r){let a=new mi({fromObject:{include:o,limitIncludedEntities:r}});return this.http.get(this.getRandomWordsUrl(n),{headers:new Ze({Authorization:`Bearer ${this.getToken()}`}),params:a})}getRandomDialog(){return this.http.get(this.randomDialogUrl,{headers:new Ze({Authorization:`Bearer ${this.getToken()}`})})}recognizeSpeech(n){return this.http.post(this.speechRecognitionUrl,n,{headers:new Ze({Authorization:`Bearer ${this.getToken()}`})})}updateWordsProgress(n){return this.http.post(this.updateWordsProgressUrl,{userWordIds:n},{headers:new Ze({Authorization:`Bearer ${this.getToken()}`})})}};e.\u0275fac=function(o){return new(o||e)(W(wn),W(z))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function cl(i,e){i&1&&b(0,"img",12)}function dl(i,e){if(i&1){let t=he();c(0,"img",18),v("click",function(){me(t);let o=x().$implicit,r=x();return ue(r.addWordToUserDictionary(o))}),d()}}function pl(i,e){i&1&&(fn(),c(0,"svg",19),b(1,"polyline",20),d())}function ml(i,e){if(i&1&&(c(0,"li")(1,"div")(2,"p",13),f(3),d(),c(4,"p",14),f(5),d()(),c(6,"div",15),P(7,dl,1,0,"img",16)(8,pl,2,0,"svg",17),d()()),i&2){let t=e.$implicit;m(3),I(t.word),m(2),I(t.translations.join(", ")),m(),H("actionable",!t.added),m(),u("ngIf",!t.added),m(),u("ngIf",t.added)}}var Kr=(()=>{let e=class e{constructor(n,o,r){this.wordService=n,this.router=o,this.store=r,this.wordSearch=new tt(""),this.isSearchInProgress=!1,this.possibleWords=[]}goBack(){this.router.navigate([L.Dictionary])}addWordToUserDictionary(n){this.store.dispatch(new Ot(n.id)),n.added=!0}getPossibleWordOptions(n){this.isSearchInProgress=!1,n&&this.wordService.searchWord(n).subscribe({next:o=>{let a=this.store.selectSnapshot(ve.userVocabulary).map(l=>l.wordId),s=o.filter(l=>!a.includes(l.id)).map(l=>Ne(Z({},l),{translations:l.Translation.map(p=>p.translation)}));this.possibleWords=s}})}disableScroll(n){n.preventDefault(),n.stopPropagation()}ngOnInit(){this.wordSearch.valueChanges.pipe(pe(()=>{this.isSearchInProgress=!0})).pipe(co(()=>lo(1e3))).pipe(mo()).subscribe({next:n=>this.getPossibleWordOptions(n)})}ngOnDestroy(){}};e.\u0275fac=function(o){return new(o||e)(O(Ft),O($),O(z))},e.\u0275cmp=A({type:e,selectors:[["app-add-user-word"]],decls:17,vars:3,consts:[["appIosStyles","",1,"add-new-word-container"],[1,"header"],[1,"top-panel"],[3,"click"],["src","assets/redesign/back-icon.svg"],[1,"search"],["class","loader","src","assets/redesign/loader-circle.svg",4,"ngIf"],["type","text","minlength","5","autocomplete","off","placeholder","Start typing","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"options"],[1,"potential-list"],[4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],["src","assets/redesign/loader-circle.svg",1,"loader"],[1,"word"],[1,"translations"],[1,"add-btn"],["src","assets/redesign/plus-sign.svg",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2",4,"ngIf"],["src","assets/redesign/plus-sign.svg",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2"],["fill","none","stroke","#FF8A70","stroke-width","10","stroke-linecap","round","stroke-miterlimit","10","points","100.2,40.2 51.5,88.8 29.8,67.5 ",1,"check","path"]],template:function(o,r){o&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v("click",function(){return r.goBack()}),b(4,"img",4),d(),c(5,"div"),f(6,"Add New Word"),d(),b(7,"div"),d(),c(8,"div",5),P(9,cl,1,0,"img",6),b(10,"input",7),d()(),c(11,"div",8)(12,"div",9)(13,"ul"),P(14,ml,9,6,"li",10),d()()(),c(15,"div",11),v("touchmove",function(s){return r.disableScroll(s)}),b(16,"app-footer-menu"),d()()),o&2&&(m(9),u("ngIf",r.isSearchInProgress),m(),u("formControl",r.wordSearch),m(4),u("ngForOf",r.possibleWords))},dependencies:[Y,re,wt,et,bt,St,Pt,B,Dt,q],styles:[".add-new-word-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,1.1fr) minmax(0,8fr) minmax(0,1.2fr)}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .top-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-around;color:#a2a2b5;align-items:center;font-size:1.2em;margin-top:15px}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .top-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin:5px 30px;position:relative}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;top:calc(50% - 12px);right:10px;animation-name:_ngcontent-%COMP%_spin;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:8px 15px;border:1px solid #353542;border-radius:15px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]{margin:0 30px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;background:#4e4e6133;height:60px;border-radius:16px;margin-bottom:5px;animation:_ngcontent-%COMP%_fadeIn .5s linear;animation-fill-mode:both;display:flex;justify-content:space-between;align-items:center}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.word[_ngcontent-%COMP%]{margin:0 0 5px 20px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.translations[_ngcontent-%COMP%]{margin:0 0 0 20px;color:#a2a2b5;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 130px);white-space:nowrap}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{width:40px;height:40px;text-align:center;line-height:40px;border-radius:16px;margin-right:10px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn.actionable[_ngcontent-%COMP%]{background:#4e4e6133;box-shadow:-1px -1px #585858}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:25px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:25px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path.check[_ngcontent-%COMP%]{stroke-dashoffset:-100;animation:_ngcontent-%COMP%_dash-check .9s .35s ease-in-out forwards}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1000;stroke-dashoffset:0}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){animation-delay:.25s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){animation-delay:.5s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){animation-delay:.75s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){animation-delay:1s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){animation-delay:1.25s}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;top:100px}75%{opacity:.5;top:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_dash-check{0%{stroke-dashoffset:-100;opacity:1}99%{opacity:1}to{stroke-dashoffset:900;opacity:0}}"]});let i=e;return i})();var ne=function(i){return i.Translation="Translation",i.Definition="Definition",i.Example="Example",i}(ne||{});function ul(i,e){if(i&1){let t=he();c(0,"div",9),v("click",function(){let o=me(t).$implicit,r=x();return ue(r.selectTask(o.value))}),c(1,"span",10),f(2),d()()}if(i&2){let t=e.$implicit,n=x();H("activated",t.value===n.selectedTask),m(2),yt("",t.value,"s")}}function hl(i,e){if(i&1){let t=he();c(0,"div",11),v("click",function(){let o=me(t).$implicit,r=x();return ue(r.selectNumber(o))}),c(1,"span",10),f(2),d()()}if(i&2){let t=e.$implicit,n=x();H("activated",t===n.selectedNumber),m(2),I(t)}}var Hr=(()=>{let e=class e{constructor(n,o){this.store=n,this.router=o,this.tasks=ne,this.numberOfWords=[5,10,15],this.selectedTask=ne.Example,this.selectedNumber=this.numberOfWords[1]}disableScroll(n){n.preventDefault(),n.stopPropagation()}selectTask(n){this.selectedTask=n}selectNumber(n){this.selectedNumber=n}startGame(){let n={task:this.selectedTask,numberOfWords:this.selectedNumber};this.store.dispatch(new Xn(n)),this.router.navigate([L.Pronunciation])}};e.\u0275fac=function(o){return new(o||e)(O(z),O($))},e.\u0275cmp=A({type:e,selectors:[["app-pronunciation-preparation"]],decls:14,vars:5,consts:[["appIosStyles","",1,"pronunciation-preparation-container"],[1,"main-content"],["class","type activated",3,"activated","click",4,"ngFor","ngForOf"],[1,"number-of-words"],["class","item",3,"activated","click",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/play.svg"],[1,"type","activated",3,"click"],[1,"title"],[1,"item",3,"click"]],template:function(o,r){o&1&&(c(0,"div",0)(1,"div",1)(2,"h3"),f(3,"Select what will be used for tasks:"),d(),P(4,ul,3,3,"div",2),Ye(5,"keyvalue"),c(6,"h3"),f(7,"Select a number of words:"),d(),c(8,"div",3),P(9,hl,3,3,"div",4),d()(),c(10,"div",5),v("touchmove",function(s){return r.disableScroll(s)}),c(11,"app-footer-menu",6)(12,"div",7),v("click",function(){return r.startGame()}),b(13,"img",8),d()()()()),o&2&&(m(4),u("ngForOf",Xe(5,3,r.tasks)),m(5),u("ngForOf",r.numberOfWords),m(2),u("isButtonVisible",!0))},dependencies:[Y,B,q,Io],styles:[".pronunciation-preparation-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#a2a2b5}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:#4e4e6133;border-radius:16px;padding:20px;margin-bottom:5px;text-align:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .type.activated[_ngcontent-%COMP%]{background:#4e4e61}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background:#4e4e6133;border-radius:16px;padding:20px;width:30px;height:10px;margin-bottom:5px;display:flex;align-items:center;justify-content:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]   .item.activated[_ngcontent-%COMP%]{background:#4e4e61}.pronunciation-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;padding-left:5px}"]});let i=e;return i})();var st=function(i){return i.Vertical="Vertical",i.Horizontal="Horizontal",i}(st||{}),gl=(i,e)=>{if(i.to>e.length)for(let n=e.length;n<i.to;n++)e.push(new Array(e[0].length).fill(null));if(i.from<0)for(let n=i.from;n<0;n++)e.unshift(new Array(e[0].length).fill(null));let t=i.from<0?0:i.from;for(let n=0;n<i.newWord.length;n++){let o=t+n,r=i.matchedCell[1];e[o][r]=i.newWord[n]}},fl=(i,e)=>{if(i.to>e[0].length){let n=i.to-e[0].length;for(let o of e)o.push(...new Array(n).fill(null))}if(i.from<0)for(let n of e)n.unshift(...new Array(Math.abs(i.from)).fill(null));let t=i.from<0?0:i.from;for(let n=0;n<i.newWord.length;n++){let o=i.matchedCell[0],r=t+n;e[o][r]=i.newWord[n]}},_l=(i,e,t,n,o)=>{let[r,a]=[o-1,o+1],s=n-t,l=s+e.length,p=!0,g=0,h=-1;(le(i,`${s-1}.${o}`)||le(i,`${l+1}.${o}`))&&(p=!1);for(let y=s;y<=l;y++){h++;let _=le(i,`${y}.${o}`),T=le(i,`${y}.${r}`),G=le(i,`${y}.${a}`);if(_&&_===e[h]){g++;continue}if((_||T||G)&&_!==e[h]){p=!1;break}}return p?[{wordIndex:t,priority:g,matchedCell:[n,o],maxSpan:Math.max(t,e.length-t-1),letter:e[t],targetDirection:st.Vertical,newWord:e,from:s,to:l}]:[]},yl=(i,e,t,n,o)=>{let[r,a]=[n-1,n+1],s=o-t,l=s+e.length,p=!0,g=0,h=-1;(le(i,`${n}.${s-1}`)||le(i,`${n}.${l+1}`))&&(p=!1);for(let y=s;y<=l;y++){h++;let _=le(i,`${n}.${y}`),T=le(i,`${r}.${y}`),G=le(i,`${a}.${y}`);if(_&&_===e[h]){g++;continue}if((_||T||G)&&_!==e[h]){p=!1;break}}return p?[{wordIndex:t,priority:g,matchedCell:[n,o],maxSpan:Math.max(t,e.length-t-1),letter:e[t],targetDirection:st.Horizontal,newWord:e,from:s,to:l}]:[]},vl=(i,e)=>{let t=[];for(let n=0;n<e.length;n++){let o=e[n];for(let r=0;r<i.length;r++)for(let a=0;a<i[r].length;a++)if(o===i[r][a]){let s=!le(i,`${r}.${a-1}`)&&!le(i,`${r}.${a+1}`),l=!le(i,`${r-1}.${a}`)&&!le(i,`${r+1}.${a}`);if(!l&&!s)continue;l?t.push(..._l(i,e,n,r,a)):t.push(...yl(i,e,n,r,a))}}return t},Cl=i=>{let e=[];i.sort((s,l)=>l.word.length-s.word.length),i.forEach((s,l)=>{let p=s.word.split("");if(!e.length)e.push(p),s.startCoordinates=[0,0],s.direction=st.Horizontal;else{let g=vl(e,p);g.sort((y,S)=>S.priority-y.priority||y.maxSpan-S.maxSpan);let h=g.shift();if(h){if(s.direction=h.targetDirection,h.targetDirection===st.Horizontal&&(fl(h,e),s.startCoordinates=h.matchedCell,s.startCoordinates[1]=h.from,h.from<0)){s.startCoordinates[1]=0;let y=Math.abs(h.from);for(let S=0;S<l;S++)i[S].startCoordinates[1]+=y}if(h.targetDirection===st.Vertical&&(gl(h,e),s.startCoordinates=h.matchedCell,s.startCoordinates[0]=h.from,h.from<0)){s.startCoordinates[0]=0;let y=Math.abs(h.from);for(let S=0;S<l;S++)i[S].startCoordinates[0]+=y}}}});let n=In(i,s=>s.startCoordinates).reduce((s,l)=>{let p=Zo(s),g=nt(l);return p?er(p.startCoordinates,g.startCoordinates)?g.questionNumber=p.questionNumber:g.questionNumber=p.questionNumber+1:g.questionNumber=1,s.push(g),s},[]),o=_i(n,{direction:st.Horizontal}),r=_i(n,{direction:st.Vertical}),a=e.map((s,l)=>s.map((p,g)=>p?{letter:p,row:l,column:g}:{}));return n.forEach(s=>{let[l,p]=s.startCoordinates;a[l][p].questionNumber=s.questionNumber}),{crossword:a,horizontalWords:o,verticalWords:r}},Qr=Cl;var Ge,V=(Ge=class{constructor(e){this.wordService=e}initPronunciationGameSuccess(e,t){return U(this,null,function*(){console.log(t.payload),e.patchState({pronunciation:t.payload})})}initCrossword(e){return U(this,null,function*(){return yield new Promise(t=>setTimeout(t,500)),this.wordService.getSeveralRandomWords(10,[ne.Definition,ne.Translation],2).pipe(pe(t=>{e.patchState({crossword:Qr(t)})}))})}initDialogGame(e){return U(this,null,function*(){return yield new Promise(t=>setTimeout(t,500)),this.wordService.getRandomDialog().pipe(pe(t=>{e.patchState({dialog:t})}))})}finishPronunciationGame(e,t){return U(this,null,function*(){e.patchState({pronunciation:{results:t.payload}})})}FinishDialogGame(e,t){return U(this,null,function*(){e.patchState({dialogResults:t.payload})})}FinishCrosswordGame(e,t){return U(this,null,function*(){e.patchState({crossword:t.payload});let n=[...t.payload.horizontalWords,...t.payload.verticalWords].filter(o=>o.isCorrect).map(o=>o.id);return n.length&&this.wordService.updateWordsProgress(n)})}HighlightCells(e,t){return U(this,null,function*(){let n=e.getState();e.patchState({crossword:Ne(Z({},n.crossword),{highlighted:t.payload})})})}SaveCorrectWord(e,t){return U(this,null,function*(){let n=e.getState(),{crossword:o,horizontalWords:r,verticalWords:a,highlighted:s}=nt(n.crossword);s?.forEach(([g,h])=>o[g][h].isCorrect=!0);let p=(t.payload.direction==="Vertical"?a:r).find(g=>g.id===t.payload.id);p.isCorrect=!0,e.patchState({crossword:{crossword:o,horizontalWords:r,verticalWords:a,highlighted:[]}})})}ClearGameData(e){e.patchState({pronunciation:{},latestHeardData:null,crossword:null,dialog:null})}static pronunciation(e){return e.pronunciation}static crossword(e){return e.crossword}static dialog(e){return e.dialog}static dialogResults(e){return e.dialogResults}},Ge.\u0275fac=function(t){return new(t||Ge)(W(Ft))},Ge.\u0275prov=j({token:Ge,factory:Ge.\u0275fac}),Ge);k([ge(En)],V.prototype,"initPronunciationGameSuccess",null);k([ge(ei)],V.prototype,"initCrossword",null);k([ge(ii)],V.prototype,"initDialogGame",null);k([ge(Mt)],V.prototype,"finishPronunciationGame",null);k([ge(xt)],V.prototype,"FinishDialogGame",null);k([ge(Zn)],V.prototype,"FinishCrosswordGame",null);k([ge(ti)],V.prototype,"HighlightCells",null);k([ge(ni)],V.prototype,"SaveCorrectWord",null);k([ge(Jn)],V.prototype,"ClearGameData",null);k([Be()],V,"pronunciation",null);k([Be()],V,"crossword",null);k([Be()],V,"dialog",null);k([Be()],V,"dialogResults",null);V=k([Ct({name:"game"})],V);function wl(i,e){if(i&1&&(c(0,"div",8),f(1),d()),i&2){let t=e.$implicit;u("ngClass",t.isCorrect?"correct":"wrong"),m(),I(t.word)}}var Lt=class Lt{constructor(e){this.router=e}disableScroll(e){e.preventDefault(),e.stopPropagation()}ngOnInit(){this.results$=this.pronunciation$.pipe(oe(Boolean)).pipe(we(e=>e.results))}goToVocabularyPage(){this.router.navigate([L.Dictionary])}};Lt.\u0275fac=function(t){return new(t||Lt)(O($))},Lt.\u0275cmp=A({type:Lt,selectors:[["app-pronunciation-results"]],decls:10,vars:4,consts:[["appIosStyles","",1,"pronunciation-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"h3",2),f(3,"Results:"),d(),P(4,wl,2,2,"div",3),Ye(5,"async"),d(),c(6,"div",4),v("touchmove",function(r){return n.disableScroll(r)}),c(7,"app-footer-menu",5)(8,"div",6)(9,"img",7),v("click",function(){return n.goToVocabularyPage()}),d()()()()()),t&2&&(m(4),u("ngForOf",Xe(5,2,n.results$)),m(3),u("isButtonVisible",!0))},dependencies:[be,Y,B,q,vt],styles:[".pronunciation-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.pronunciation-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var on=Lt;k([X(V.pronunciation)],on.prototype,"pronunciation$",void 0);var We=Et("SpeechRecognition",{web:()=>import("./chunk-EXNQDFHS.js").then(i=>new i.SpeechRecognitionWeb)});var Yr=(()=>{let e=class e{constructor(){this.message="",this.hidden=!1,this.shouldClose=new un}hide(){this.hidden=!0,this.clickHideTimeout=setTimeout(()=>{this.shouldClose.next(!0)},500)}ngOnInit(){this.message=this.message||"Unknown error",this.normalHideTimeout=setTimeout(()=>{this.hide()},3e3)}ngOnDestroy(){clearTimeout(this.clickHideTimeout),clearTimeout(this.normalHideTimeout)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=A({type:e,selectors:[["app-error-modal"]],decls:3,vars:3,consts:[[1,"pop-up-container","error",3,"click"]],template:function(o,r){o&1&&(c(0,"div",0),v("click",function(){return r.hide()}),c(1,"div"),f(2),d()()),o&2&&(H("hidden",r.hidden),m(2),yt(" ",r.message," "))},styles:[".pop-up-container[_ngcontent-%COMP%]{position:absolute;top:60px;left:50%;transform:translate(-50%,-50%);width:85vw;height:50px;opacity:1;border-radius:20px;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_bounceInTop .7s linear;padding:5px}.pop-up-container.error[_ngcontent-%COMP%]{background-color:#f56666}.pop-up-container.hidden[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceOutTop .3s linear forwards}@keyframes _ngcontent-%COMP%_bounceInTop{0%{transform:translate(-50%,-350%);opacity:0}80%{opacity:0}to{transform:translate(-50%,-50%);opacity:1}}@keyframes _ngcontent-%COMP%_bounceOutTop{to{transform:translate(-50%,-350%);opacity:0}0%{transform:translate(-50%,-50%);opacity:1}}"]});let i=e;return i})();var Xr=(()=>{let e=class e{constructor(){this.message="",this.shouldClose=new un}close(n){this.shouldClose.next(n)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=A({type:e,selectors:[["app-confirmation-modal"]],decls:10,vars:1,consts:[[1,"backdrop"],[1,"confirmation-container"],[1,"message"],[1,"actions"],[3,"click"]],template:function(o,r){o&1&&(b(0,"div",0),c(1,"div",1)(2,"div",2)(3,"p"),f(4),d()(),c(5,"div",3)(6,"div",4),v("click",function(){return r.close(!1)}),f(7,"No"),d(),c(8,"div",4),v("click",function(){return r.close(!0)}),f(9,"Yes"),d()()()),o&2&&(m(4),I(r.message))},styles:[".backdrop[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;z-index:100;background-color:#1c1c234d}.confirmation-container[_ngcontent-%COMP%]{position:absolute;top:90px;left:50%;transform:translate(-50%,-50%);width:85vw;height:100px;opacity:1;border-radius:20px;animation:_ngcontent-%COMP%_bounceInTop .3s linear;padding:5px;background-color:#ff7966;z-index:150;color:#fff}.confirmation-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around;font-size:1.2em;font-weight:700}.confirmation-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.confirmation-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}@keyframes _ngcontent-%COMP%_bounceInTop{0%{transform:translate(-50%,-350%);opacity:0}80%{opacity:0}to{transform:translate(-50%,-50%);opacity:1}}"]});let i=e;return i})();var Ue=(()=>{let e=class e{registerModalContainer(n){this.modalContainer=n}showError(n){this.modalContainer.clear();let o=this.modalContainer.createComponent(Yr);o.instance.message=n,o.instance.shouldClose.subscribe(()=>this.modalContainer.clear())}showConfirmation(n){return new Promise(o=>{let r=this.modalContainer.createComponent(Xr);r.instance.message=n,r.instance.shouldClose.subscribe({next:a=>{this.modalContainer.clear(),o(a)}})})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Pl(i,e){i&1&&(c(0,"div",10),b(1,"img",11),d())}function bl(i,e){i&1&&(c(0,"p",19),f(1,"Tip: say a part of the sentence that includes the hidden word for better result"),d())}function Sl(i,e){i&1&&(c(0,"p",19),f(1,"Pronounce the word that corresponds to these translations"),d())}function Ol(i,e){i&1&&(c(0,"p",19),f(1,"Pronounce the word that corresponds to this definition"),d())}function Ml(i,e){if(i&1&&(c(0,"span",22),f(1),d()),i&2){let t=x(3);u("ngClass",t.examplesTasks[t.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),m(),I(t.examplesTasks[t.currentTaskIndex].inclusion)}}function xl(i,e){if(i&1&&(c(0,"span"),f(1),d()),i&2){let t=x(3);m(),I(t.examplesTasks[t.currentTaskIndex].substitution)}}function El(i,e){if(i&1&&(c(0,"div",20)(1,"span"),f(2),d(),P(3,Ml,2,2,"span",21)(4,xl,2,1,"span",18),c(5,"span"),f(6),d()()),i&2){let t=x(2);m(2),I(t.examplesTasks[t.currentTaskIndex].beforeInclusion),m(),u("ngIf",t.examplesTasks[t.currentTaskIndex].isRevealed),m(),u("ngIf",!t.examplesTasks[t.currentTaskIndex].isRevealed),m(2),I(t.examplesTasks[t.currentTaskIndex].afterInclusion)}}function Tl(i,e){if(i&1&&(c(0,"p"),f(1),d()),i&2){let t=e.$implicit;m(),I(t)}}function kl(i,e){if(i&1&&(c(0,"span",22),f(1),d()),i&2){let t=x(3);u("ngClass",t.translationsTasks[t.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),m(),I(t.translationsTasks[t.currentTaskIndex].word)}}function Il(i,e){if(i&1&&(c(0,"div",23)(1,"div",24),P(2,Tl,2,1,"p",25),d(),c(3,"div",26),P(4,kl,2,2,"span",21),d()()),i&2){let t=x(2);m(2),u("ngForOf",t.translationsTasks[t.currentTaskIndex].translations),m(2),u("ngIf",t.translationsTasks[t.currentTaskIndex].isRevealed)}}function Dl(i,e){if(i&1&&(c(0,"p"),f(1),d()),i&2){let t=e.$implicit;m(),I(t)}}function Al(i,e){if(i&1&&(c(0,"span",22),f(1),d()),i&2){let t=x(3);u("ngClass",t.definitionsTasks[t.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),m(),I(t.definitionsTasks[t.currentTaskIndex].word)}}function Nl(i,e){if(i&1&&(c(0,"div",27)(1,"div",24),P(2,Dl,2,1,"p",25),d(),c(3,"div",26),P(4,Al,2,2,"span",21),d()()),i&2){let t=x(2);m(2),u("ngForOf",t.definitionsTasks[t.currentTaskIndex].definitions),m(2),u("ngIf",t.definitionsTasks[t.currentTaskIndex].isRevealed)}}function Rl(i,e){if(i&1&&(c(0,"p",29),f(1),d()),i&2){let t=e.$implicit;m(),I(t)}}function Fl(i,e){if(i&1&&(c(0,"div")(1,"p"),f(2,"What we heard:"),d(),P(3,Rl,2,1,"p",28),d()),i&2){let t=x(2);m(3),u("ngForOf",t.getCurrentPlayingTasks()[t.currentTaskIndex].arrayOfHeardWords)}}function Ll(i,e){if(i&1&&(c(0,"div",12),P(1,bl,2,0,"p",13)(2,Sl,2,0,"p",13)(3,Ol,2,0,"p",13),c(4,"div",14),P(5,El,7,4,"div",15)(6,Il,5,2,"div",16)(7,Nl,5,2,"div",17),d(),P(8,Fl,4,1,"div",18),d()),i&2){let t=x();m(),u("ngIf",t.task===t.WordIncludeOptions.Example),m(),u("ngIf",t.task===t.WordIncludeOptions.Translation),m(),u("ngIf",t.task===t.WordIncludeOptions.Definition),m(2),u("ngIf",t.task===t.WordIncludeOptions.Example),m(),u("ngIf",t.task===t.WordIncludeOptions.Translation),m(),u("ngIf",t.task===t.WordIncludeOptions.Definition),m(),u("ngIf",t.getCurrentPlayingTasks()[t.currentTaskIndex].isRevealed&&!t.getCurrentPlayingTasks()[t.currentTaskIndex].isCorrect)}}function Vl(i,e){i&1&&b(0,"img",30)}function $l(i,e){i&1&&b(0,"img",31)}function jl(i,e){i&1&&b(0,"img",32)}var Vt=class Vt{constructor(e,t,n){this.store=e,this.router=t,this.modalService=n,this.isLoading=!0,this.isRecordingInitiated=!1,this.examplesTasks=[],this.translationsTasks=[],this.definitionsTasks=[],this.currentTaskIndex=0,this.recordingInProgress=!1,this.validatingResults=!1,this.WordIncludeOptions=ne,this.audio=new Audio}playAudio(e){this.audio.paused||this.audio.pause(),this.audio.src=e,this.audio.play()}canDeactivate(e){return U(this,null,function*(){return e?.url===L.PronunciationResult?!0:yield this.modalService.showConfirmation("There are several words left. Would you still like to leave?")})}ngOnInit(){this.pronunciationSubscription=this.pronunciation$.pipe(oe(Boolean)).subscribe(e=>{this.task=e.task,this.task===ne.Example&&this.prepareExamples(e.wordData),this.task===ne.Translation&&this.prepareTranslations(e.wordData),this.task===ne.Definition&&this.prepareDefinitions(e.wordData)})}prepareExamples(e){this.examplesTasks=e.filter(t=>t.Example[0]).map(t=>{let n=t.Example[0];return{word:t.word,id:t.id,beforeInclusion:n.example.substring(0,n.inclusionStart),inclusion:n.example.substring(n.inclusionStart,n.inclusionEnd+1),substitution:"".padEnd(n.inclusionEnd-n.inclusionStart+1,"-"),afterInclusion:n.example.substring(n.inclusionEnd+1),original:n.example,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[],pronunciation:n.pronunciation}}),this.currentTaskIndex=0,this.isLoading=!1}prepareTranslations(e){console.log(e),this.translationsTasks=e.filter(t=>t.Translation[0]).map(t=>{let n=t.Translation.map(o=>o.translation);return{word:t.word,id:t.id,translations:n,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[]}}),this.currentTaskIndex=0,this.isLoading=!1}prepareDefinitions(e){console.log(e),this.definitionsTasks=e.filter(t=>t.Definition[0]).map(t=>{let n=t.Definition.map(o=>o.definition);return{word:t.word,id:t.id,definitions:n,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[]}}),this.currentTaskIndex=0,this.isLoading=!1}pronounce(){let e=this.getCurrentPlayingTasks();if(!(this.isRecordingInitiated&&!this.recordingInProgress||this.validatingResults)){if(e[this.currentTaskIndex].isRevealed){if(this.currentTaskIndex+1===e.length){this.store.dispatch(new Mt(e)),this.router.navigate([L.PronunciationResult]);return}this.audio.paused||this.audio.pause(),this.currentTaskIndex++;return}this.recordingInProgress?(clearTimeout(this.speechTimeout),this.stopRecording()):(this.startRecording(),this.speechTimeout=setTimeout(()=>{this.stopRecording()},1e4))}}startRecording(){return U(this,null,function*(){this.isRecordingInitiated=!0,yield We.requestPermissions(),this.recordingInProgress=!0;try{let e=yield We.start({language:"en-US",maxResults:3});this.giveCorrectnessVerdict(e?.matches||[])}catch(e){console.log(e?.message),this.giveCorrectnessVerdict([])}})}stopRecording(){return U(this,null,function*(){clearTimeout(this.speechTimeout),this.recordingInProgress=!1,this.isRecordingInitiated=!1,this.validatingResults=!0,yield We.removeAllListeners(),yield We.stop()})}getCurrentPlayingTasks(){return this.task===ne.Example?this.examplesTasks:this.task===ne.Translation?this.translationsTasks:this.definitionsTasks}giveCorrectnessVerdict(e){let n=this.getCurrentPlayingTasks()[this.currentTaskIndex],o;this.task===ne.Example?(o=e.some(r=>r.toLowerCase().includes(n.inclusion.toLowerCase())),this.playAudio(n.pronunciation)):o=e.some(r=>r.toLowerCase().includes(n.word.toLowerCase())),o?n.isCorrect=!0:(n.isCorrect=!1,n.arrayOfHeardWords=e),n.isRevealed=!0,this.validatingResults=!1}disableScroll(e){e.preventDefault(),e.stopPropagation()}ngOnDestroy(){this.audio.pause(),this.pronunciationSubscription.unsubscribe()}};Vt.\u0275fac=function(t){return new(t||Vt)(O(z),O($),O(Ue))},Vt.\u0275cmp=A({type:Vt,selectors:[["app-pronunciation-game"]],decls:10,vars:8,consts:[["appIosStyles","",1,"pronunciation-game-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","task-container",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/mic.svg","width","35",4,"ngIf"],["src","assets/redesign/loader-circle.svg","width","25",4,"ngIf"],["src","assets/redesign/next.svg","width","18",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"task-container"],["class","hint",4,"ngIf"],[1,"task-block"],["class","task task-examples",4,"ngIf"],["class","task task-translations",4,"ngIf"],["class","task task-definitions",4,"ngIf"],[4,"ngIf"],[1,"hint"],[1,"task","task-examples"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"task","task-translations"],[1,"translations"],[4,"ngFor","ngForOf"],[1,"answer"],[1,"task","task-definitions"],["class","heard-options",4,"ngFor","ngForOf"],[1,"heard-options"],["src","assets/redesign/mic.svg","width","35"],["src","assets/redesign/loader-circle.svg","width","25"],["src","assets/redesign/next.svg","width","18"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),P(2,Pl,2,0,"div",2)(3,Ll,9,7,"div",3),d(),c(4,"div",4),v("touchmove",function(r){return n.disableScroll(r)}),c(5,"app-footer-menu",5)(6,"div",6),v("click",function(){return n.pronounce()}),P(7,Vl,1,0,"img",7)(8,$l,1,0,"img",8)(9,jl,1,0,"img",9),d()()()()),t&2&&(m(2),u("ngIf",n.isLoading),m(),u("ngIf",!n.isLoading),m(2),u("isButtonVisible",!n.isLoading),m(),H("listening",n.recordingInProgress),m(),u("ngIf",!n.validatingResults&&(!n.getCurrentPlayingTasks().length||!n.getCurrentPlayingTasks()[n.currentTaskIndex].isRevealed)),m(),u("ngIf",n.validatingResults),m(),u("ngIf",!n.validatingResults&&n.getCurrentPlayingTasks().length&&n.getCurrentPlayingTasks()[n.currentTaskIndex].isRevealed))},dependencies:[be,Y,re,B,q],styles:[".pronunciation-game-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{text-align:center;color:#83839c}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .heard-options[_ngcontent-%COMP%]{color:#fff}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   div.task-block[_ngcontent-%COMP%]{color:#fff;width:auto;height:400px;background:#4e4e6133;border-radius:20px;text-align:center;padding:10px;display:flex;align-items:center;justify-content:center}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{font-size:1.3em}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .revealing-correct[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cinematicInGreen 2s forwards}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .revealing-wrong[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cinematicInRed 2s forwards}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:5fr 1fr;width:100%;height:100%}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%]   .translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]   .translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{overflow:scroll}.pronunciation-game-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.pronunciation-game-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button.listening[_ngcontent-%COMP%]{box-shadow:none;background:red}@keyframes _ngcontent-%COMP%_cinematicInGreen{0%{color:green;text-shadow:0 0 1em green;opacity:0}to{color:green;text-shadow:0 0 0 green;opacity:1}}@keyframes _ngcontent-%COMP%_cinematicInRed{0%{color:#b1060f;text-shadow:0 0 1em #B1060F;opacity:0}to{color:#b1060f;text-shadow:0 0 0 #B1060F;opacity:1}}"]});var sn=Vt;k([X(V.pronunciation)],sn.prototype,"pronunciation$",void 0);function zl(i,e){i&1&&(c(0,"div",9),b(1,"img",10),d())}function Gl(i,e){if(i&1&&(c(0,"i"),f(1),d()),i&2){let t=x(2).$implicit;m(),I(t.questionNumber)}}function Wl(i,e){if(i&1){let t=he();c(0,"span",17),v("click",function(){me(t);let o=x().$implicit,r=x(3);return ue(r.highlightWord(o))}),P(1,Gl,2,1,"i",18),b(2,"input",19),d()}if(i&2){let t=x(),n=t.$implicit,o=t.index,r=x().index;m(),u("ngIf",n.questionNumber),m(),H("highlighted",n.highlighted),Co("id","",r,"-",o,""),u("readonly",!0)("value",n.isCorrect?n.letter:"")}}function Ul(i,e){i&1&&b(0,"span",20)}function Bl(i,e){if(i&1&&(c(0,"span"),P(1,Wl,3,8,"span",15)(2,Ul,1,0,"span",16),d()),i&2){let t=e.$implicit;m(),u("ngIf",t.letter),m(),u("ngIf",!t.letter)}}function ql(i,e){if(i&1&&(c(0,"div",13),P(1,Bl,3,2,"span",14),d()),i&2){let t=e.$implicit;m(),u("ngForOf",t)}}function Kl(i,e){if(i&1&&(c(0,"div",11),P(1,ql,2,1,"div",12),d()),i&2){let t=x();m(),u("ngForOf",t.crosswordData.crossword)}}function Hl(i,e){i&1&&b(0,"img",21)}function Ql(i,e){i&1&&b(0,"img",22)}var oi=function(i){return i.Vertical="Vertical",i.Horizontal="Horizontal",i}(oi||{}),$t=class $t{disableScroll(e){e.preventDefault(),e.stopPropagation()}constructor(e,t,n){this.store=e,this.router=t,this.modalService=n,this.highlightedCells=[]}canDeactivate(e){return U(this,null,function*(){return e?.url.startsWith(L.CrosswordWordEditor)?!0:yield this.modalService.showConfirmation("There are unresolved words. Would you still like to leave?")})}ngOnInit(){this.crosswordSubscription=this.crossword$.subscribe(e=>{e?this.crosswordData=nt(e):this.store.dispatch(new ei)})}processBtnClick(){this.highlightedWordData?(this.store.dispatch(new ti(this.highlightedCells)),this.router.navigate([L.CrosswordWordEditor,{wordId:this.highlightedWordData.id}])):(this.store.dispatch(new Zn(this.crosswordData)),this.router.navigate([L.CrosswordResults]))}highlightWord(e){if(!e.questionNumber||e.isCorrect)return;let{horizontalWords:t,verticalWords:n}=this.crosswordData,o=t.find(a=>a.questionNumber===e.questionNumber),r=n.find(a=>a.questionNumber===e.questionNumber);if(this.highlightedCells.length&&(this.highlightedCells.forEach(([a,s])=>{this.crosswordData.crossword[a][s].highlighted=!1}),this.highlightedCells=[]),o&&r&&this.highlightedDirection){this.highlightedDirection===oi.Vertical?this.highlightHorizontalWord(o):this.highlightVerticalWord(r);return}if(o){this.highlightHorizontalWord(o);return}if(r){this.highlightVerticalWord(r);return}}highlightHorizontalWord(e){if(e===this.highlightedWordData){this.highlightedWordData=null;return}this.highlightedDirection=oi.Horizontal;let[t,n]=e.startCoordinates,o=e.word.length;for(let r=0;r<o;r++){let a=n+r;this.crosswordData.crossword[t][a].highlighted=!0,this.highlightedCells.push([t,a])}this.highlightedWordData=e}highlightVerticalWord(e){if(e===this.highlightedWordData){this.highlightedWordData=null;return}this.highlightedDirection=oi.Vertical;let[t,n]=e.startCoordinates,o=e.word.length;for(let r=0;r<o;r++){let a=t+r;this.crosswordData.crossword[a][n].highlighted=!0,this.highlightedCells.push([a,n])}this.highlightedWordData=e}ngOnDestroy(){this.crosswordSubscription.unsubscribe()}};$t.\u0275fac=function(t){return new(t||$t)(O(z),O($),O(Ue))},$t.\u0275cmp=A({type:$t,selectors:[["app-crossword-main"]],decls:9,vars:5,consts:[["appIosStyles","",1,"crossword-preparation-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","crossword",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["class","edit","src","assets/redesign/edit-.svg","width","35","height","35",4,"ngIf"],["src","assets/redesign/tick.svg","width","30","height","30",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"crossword"],["class","do-not-wrap-cells",4,"ngFor","ngForOf"],[1,"do-not-wrap-cells"],[4,"ngFor","ngForOf"],["class","letter-input",3,"click",4,"ngIf"],["class","letter-placeholder",4,"ngIf"],[1,"letter-input",3,"click"],[4,"ngIf"],["maxlength","1",3,"id","readonly","value"],[1,"letter-placeholder"],["src","assets/redesign/edit-.svg","width","35","height","35",1,"edit"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),P(2,zl,2,0,"div",2)(3,Kl,2,1,"div",3),d(),c(4,"div",4),v("touchmove",function(r){return n.disableScroll(r)}),c(5,"app-footer-menu",5)(6,"div",6),v("click",function(){return n.processBtnClick()}),P(7,Hl,1,0,"img",7)(8,Ql,1,0,"img",8),d()()()()),t&2&&(m(2),u("ngIf",!n.crosswordData),m(),u("ngIf",n.crosswordData),m(2),u("isButtonVisible",!0),m(2),u("ngIf",n.highlightedWordData),m(),u("ngIf",!n.highlightedWordData))},dependencies:[Y,re,B,q],styles:[".crossword-preparation-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:10px}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .do-not-wrap-cells[_ngcontent-%COMP%]{white-space:nowrap}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   span.letter-input[_ngcontent-%COMP%]{position:relative}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   span.letter-input[_ngcontent-%COMP%]   input.highlighted[_ngcontent-%COMP%]{background-color:#fea004}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0;width:35px;height:35px;border:none;margin:1px;border-radius:2px;outline:none;font-size:30px;font-weight:700;background:#4e4e61;color:#fff;caret-color:#fff;text-align:center}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;font-size:1em;color:#a2a2b5;font-weight:700}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .letter-placeholder[_ngcontent-%COMP%]{display:inline-block;width:35px;margin:1px}.crossword-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.crossword-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]   img.edit[_ngcontent-%COMP%]{filter:invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg) brightness(102%) contrast(102%)}"]});var an=$t;k([X(V.crossword)],an.prototype,"crossword$",void 0);var Yl=(i,e)=>({correct:i,wrong:e});function Xl(i,e){i&1&&b(0,"img",20)}function Zl(i,e){i&1&&b(0,"img",20)}function Jl(i,e){if(i&1&&(c(0,"span"),f(1),d()),i&2){let t=x().$implicit;m(),I(t.answered)}}function ec(i,e){if(i&1){let t=he();c(0,"div",21),v("click",function(){let o=me(t).$implicit,r=x();return ue(r.removeLetter(o))}),P(1,Jl,2,1,"span",22),d()}if(i&2){let t=e.$implicit,n=x();H("pending",t.index===n.currentIndex),u("ngClass",xo(4,Yl,t.answered&&t.answered===t.letter,t.answered&&t.answered!==t.letter)),m(),u("ngIf",t.answered)}}function tc(i,e){if(i&1){let t=he();c(0,"div",23),v("click",function(){let o=me(t),r=o.$implicit,a=o.index,s=x();return ue(s.addLetter(r,a))}),f(1),d()}if(i&2){let t=e.$implicit;H("hidden",!t.letter),m(),I(t.letter)}}function nc(i,e){i&1&&b(0,"img",24)}function ic(i,e){i&1&&b(0,"img",25)}var jt=class jt{constructor(e,t,n){this.activatedRoute=e,this.router=t,this.store=n,this.letters=[],this.lettersShuffled=[],this.currentIndex=0,this.isCorrect=!1,this.isDefinitionsAsTask=!1,this.translationIndex=0,this.definitionIndex=0}canDeactivate(e){return e?.url.startsWith(L.Crossword)?!0:confirm("There are still words to solve, do you want to leave?")}ngOnInit(){let e=Number(this.activatedRoute.snapshot.paramMap.get("wordId"));this.crossword$.pipe(we(t=>[...t.horizontalWords,...t.verticalWords])).pipe(ao()).pipe(oe(t=>t.id===e)).pipe(po(1)).subscribe(t=>this.prepareTheWord(t))}disableScroll(e){e.preventDefault(),e.stopPropagation()}prepareTheWord(e){this.wordData=e,this.letters=e.word.toUpperCase().split("").map((t,n)=>({letter:t,answered:"",index:n})),this.lettersShuffled=tr(nt(this.letters))}removeLetter(e){if(this.isCorrect||!e.answered||e.answered===e.letter)return;let t=this.lettersShuffled[e.originalIndex];t.letter=e.answered,e.answered="",this.currentIndex=this.letters.findIndex(n=>!n.answered)}addLetter(e,t){if(this.isCorrect||!e.letter)return;let n=this.letters[this.currentIndex];n.answered=e.letter,n.originalIndex=t,e.letter="",this.currentIndex=this.letters.findIndex(o=>!o.answered),this.currentIndex===-1&&(this.isCorrect=!0,this.store.dispatch(new ni(this.wordData)))}handleButtonClick(){this.router.navigate([L.Crossword])}goBack(){if(this.isDefinitionsAsTask){let e=this.definitionIndex-1;this.definitionIndex=e<0?this.wordData.Definition.length-1:e}if(!this.isDefinitionsAsTask){let e=this.translationIndex-1;this.translationIndex=e<0?this.wordData.Translation.length-1:e}}goForward(){if(this.isDefinitionsAsTask){let e=this.definitionIndex+1;this.definitionIndex=e>this.wordData.Definition.length-1?0:e}if(!this.isDefinitionsAsTask){let e=this.translationIndex+1;this.translationIndex=e>this.wordData.Translation.length-1?0:e}}areArrowsVisible(){return this.isDefinitionsAsTask&&this.wordData.Definition.length>1||!this.isDefinitionsAsTask&&this.wordData.Translation.length>1}getProperHint(){return this.isDefinitionsAsTask?this.wordData.Definition[this.definitionIndex].definition:this.wordData.Translation[this.translationIndex].translation}};jt.\u0275fac=function(t){return new(t||jt)(O(Ho),O($),O(z))},jt.\u0275cmp=A({type:jt,selectors:[["app-crossword-word-editor"]],decls:27,vars:13,consts:[["appIosStyles","",1,"crossword-word-editor"],[1,"task-block"],[1,"selector"],[1,"checkbox"],["type","checkbox","id","task-type-selector",3,"ngModelChange","ngModel"],["for","task-type-selector"],[1,"task-text"],[1,"navigation-button",3,"click"],["src","assets/redesign/back-icon.svg","height","30px","width","30px",4,"ngIf"],[1,"hint-area"],[1,"forward-arrow","navigation-button",3,"click"],[1,"letter-placeholders"],[3,"pending","ngClass","click",4,"ngFor","ngForOf"],[1,"letters-to-insert"],[3,"hidden","click",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/arrow-back.svg","width","35","height","35",4,"ngIf"],["src","assets/redesign/tick.svg","width","30","height","30",4,"ngIf"],["src","assets/redesign/back-icon.svg","height","30px","width","30px"],[3,"click","ngClass"],[4,"ngIf"],[3,"click"],["src","assets/redesign/arrow-back.svg","width","35","height","35"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),f(4,"Translations"),d(),c(5,"div",3)(6,"input",4),Mo("ngModelChange",function(r){return Oo(n.isDefinitionsAsTask,r)||(n.isDefinitionsAsTask=r),r}),d(),c(7,"label",5),f(8,"Toggle"),d()(),c(9,"p"),f(10,"Definitions"),d()(),c(11,"div",6)(12,"div",7),v("click",function(){return n.goBack()}),P(13,Xl,1,0,"img",8),d(),c(14,"div",9),f(15),d(),c(16,"div",10),v("click",function(){return n.goForward()}),P(17,Zl,1,0,"img",8),d()()(),c(18,"div",11),P(19,ec,2,7,"div",12),d(),c(20,"div",13),P(21,tc,2,3,"div",14),d(),c(22,"div",15),v("touchmove",function(r){return n.disableScroll(r)}),c(23,"app-footer-menu",16)(24,"div",17),v("click",function(){return n.handleButtonClick()}),P(25,nc,1,0,"img",18)(26,ic,1,0,"img",19),d()()()()),t&2&&(m(3),H("highlighted",!n.isDefinitionsAsTask),m(3),So("ngModel",n.isDefinitionsAsTask),m(3),H("highlighted",n.isDefinitionsAsTask),m(4),u("ngIf",n.areArrowsVisible()),m(2),I(n.getProperHint()),m(2),u("ngIf",n.areArrowsVisible()),m(2),u("ngForOf",n.letters),m(2),u("ngForOf",n.lettersShuffled),m(2),u("isButtonVisible",!0),m(2),u("ngIf",!n.isCorrect),m(),u("ngIf",n.isCorrect))},dependencies:[be,Y,re,Uo,et,Bo,B,q],styles:['.crossword-word-editor[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,2.1fr) minmax(0,3.5fr) minmax(0,3.5fr) minmax(0,1.2fr)}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;display:flex;justify-content:center;justify-items:center}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .highlighted[_ngcontent-%COMP%]{color:#00fad9}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin:-6px 10px 0}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:0;width:0;visibility:hidden}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;text-indent:-9999px;width:50px;height:26px;background:gray;display:block;border-radius:26px;position:relative}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";position:absolute;top:3px;left:3px;width:20px;height:20px;background:#00fad9;border-radius:90px;transition:.3s}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{left:calc(100% - 3px);transform:translate(-100%)}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:active:after{width:25px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;justify-items:center;align-items:center;height:60%;margin:0 10px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .navigation-button[_ngcontent-%COMP%]{min-width:30px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .hint-area[_ngcontent-%COMP%]{text-align:center}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .forward-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]{margin:10px;text-align:center;overflow:scroll}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:4px;border:2px solid #353542;border-radius:5px;height:40px;font-size:25px;width:40px;display:inline-block;background-color:#26262f;vertical-align:top;text-align:center;line-height:40px}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.pending[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.pending[_ngcontent-%COMP%]{border:none;background-color:#ffffe0}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.correct[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.correct[_ngcontent-%COMP%]{border:2px solid green}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.wrong[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.wrong[_ngcontent-%COMP%]{border:2px solid #B1060F}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{opacity:0}.crossword-word-editor[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}']});var ln=jt;k([X(V.crossword)],ln.prototype,"crossword$",void 0);function oc(i,e){if(i&1&&(c(0,"div",8),f(1),d()),i&2){let t=e.$implicit;u("ngClass",t.isCorrect?"correct":"wrong"),m(),I(t.word)}}var zt=class zt{constructor(e){this.router=e}disableScroll(e){e.preventDefault(),e.stopPropagation()}ngOnInit(){this.results$=this.crossword$.pipe(oe(Boolean)).pipe(we(e=>[...e.horizontalWords,...e.verticalWords]))}goToVocabularyPage(){this.router.navigate([L.Dictionary])}};zt.\u0275fac=function(t){return new(t||zt)(O($))},zt.\u0275cmp=A({type:zt,selectors:[["app-crossword-results"]],decls:10,vars:4,consts:[["appIosStyles","",1,"crossword-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"h3",2),f(3,"Results:"),d(),P(4,oc,2,2,"div",3),Ye(5,"async"),d(),c(6,"div",4),v("touchmove",function(r){return n.disableScroll(r)}),c(7,"app-footer-menu",5)(8,"div",6)(9,"img",7),v("click",function(){return n.goToVocabularyPage()}),d()()()()()),t&2&&(m(4),u("ngForOf",Xe(5,2,n.results$)),m(3),u("isButtonVisible",!0))},dependencies:[be,Y,B,q,vt],styles:[".crossword-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.crossword-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var cn=zt;k([X(V.crossword)],cn.prototype,"crossword$",void 0);var dn=(()=>{let e=class e{canDeactivate(n,o,r,a){return n.canDeactivate(a)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var rc=i=>({inactive:i});function sc(i,e){i&1&&(c(0,"div",10),b(1,"img",11),d())}function ac(i,e){if(i&1){let t=he();c(0,"img",27),v("click",function(){me(t);let o=x(5).$implicit,r=x(2);return ue(r.addWordToUserDictionary(o))}),d()}}function lc(i,e){i&1&&(fn(),c(0,"svg",28),b(1,"polyline",29),d())}function cc(i,e){if(i&1&&(c(0,"div",22)(1,"div",23)(2,"div",24),P(3,ac,1,0,"img",25)(4,lc,2,0,"svg",26),d()()()),i&2){let t=x(4).$implicit;m(2),H("actionable",!t.isInVocabulary),m(),u("ngIf",!t.addedToVocabulary),m(),u("ngIf",t.addedToVocabulary)}}function dc(i,e){if(i&1){let t=he();c(0,"span",19)(1,"span",20),v("click",function(){me(t);let o=x(3).$implicit,r=x(2);return ue(r.togglePopUp(o))}),f(2),d(),P(3,cc,5,4,"div",21),d()}if(i&2){let t=x(3).$implicit;m(2),I(t.inclusion),m(),u("ngIf",t.isPopUpVisible)}}function pc(i,e){if(i&1){let t=he();c(0,"span",20),v("click",function(){me(t);let o=x(4).$implicit,r=x(2);return ue(r.rotateTranslations(o))}),c(1,"span"),f(2),d()()}if(i&2){let t=x(4).$implicit;m(2),yt("[",t.translations[t.activeTranslationIndex],"]")}}function mc(i,e){if(i&1&&(c(0,"span",32),f(1),d()),i&2){let t=x(4).$implicit;u("ngClass",t.isCorrect?"correct":"wrong"),m(),I(t.inclusion)}}function uc(i,e){if(i&1&&(c(0,"span"),P(1,pc,3,1,"span",30)(2,mc,2,2,"span",31),d()),i&2){let t=x(3).$implicit;m(),u("ngIf",t.isCorrect===void 0),m(),u("ngIf",t.isCorrect!==void 0)}}function hc(i,e){if(i&1&&(c(0,"span")(1,"span"),f(2),d(),P(3,dc,4,2,"span",18)(4,uc,3,2,"span",17),c(5,"span"),f(6),d()()),i&2){let t=x(2).$implicit;m(2),I(t.beforeInclusion),m(),u("ngIf",!t.isInVocabulary),m(),u("ngIf",t.isInVocabulary),m(2),I(t.afterInclusion)}}function gc(i,e){if(i&1&&(c(0,"span"),f(1),d()),i&2){let t=x(2).$implicit;m(),I(t.phrase)}}function fc(i,e){if(i&1&&(c(0,"div",16),P(1,hc,7,4,"span",17)(2,gc,2,1,"span",17),d()),i&2){let t=x(),n=t.$implicit,o=t.index,r=x(2);u("ngClass",Cn(3,rc,o===r.pendingIndex)),m(),u("ngIf",n.wordId),m(),u("ngIf",!n.wordId)}}function _c(i,e){if(i&1&&(c(0,"div",14),P(1,fc,3,5,"div",15),d()),i&2){let t=e.index,n=x(2);u("ngClass",t%2===0?"from-right":"from-left"),m(),u("ngIf",t<=n.pendingIndex)}}function yc(i,e){if(i&1&&(c(0,"div",12),P(1,_c,2,2,"div",13),d()),i&2){let t=x();m(),u("ngForOf",t.dialogData)}}function vc(i,e){i&1&&b(0,"img",33)}function Cc(i,e){i&1&&b(0,"img",34)}function wc(i,e){i&1&&b(0,"img",35)}var Gt=class Gt{constructor(e,t,n){this.store=e,this.router=t,this.modalService=n,this.validatingResults=!1,this.initialized=!1,this.readyToListen=!1,this.isRecordingInitiated=!1,this.isLastOnePlayed=!1,this.recordingInProgress=!1,this.audio=new Audio}disableScroll(e){e.preventDefault(),e.stopPropagation()}playAudio(e){return U(this,null,function*(){return new Promise(t=>{this.audio.src=e,this.audio.play(),this.audio.addEventListener("ended",()=>t())})})}canDeactivate(e){return U(this,null,function*(){return e?.url===L.DialogResults?!0:yield this.modalService.showConfirmation("There are several words left. Would you still like to leave?")})}ngOnInit(){this.store.dispatch(new ii),this.dialogAndVocabularySubscription=hn([this.dialog$.pipe(oe(Boolean)),this.userVocabulary$.pipe(oe(Boolean))]).subscribe(n=>U(this,[n],function*([e,t]){let o=t.map(a=>a.wordId);this.dialogData=e.map(a=>{let s=Z({},a);if(a.wordId&&o.includes(a.wordId)&&(s.isInVocabulary=!0),a.wordId){let l=s.word.Translation.map(p=>p.translation);s.translations=l,s.activeTranslationIndex=0,s.beforeInclusion=s.phrase.substring(0,s.inclusionStart),s.inclusion=s.phrase.substring(s.inclusionStart,s.inclusionEnd+1),s.afterInclusion=s.phrase.substring(s.inclusionEnd+1)}return s});let r=this.dialogData.findIndex(a=>a.wordId&&a.isInVocabulary);for(this.pendingIndex=0;this.pendingIndex<r;){let a=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(a),this.pendingIndex++}this.readyToListen=!0,this.initialized=!0}))}ngOnDestroy(){this.dialogAndVocabularySubscription.unsubscribe()}togglePopUp(e){e.isPopUpVisible=!e.isPopUpVisible}rotateTranslations(e){e.activeTranslationIndex=(e.activeTranslationIndex+1)%e.translations.length}addWordToUserDictionary(e){return U(this,null,function*(){e.addedToVocabulary=!0,yield new Promise(t=>setTimeout(t,1e3)),e.isCorrect=!0,e.isPopUpVisible=!1,e.isInVocabulary=!0,this.store.dispatch(new Ot(e.wordId))})}processRecognizedText(e){return U(this,null,function*(){let t=this.dialogData[this.pendingIndex],n=t.phrase.substring(t.inclusionStart,t.inclusionEnd+1);for(t.isCorrect=e.some(r=>r.toLowerCase().includes(n.toLowerCase()));this.pendingIndex<this.dialogData.length-1;){let r=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(r),this.pendingIndex++;let a=this.dialogData[this.pendingIndex];if(a.wordId&&a.isInVocabulary)break}let o=this.dialogData[this.pendingIndex];if(this.isLastOnePlayed=this.pendingIndex===this.dialogData.length-1&&(!o.wordId||Jo(o.isCorrect)),this.isLastOnePlayed){let r=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(r),this.pendingIndex++;return}this.readyToListen=!0,this.validatingResults=!1})}processBtnClick(){if(this.isLastOnePlayed){this.store.dispatch(new xt(this.dialogData)),this.router.navigate([L.DialogResults]);return}this.isRecordingInitiated&&!this.recordingInProgress||this.validatingResults||!this.readyToListen||(this.recordingInProgress?(clearTimeout(this.speechTimeout),this.stopRecording()):(this.startRecording(),this.speechTimeout=setTimeout(()=>{this.stopRecording()},1e4)))}startRecording(){return U(this,null,function*(){this.isRecordingInitiated=!0,yield We.requestPermissions(),this.recordingInProgress=!0;try{let e=yield We.start({language:"en-US",maxResults:3});this.processRecognizedText(e?.matches||[])}catch(e){console.log(e?.message),this.processRecognizedText([])}})}stopRecording(){return U(this,null,function*(){clearTimeout(this.speechTimeout),this.recordingInProgress=!1,this.validatingResults=!0,this.readyToListen=!1,this.isRecordingInitiated=!1,yield We.removeAllListeners(),yield We.stop()})}};Gt.\u0275fac=function(t){return new(t||Gt)(O(z),O($),O(Ue))},Gt.\u0275cmp=A({type:Gt,selectors:[["app-dialog"]],decls:10,vars:8,consts:[["appIosStyles","",1,"dialog-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","chat",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/mic.svg","width","35",4,"ngIf"],["src","assets/redesign/loader-circle.svg","width","25",4,"ngIf"],["src","assets/redesign/next.svg","width","18",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"chat"],["class","messages",3,"ngClass",4,"ngFor","ngForOf"],[1,"messages",3,"ngClass"],["class","message",3,"ngClass",4,"ngIf"],[1,"message",3,"ngClass"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"container"],[1,"highlighted",3,"click"],["class","overlay",4,"ngIf"],[1,"overlay"],[1,"content"],[1,"add-btn"],["src","assets/redesign/plus-sign.svg",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2",4,"ngIf"],["src","assets/redesign/plus-sign.svg",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2"],["fill","none","stroke","#FF8A70","stroke-width","10","stroke-linecap","round","stroke-miterlimit","10","points","100.2,40.2 51.5,88.8 29.8,67.5 ",1,"check","path"],["class","highlighted",3,"click",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["src","assets/redesign/mic.svg","width","35"],["src","assets/redesign/loader-circle.svg","width","25"],["src","assets/redesign/next.svg","width","18"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),P(2,sc,2,0,"div",2)(3,yc,2,1,"div",3),d(),c(4,"div",4),v("touchmove",function(r){return n.disableScroll(r)}),c(5,"app-footer-menu",5)(6,"div",6),v("click",function(){return n.processBtnClick()}),P(7,vc,1,0,"img",7)(8,Cc,1,0,"img",8)(9,wc,1,0,"img",9),d()()()()),t&2&&(m(2),u("ngIf",!n.dialogData),m(),u("ngIf",n.dialogData),m(2),u("isButtonVisible",n.initialized),m(),H("listening",n.recordingInProgress),m(),u("ngIf",n.readyToListen&&!n.validatingResults),m(),u("ngIf",n.validatingResults&&!n.isLastOnePlayed),m(),u("ngIf",n.isLastOnePlayed))},dependencies:[be,Y,re,B,q],styles:['.dialog-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{margin:5px;overflow:scroll}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{width:calc(100% - 20px);display:flex;overflow:hidden;flex-direction:column;padding:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{border-radius:20px;padding:8px 15px;margin-top:5px;margin-bottom:5px;display:inline-block;line-height:1.3}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .highlighted[_ngcontent-%COMP%]{text-decoration:underline dashed;text-decoration-thickness:2px;text-decoration-color:#ffff9f;text-underline-offset:4px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{color:#0f0}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .wrong[_ngcontent-%COMP%]{color:#ff7178}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]{align-items:flex-start}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]{align-items:flex-end}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]{margin-right:25%;background-color:gray;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;left:-7px;height:20px;width:20px;background-color:gray;border-bottom-right-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]{margin-left:25%;background:gray;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;right:-8px;height:20px;width:20px;background:gray;border-bottom-left-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-right:25%;background-color:#5e00f5;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;left:-7px;height:20px;width:20px;background-color:#5e00f5;border-bottom-right-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:1;bottom:0;left:-10px;width:10px;height:20px;background-color:#1c1c23;border-bottom-right-radius:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#fff;margin-left:25%;background:#924eff;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;right:-8px;height:20px;width:20px;background:#924eff;border-bottom-left-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:1;bottom:0;right:-10px;width:10px;height:20px;background:#1c1c23;border-bottom-left-radius:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.dialog-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.dialog-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button.listening[_ngcontent-%COMP%]{box-shadow:none;background:red}.dialog-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}.dialog-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:-50px;display:flex;justify-content:center}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;background-color:#2f2f39;border-radius:16px;height:40px;width:40px}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:0;right:0;margin:0 auto;width:0;height:0;border-top:solid 8px #2f2f39;border-left:solid 5px transparent;border-right:solid 5px transparent}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{width:40px;height:40px;text-align:center;line-height:40px;border-radius:16px;margin-right:20px}.dialog-container[_ngcontent-%COMP%]   .add-btn.actionable[_ngcontent-%COMP%]{background:#4e4e6133;box-shadow:-1px -1px #585858}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:25px}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:25px}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path.check[_ngcontent-%COMP%]{stroke-dashoffset:-100;animation:_ngcontent-%COMP%_dash-check .9s .35s ease-in-out forwards}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1000;stroke-dashoffset:0}@keyframes _ngcontent-%COMP%_dash-check{0%{stroke-dashoffset:-100;opacity:1}99%{opacity:1}to{stroke-dashoffset:900;opacity:0}}']});var Wt=Gt;k([X(V.dialog)],Wt.prototype,"dialog$",void 0);k([X(ve.userVocabulary)],Wt.prototype,"userVocabulary$",void 0);function Pc(i,e){if(i&1&&(c(0,"div",10),f(1),d()),i&2){let t=e.$implicit;u("ngClass",t.isCorrect?"correct":"wrong"),m(),I(t.word.word)}}function bc(i,e){i&1&&(c(0,"h3",2),f(1,"Added to vocabulary:"),d())}function Sc(i,e){if(i&1&&(c(0,"div",11),f(1),d()),i&2){let t=e.$implicit;m(),I(t.word.word)}}var Ut=class Ut{constructor(e){this.router=e,this.played=[],this.added=[]}ngOnInit(){this.subscription=this.dialogResults$.pipe(oe(Boolean)).subscribe({next:e=>{e.forEach(t=>{t.addedToVocabulary?this.added.push(t):t.wordId&&t.isInVocabulary&&this.played.push(t)})}})}disableScroll(e){e.preventDefault(),e.stopPropagation()}goToVocabularyPage(){this.router.navigate([L.Dictionary])}ngOnDestroy(){this.subscription.unsubscribe()}};Ut.\u0275fac=function(t){return new(t||Ut)(O($))},Ut.\u0275cmp=A({type:Ut,selectors:[["app-dialog-results"]],decls:11,vars:4,consts:[["appIosStyles","",1,"dialog-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],["class","result-title",4,"ngIf"],["class","result-word correct",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"],[1,"result-word","correct"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"h3",2),f(3,"Results:"),d(),P(4,Pc,2,2,"div",3)(5,bc,2,0,"h3",4)(6,Sc,2,1,"div",5),d(),c(7,"div",6),v("touchmove",function(r){return n.disableScroll(r)}),c(8,"app-footer-menu",7)(9,"div",8)(10,"img",9),v("click",function(){return n.goToVocabularyPage()}),d()()()()()),t&2&&(m(4),u("ngForOf",n.played),m(),u("ngIf",n.added.length),m(),u("ngForOf",n.added),m(2),u("isButtonVisible",!0))},dependencies:[be,Y,re,B,q],styles:[".dialog-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.dialog-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var pn=Ut;k([X(V.dialogResults)],pn.prototype,"dialogResults$",void 0);var Oc=[{path:te.Login,component:Nt},{path:te.Admin,loadChildren:()=>import("./chunk-7C7BNGFY.js").then(i=>i.AdminModule)},{path:te.HomePage,component:Wr,canActivate:[Kt],children:[{path:te.Dictionary,canActivate:[Kt],children:[{path:te.AddNewWord,component:Kr},{path:"",component:nn}]},{path:te.Exercises,canActivate:[Kt],children:[{path:te.Pronunciation,canDeactivate:[dn],component:sn},{path:te.PronunciationPreparation,component:Hr},{path:te.PronunciationResult,component:on},{path:te.Crossword,canDeactivate:[dn],component:an},{path:te.CrosswordWordEditor,canDeactivate:[dn],component:ln},{path:te.CrosswordResults,component:cn},{path:te.Dialog,canDeactivate:[dn],component:Wt},{path:te.DialogResults,component:pn},{path:"",component:qr}]},{path:te.UserProfile,canActivate:[Kt],component:Br}]},{path:"",pathMatch:"full",redirectTo:te.Login}],Zr=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Le({type:e}),e.\u0275inj=Re({imports:[gi.forRoot(Oc,{useHash:!0}),gi]});let i=e;return i})();var Jr=Et("StatusBar");var Mc=["modalContainer"],es=(()=>{let e=class e{constructor(n){this.modalService=n,Jr.setBackgroundColor({color:"#1C1C23"})}ngOnInit(){this.modalService.registerModalContainer(this.modalContainer)}};e.\u0275fac=function(o){return new(o||e)(O(Ue))},e.\u0275cmp=A({type:e,selectors:[["app-root"]],viewQuery:function(o,r){if(o&1&&wo(Mc,7,_o),o&2){let a;Po(a=bo())&&(r.modalContainer=a.first)}},decls:3,vars:0,consts:[["modalContainer",""]],template:function(o,r){o&1&&b(0,"router-outlet")(1,"div",null,0)},dependencies:[On]});let i=e;return i})();var ts=(()=>{let e=class e{constructor(n){this.http=n,this.loginUrl=`${Te.apiUrl}/auth/login`,this.registerUrl=`${Te.apiUrl}/auth/register`}registerUser(n){return this.http.post(this.registerUrl,n)}loginUser(n){return this.http.post(this.loginUrl,n)}};e.\u0275fac=function(o){return new(o||e)(W(wn))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ns=(()=>{let e=class e{constructor(n,o,r,a){this.actions$=n,this.wordService=o,this.authService=r,this.store=a,this.addWordToUserVocabulary$=this.actions$.pipe(Je(Ot),Qe(s=>this.wordService.addWordToUserVocabulary(s.wordId).pipe(Pe(l=>He())))).subscribe(),this.getUserVocabulary$=this.actions$.pipe(Je(Mn),Qe(()=>this.wordService.getUserVocabulary([ne.Translation]).pipe(Pe(s=>He()))),pe(s=>{s&&this.store.dispatch(new xn(s))})).subscribe(),this.initPronunciationGame$=this.actions$.pipe(Je(Xn),Qe(({payload:s})=>this.wordService.getSeveralRandomWords(s.numberOfWords,[s.task],3).pipe(we(l=>({payload:s,wordData:l}))).pipe(Pe(l=>He()))),pe(({payload:s,wordData:l})=>{s&&l&&this.store.dispatch(new En(Ne(Z({},s),{wordData:l})))})).subscribe(),this.finishPronunciationGame$=this.actions$.pipe(Je(Mt),we(({payload:s})=>s.filter(l=>l.isCorrect).map(l=>l.id)),oe(s=>!!s.length),Qe(s=>this.wordService.updateWordsProgress(s).pipe(Pe(l=>He())))).subscribe(),this.finishDialogGame$=this.actions$.pipe(Je(xt),we(({payload:s})=>s.filter(l=>l.isCorrect&&!l.addedToVocabulary).map(l=>l.wordId)),oe(s=>!!s.length),Qe(s=>this.wordService.updateWordsProgress(s).pipe(Pe(l=>He())))).subscribe(),this.login$=this.actions$.pipe(Je(Tn),Qe(({payload:s})=>this.authService.loginUser(s).pipe(Pe(l=>(this.store.dispatch(new qt(l.error)),He())))),pe(s=>{s&&this.store.dispatch(new fi(s))})).subscribe(),this.register$=this.actions$.pipe(Je(kn),Qe(({payload:s})=>this.authService.registerUser(s).pipe(Pe(l=>(this.store.dispatch(new qt(l.error)),He())))),pe(s=>{s&&this.store.dispatch(new fi(s))})).subscribe()}};e.\u0275fac=function(o){return new(o||e)(W(Go),W(Ft),W(ts),W(z))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var is=(()=>{let e=class e{constructor(n){this.modalService=n}intercept(n,o){return o.handle(n).pipe(Pe(r=>(this.modalService.showError(r.error.message),so(()=>r))))}};e.\u0275fac=function(o){return new(o||e)(W(Ue))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let i=e;return i})();var os=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Le({type:e,bootstrap:[es]}),e.\u0275inj=Re({providers:[{provide:li,multi:!0,useValue:()=>Fe(ns)},{provide:Do,useClass:is,multi:!0},Ao(No())],imports:[Pn,Zr,Dr,Ko,Wo.forRoot([dt,ve,V,rt],{developmentMode:Eo()}),Lr.forRoot({keys:[dt,ve]}),zr.forRoot(),qo]});let i=e;return i})();Fo().bootstrapModule(os).catch(i=>console.error(i));
