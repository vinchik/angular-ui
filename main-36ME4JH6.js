import{a as Tn,b as Dt}from"./chunk-HI76MGRF.js";import{$ as v,$a as $,A as W,Aa as Pt,Ab as ke,B as et,Ba as Be,Bb as Ke,C as Ae,Ca as xe,Cb as te,D as P,Da as bn,Db as Bn,E as ue,Ea as Sn,Eb as $t,F as fe,Fa as kn,G as Y,Ga as In,Gb as K,H as J,Hb as bt,I as he,Ia as En,Ib as Hn,J as _e,Ja as Pe,Jb as Xe,K as ve,Ka as k,L as Zt,Lb as qn,Ma as Dn,Mb as Ie,N as ln,Na as Rn,O as c,Oa as He,P as _,Pa as Fn,Pb as Kn,Q as dn,Qa as Oe,Qb as Te,R as pn,Ra as Vn,Rb as ee,S as mn,Sa as Gn,Sb as st,T as f,Ta as Nn,U as l,Ua as Wn,V as N,Va as qe,W as a,Wa as jn,X as s,Xa as Ot,Y as h,Ya as T,Z as Q,Za as Z,_ as u,_a as Rt,a as me,aa as gn,ab as ht,ba as un,bb as Ln,c as C,ca as fn,cb as we,da as hn,db as $n,ea as _n,eb as Ft,f as _t,fa as vn,fb as wt,g as en,ga as m,gb as yt,h as nt,ha as x,hb as An,i as ge,ia as Tt,ib as Vt,ja as Cn,k as nn,ka as xn,l as on,la as Pn,ma as O,mb as Gt,n as B,na as Ce,nb as Nt,o as it,oa as On,ob as Un,p as vt,pa as Ct,pb as Mt,q as rn,qa as xt,qb as A,r as an,ra as wn,rb as w,s as sn,sa as ot,sb as zn,t as cn,ta as L,tb as Wt,ua as H,ub as ye,va as yn,vb as Me,w as X,wa as Et,wb as be,x as $e,xa as Mn,xb as jt,y as G,ya as Ue,yb as Lt,z as at,za as ze,zb as Se}from"./chunk-6JHCE5P2.js";import{a as q,b as lt,c as D}from"./chunk-2VMXMS7J.js";var Xn=Dt("StatusBar");var Yn=(()=>{let t=class t{constructor(){this.message="",this.hidden=!1,this.shouldClose=new me}hide(){this.hidden=!0,this.clickHideTimeout=setTimeout(()=>{this.shouldClose.next(!0)},500)}ngOnInit(){this.message=this.message||"Unknown error",this.normalHideTimeout=setTimeout(()=>{this.hide()},3e3)}ngOnDestroy(){clearTimeout(this.clickHideTimeout),clearTimeout(this.normalHideTimeout)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=P({type:t,selectors:[["app-error-modal"]],standalone:!0,features:[O],decls:3,vars:3,consts:[[1,"pop-up-container","error",3,"click"]],template:function(o,r){o&1&&(a(0,"div",0),u("click",function(){return r.hide()}),a(1,"div"),m(2),s()()),o&2&&(N("hidden",r.hidden),c(2),Tt(" ",r.message," "))},styles:[".pop-up-container[_ngcontent-%COMP%]{position:absolute;top:60px;left:50%;transform:translate(-50%,-50%);width:85vw;height:50px;opacity:1;border-radius:20px;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_bounceInTop .7s linear;padding:5px}.pop-up-container.error[_ngcontent-%COMP%]{background-color:#f56666}.pop-up-container.hidden[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceOutTop .3s linear forwards}@keyframes _ngcontent-%COMP%_bounceInTop{0%{transform:translate(-50%,-350%);opacity:0}80%{opacity:0}to{transform:translate(-50%,-50%);opacity:1}}@keyframes _ngcontent-%COMP%_bounceOutTop{to{transform:translate(-50%,-350%);opacity:0}0%{transform:translate(-50%,-50%);opacity:1}}"]});let e=t;return e})();var Jn=(()=>{let t=class t{constructor(){this.message="",this.shouldClose=new me}close(n){this.shouldClose.next(n)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=P({type:t,selectors:[["app-confirmation-modal"]],standalone:!0,features:[O],decls:10,vars:1,consts:[[1,"backdrop"],[1,"confirmation-container"],[1,"message"],[1,"actions"],[3,"click"]],template:function(o,r){o&1&&(h(0,"div",0),a(1,"div",1)(2,"div",2)(3,"p"),m(4),s()(),a(5,"div",3)(6,"div",4),u("click",function(){return r.close(!1)}),m(7,"No"),s(),a(8,"div",4),u("click",function(){return r.close(!0)}),m(9,"Yes"),s()()()),o&2&&(c(4),x(r.message))},styles:[".backdrop[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;z-index:100;background-color:#1c1c234d}.confirmation-container[_ngcontent-%COMP%]{position:absolute;top:90px;left:50%;transform:translate(-50%,-50%);width:85vw;height:100px;opacity:1;border-radius:20px;animation:_ngcontent-%COMP%_bounceInTop .3s linear;padding:5px;background-color:#ff7966;z-index:150;color:#fff}.confirmation-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around;font-size:1.2em;font-weight:700}.confirmation-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.confirmation-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}@keyframes _ngcontent-%COMP%_bounceInTop{0%{transform:translate(-50%,-350%);opacity:0}80%{opacity:0}to{transform:translate(-50%,-50%);opacity:1}}"]});let e=t;return e})();var dt=(()=>{let t=class t{registerModalContainer(n){this.modalContainer=n}showError(n){this.modalContainer.clear();let o=this.modalContainer.createComponent(Yn);o.instance.message=n,o.instance.shouldClose.subscribe(()=>this.modalContainer.clear())}showConfirmation(n){return new Promise(o=>{let r=this.modalContainer.createComponent(Jn);r.instance.message=n,r.instance.shouldClose.subscribe({next:p=>{this.modalContainer.clear(),o(p)}})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var wi=["modalContainer"],Qn=(()=>{let t=class t{constructor(n){this.modalService=n,Xn.setBackgroundColor({color:"#1C1C23"})}ngOnInit(){this.modalService.registerModalContainer(this.modalContainer)}};t.\u0275fac=function(o){return new(o||t)(_(dt))},t.\u0275cmp=P({type:t,selectors:[["app-root"]],viewQuery:function(o,r){if(o&1&&hn(wi,7,mn),o&2){let p;_n(p=vn())&&(r.modalContainer=p.first)}},standalone:!0,features:[O],decls:3,vars:0,consts:[["modalContainer",""]],template:function(o,r){o&1&&h(0,"router-outlet")(1,"div",null,0)},dependencies:[Rn,Pe]});let e=t;return e})();var Ye="@@STATE",Ee=!1,De=new at(Ee?"USER_OPTIONS":""),Zn=new at(Ee?"ALL_STATES_PERSISTED":"",{providedIn:"root",factory:()=>et(De).keys==="*"}),ie=new at(Ee?"NGXS_STORAGE_PLUGIN_OPTIONS":""),Je=new at(Ee?"STORAGE_ENGINE":"");function Qe(e){return e!=null&&!!e.engine}function ti(e){return Qe(e)&&(e=e.key),e.hasOwnProperty(He)&&(e=e[He].name),e instanceof Fn?e.getName():e}function Si(e){return lt(q({storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:t=>t,afterDeserialize:t=>t},e),{keys:e.keys==="*"?[Ye]:e.keys})}function ki(e,t){return ze(t)?null:e.storage===0?localStorage:e.storage===1?sessionStorage:null}function ei(e,t){return t?.namespace?`${t.namespace}:${e}`:e}var Ii=(()=>{let t=class t{constructor(){this._keys=new Set,this._injector=et(_e),this._keysWithEngines=[];let{keys:n}=et(ie);this.addKeys(n)}getKeysWithEngines(){return[...this._keysWithEngines]}addKeys(n){for(let o of n){let r=ti(o);if(this._keys.has(r))continue;this._keys.add(r);let p=Qe(o)?this._injector.get(o.engine):this._injector.get(Je);this._keysWithEngines.push({key:r,engine:p})}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ni=!1,Ti=(()=>{let t=class t{constructor(n,o,r){this._keysManager=n,this._options=o,this._platformId=r,this._allStatesPersisted=et(Zn)}handle(n,o,r){if(ze(this._platformId))return r(n,o);let p=Nn(o),d=p(Oe),g=p(Vn),y=d||g,V=!1;if(y){let M=g&&o.addedStates;for(let{key:b,engine:z}of this._keysManager.getKeysWithEngines()){if(!this._allStatesPersisted&&M){let j=b.indexOf(Ei),It=j>-1?b.slice(0,j):b;if(!M.hasOwnProperty(It))continue}let ft=ei(b,this._options),E=z.getItem(ft);if(E!=="undefined"&&E!=null){try{let j=this._options.deserialize(E);E=this._options.afterDeserialize(j,b)}catch{ni&&console.error(`Error ocurred while deserializing the ${ft} store value, falling back to empty object, the value obtained from the store: `,E),E={}}this._options.migrations?.forEach(j=>{let It=j.version===qe(E,j.versionKey||"version"),Oi=!j.key&&this._allStatesPersisted||j.key===b;It&&Oi&&(E=j.migrate(E),V=!0)}),this._allStatesPersisted?(E=this._hydrateSelectivelyOnUpdate(E,M),n=q(q({},n),E)):n=Wn(n,b,E)}}}return r(n,o).pipe(X(M=>{if(!(y&&!V))for(let{key:b,engine:z}of this._keysManager.getKeysWithEngines()){let ft=M,E=ei(b,this._options);b!==Ye&&(ft=qe(M,b));try{let j=this._options.beforeSerialize(ft,b);z.setItem(E,this._options.serialize(j))}catch(j){ni&&(j&&(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")?console.error(`The ${E} store value exceeds the browser storage quota: `,ft):console.error(`Error ocurred while serializing the ${E} store value, value not updated, the value obtained from the store: `,ft))}}}))}_hydrateSelectivelyOnUpdate(n,o){return!n||!o||Object.keys(o).length===0?n:Object.keys(o).reduce((r,p)=>(n.hasOwnProperty(p)&&(r[p]=n[p]),r),{})}};t.\u0275fac=function(o){return new(o||t)(W(Ii),W(ie),W(Zt))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})(),Ei=".";function ii(e){return fe([we(Ti),{provide:De,useValue:e},{provide:ie,useFactory:Si,deps:[De]},{provide:Je,useFactory:ki,deps:[ie,Zt]}])}var oi=!1,qr=new at(oi?"LOCAL_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>Ue(et(Zt))?localStorage:null}),Kr=new at(oi?"SESSION_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>Ue(et(Zt))?sessionStorage:null});var ai=new at("NGXS_DEVTOOLS_OPTIONS"),Di=(()=>{let t=class t{constructor(n,o,r){this._options=n,this._injector=o,this._ngZone=r,this.devtoolsExtension=null,this.globalDevtools=$e.__REDUX_DEVTOOLS_EXTENSION__||$e.devToolsExtension,this.unsubscribe=null,this.connect()}ngOnDestroy(){this.unsubscribe?.(),this.globalDevtools?.disconnect()}get store(){return this._injector.get(T)}handle(n,o,r){return!this.devtoolsExtension||this._options.disabled?r(n,o):r(n,o).pipe(it(p=>{let d=this.store.snapshot();throw this.sendToDevTools(n,o,d),p}),X(p=>{this.sendToDevTools(n,o,p)}))}sendToDevTools(n,o,r){let p=Gn(o);p===Oe.type?this.devtoolsExtension.init(n):this.devtoolsExtension.send(lt(q({},o),{action:null,type:p}),r)}dispatched(n){if(n.type==="DISPATCH"){if(n.payload.type==="JUMP_TO_ACTION"||n.payload.type==="JUMP_TO_STATE"){let o=JSON.parse(n.state);o.router&&o.router.trigger&&(o.router.trigger="devtools"),this.store.reset(o)}else if(n.payload.type==="TOGGLE_ACTION")console.warn("Skip is not supported at this time.");else if(n.payload.type==="IMPORT_STATE"){let{actionsById:o,computedStates:r,currentStateIndex:p}=n.payload.nextLiftedState;this.devtoolsExtension.init(r[0].state),Object.keys(o).filter(d=>d!=="0").forEach(d=>this.devtoolsExtension.send(o[d],r[d].state)),this.store.reset(r[p].state)}}else if(n.type==="ACTION"){let o=JSON.parse(n.payload);this.store.dispatch(o)}}connect(){!this.globalDevtools||this._options.disabled||(this.devtoolsExtension=this._ngZone.runOutsideAngular(()=>this.globalDevtools.connect(this._options)),this.unsubscribe=this.devtoolsExtension.subscribe(n=>{(n.type==="DISPATCH"||n.type==="ACTION")&&this.dispatched(n)}))}};t.\u0275fac=function(o){return new(o||t)(W(ai),W(_e),W(pn))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();function Ri(e){return q({name:"NGXS"},e)}var ri=new at("USER_OPTIONS");function si(e){return fe([we(Di),{provide:ri,useValue:e},{provide:ai,useFactory:Ri,deps:[ri]}])}var pt,St=(pt=class{registerOrLoginSuccess(t,i){t.patchState({lastError:i.payload})}static lastError(t){return t.lastError}},pt.\u0275fac=function(i){return new(i||pt)},pt.\u0275prov=G({token:pt,factory:pt.\u0275fac}),pt);C([Z(te)],St.prototype,"registerOrLoginSuccess",null);C([ht()],St,"lastError",null);St=C([Rt({name:"httpErrors"})],St);var ci=Dt("Keyboard");var At=(()=>{let t=class t{constructor(n){this.elementRef=n}onClick(n){let o=this.elementRef.nativeElement.contains(n),r=n.tagName==="INPUT";!o&&!r&&ci.hide()}};t.\u0275fac=function(o){return new(o||t)(_(ve))},t.\u0275dir=ue({type:t,selectors:[["","appClickOutside",""]],hostBindings:function(o,r){o&1&&u("click",function(d){return r.onClick(d.target)},!1,ln)},standalone:!0});let e=t;return e})();function Fi(e,t){e&1&&(a(0,"span"),m(1,"Login"),s())}function Vi(e,t){e&1&&(a(0,"span"),m(1,"Email or Login"),s())}function Gi(e,t){e&1&&(a(0,"span"),m(1,"minimum 5 characters"),s())}function Ni(e,t){e&1&&(a(0,"span"),m(1,"Make sure it is valid"),s())}function Wi(e,t){if(e&1&&(a(0,"div",3)(1,"p")(2,"span"),m(3,"Email"),s(),f(4,Ni,2,0,"span",4),s(),h(5,"input",12),s()),e&2){let i=v();c(4),l("ngIf",i.email.touched&&i.email.errors),c(),l("formControl",i.email)}}function ji(e,t){e&1&&(a(0,"span"),m(1,"minimum 8 characters"),s())}function Li(e,t){e&1&&(a(0,"div",13)(1,"span"),m(2,"Forgot password"),s()())}function $i(e,t){e&1&&(a(0,"div"),m(1,"Sign In"),s())}function Ai(e,t){e&1&&(a(0,"div"),m(1,"Get started, it\u2019s free!"),s())}function Ui(e,t){e&1&&(a(0,"div"),h(1,"img",14),s())}function zi(e,t){e&1&&(a(0,"div",15),m(1,"Don't have an account yet?"),s())}function Bi(e,t){e&1&&(a(0,"div",15),m(1,"Do you already have an account?"),s())}function Hi(e,t){e&1&&(a(0,"div"),m(1,"Sign Up"),s())}function qi(e,t){e&1&&(a(0,"div"),m(1,"Log In"),s())}var li=(()=>{let t=class t{constructor(){this.isLoading=!1,this.isLogin=!0,this.login=new yt(""),this.email=new yt(""),this.password=new yt(""),this.router=et(k),this.store=et(T),this.token$=this.store.select($t.token),this.lastError$=this.store.select(St.lastError)}ngOnInit(){this.tokenSubscription=this.token$.subscribe({next:n=>{n&&this.router.navigate([w.Dictionary])}}),this.lastErrorSubscription=this.lastError$.subscribe({next:n=>{n&&(this.isLoading=!1)}})}switchModes(){this.isLogin=!this.isLogin}submit(){return D(this,null,function*(){if(this.isLoading)return;this.isLoading=!0;let n;if(this.isLogin){let o={loginOrEmail:this.login.value,password:this.password.value};n=new Se(o)}else{let o={login:this.login.value,email:this.email.value,password:this.password.value,language:zn.Russian};n=new ke(o)}this.store.dispatch(n)})}checkIfDisabled(){return this.password.errors||this.login.errors||!this.isLogin&&this.email.errors}ngOnDestroy(){this.tokenSubscription.unsubscribe(),this.lastErrorSubscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=P({type:t,selectors:[["app-login"]],standalone:!0,features:[O],decls:29,vars:16,consts:[[1,"login-container"],[1,"login-title"],[1,"login-subtitle"],[1,"input-set"],[4,"ngIf"],["type","text","minlength","5","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],["class","input-set",4,"ngIf"],["type","password","minlength","8","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],["class","forgot-password",4,"ngIf"],[1,"submit-bright-btn",3,"click","disabled"],["class","alternative-text",4,"ngIf"],[1,"alternative-btn",3,"click"],["type","email","autocomplete","off","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"forgot-password"],["src","assets/redesign/loader-circle.svg","width","14","height","14"],[1,"alternative-text"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div")(2,"p",1),m(3,"LinguaTone"),s(),a(4,"p",2),m(5,"Tune into Fluency"),s()(),a(6,"div",3)(7,"p"),f(8,Fi,2,0,"span",4)(9,Vi,2,0,"span",4)(10,Gi,2,0,"span",4),s(),h(11,"input",5),s(),f(12,Wi,6,2,"div",6),a(13,"div",3)(14,"p")(15,"span"),m(16,"Password"),s(),f(17,ji,2,0,"span",4),s(),h(18,"input",7),s(),f(19,Li,3,0,"div",8),a(20,"button",9),u("click",function(){return r.submit()}),f(21,$i,2,0,"div",4)(22,Ai,2,0,"div",4)(23,Ui,2,0,"div",4),s(),f(24,zi,2,0,"div",10)(25,Bi,2,0,"div",10),a(26,"button",11),u("click",function(){return r.switchModes()}),f(27,Hi,2,0,"div",4)(28,qi,2,0,"div",4),s()()),o&2&&(c(8),l("ngIf",!r.isLogin),c(),l("ngIf",r.isLogin),c(),l("ngIf",r.login.touched&&r.login.errors),c(),l("formControl",r.login),c(),l("ngIf",!r.isLogin),c(5),l("ngIf",r.password.touched&&r.password.errors),c(),l("formControl",r.password),c(),l("ngIf",r.isLogin),c(),l("disabled",r.checkIfDisabled()),c(),l("ngIf",r.isLogin&&!r.isLoading),c(),l("ngIf",!r.isLogin&&!r.isLoading),c(),l("ngIf",r.isLoading),c(),l("ngIf",r.isLogin),c(),l("ngIf",!r.isLogin),c(2),l("ngIf",r.isLogin),c(),l("ngIf",!r.isLogin))},dependencies:[H,Mt,Ft,wt,Gt,Nt,Vt,At],styles:[".login-container[_ngcontent-%COMP%]{background-color:#1c1c23;width:100vw;height:100vh;color:#666680;display:grid;grid-gap:10px;justify-items:center;align-items:center;grid-auto-rows:3fr 1fr 1fr 1fr 1fr 2fr 1fr 1fr}.login-container[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{text-align:center;font-size:2em;font-weight:700;color:#ff7966}.login-container[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:100;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:2px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){color:#b1060f}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:15px;border:2px solid #353542;border-radius:15px}.login-container[_ngcontent-%COMP%]   .input-set[_ngcontent-%COMP%]   .input-field.ng-invalid.ng-dirty.ng-touched[_ngcontent-%COMP%]{border:2px solid #B1060F}.login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{justify-self:end;padding-right:30px;align-self:start;min-height:74px}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px;align-self:center;color:#fff;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;border:0;padding:0;font-family:inherit;font-size:inherit}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]:disabled{background:#dcdad1;box-shadow:none}.login-container[_ngcontent-%COMP%]   .submit-bright-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:10px 0}.login-container[_ngcontent-%COMP%]   .alternative-text[_ngcontent-%COMP%]{color:#fff;align-self:end}.login-container[_ngcontent-%COMP%]   .alternative-btn[_ngcontent-%COMP%]{justify-self:stretch;margin:0 30px;align-self:start;color:#fff;background:#ffffff1a;box-shadow:-1px -1px #585858;border-radius:999px;border:0;padding:0;font-family:inherit;font-size:inherit}.login-container[_ngcontent-%COMP%]   .alternative-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:10px 0}"]});let e=t;return e})();var di=(()=>{let t=class t{constructor(n){this.router=n}changeRoute(n){this.router.navigate([n])}};t.\u0275fac=function(o){return new(o||t)(_(k))},t.\u0275cmp=P({type:t,selectors:[["app-home-page"]],standalone:!0,features:[O],decls:3,vars:0,consts:[[1,"home-container"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div"),h(2,"router-outlet"),s()())},dependencies:[Pe],styles:[".home-container[_ngcontent-%COMP%]{background-color:#1c1c23;color:#fff}"]});let e=t;return e})();var mt,rt=(mt=class{getUserVocabularySuccess(t,i){let n=i.payload.map(o=>({wordId:o.word.id,userWordId:o.id,word:o.word.word,progress:o.progress,createdAt:o.createdAt,translations:o.word.Translation.map(r=>r.translation)}));t.patchState({userVocabulary:Te(n,"createdAt")})}static userVocabulary(t){return t.userVocabulary}},mt.\u0275fac=function(i){return new(i||mt)},mt.\u0275prov=G({token:mt,factory:mt.\u0275fac}),mt);C([Z(Me)],rt.prototype,"getUserVocabularySuccess",null);C([ht()],rt,"userVocabulary",null);rt=C([Rt({name:"vocabulary",defaults:{userVocabulary:[]}})],rt);var Ki=["*"];function Xi(e,t){e&1&&(a(0,"div"),un(1),s())}var R=(()=>{let t=class t{constructor(n,o){this.store=n,this.router=o,this.routes=w,this.currentRoute=this.router.url}goToPage(n){this.router.navigate([n])}};t.\u0275fac=function(o){return new(o||t)(_(T),_(k))},t.\u0275cmp=P({type:t,selectors:[["app-footer-menu"]],inputs:{isButtonVisible:"isButtonVisible"},standalone:!0,features:[O],ngContentSelectors:Ki,decls:11,vars:7,consts:[[1,"footer-container"],[4,"ngIf"],[1,"footer-body"],[3,"click"],["src","assets/redesign/book-.svg"],["src","assets/redesign/game-.svg"],["src","assets/redesign/image-.svg"],["src","assets/redesign/person-.svg"]],template:function(o,r){o&1&&(gn(),a(0,"footer",0),f(1,Xi,2,0,"div",1),a(2,"div",2)(3,"div",3),u("click",function(){return r.goToPage(r.routes.Dictionary)}),h(4,"img",4),s(),a(5,"div",3),u("click",function(){return r.goToPage(r.routes.Exercises)}),h(6,"img",5),s(),a(7,"div"),h(8,"img",6),s(),a(9,"div",3),u("click",function(){return r.goToPage(r.routes.UserProfile)}),h(10,"img",7),s()()()),o&2&&(c(),l("ngIf",r.isButtonVisible),c(),N("with-action-button",r.isButtonVisible),c(),N("active",r.currentRoute.startsWith(r.routes.Dictionary)),c(2),N("active",r.currentRoute.startsWith(r.routes.Exercises)))},dependencies:[H],styles:['.footer-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]{background-image:url("./media/footer-no-hole-MOKN222C.svg");background-repeat:no-repeat;height:100%;position:relative}.footer-container[_ngcontent-%COMP%]   .footer-body.with-action-button[_ngcontent-%COMP%]{background-image:url("./media/footer-hole-G2LTRVOZ.svg")}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;z-index:50;position:absolute;top:25px;filter:invert(67%) sepia(5%) saturate(796%) hue-rotate(202deg) brightness(97%) contrast(90%)}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{filter:invert(96%) sepia(81%) saturate(227%) hue-rotate(207deg) brightness(107%) contrast(101%)}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:11%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:28%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){right:28%}.footer-container[_ngcontent-%COMP%]   .footer-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){right:11%}']});let e=t;return e})();var pi=(()=>{let t=class t{getPlatform(){return Tn.getPlatform()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var F=(()=>{let t=class t{constructor(n,o,r){this.elementRef=n,this.renderer=o,this.platformService=r,this.iosStyles={height:"calc(100vh - 54px)","padding-top":"54px"}}ngOnInit(){if(this.platformService.getPlatform()==="ios")for(let n in this.iosStyles)this.renderer.setStyle(this.elementRef.nativeElement,n,this.iosStyles[n])}};t.\u0275fac=function(o){return new(o||t)(_(ve),_(dn),_(pi))},t.\u0275dir=ue({type:t,selectors:[["","appIosStyles",""]],standalone:!0});let e=t;return e})();var Ji=e=>({"--progress":e});function Qi(e,t){if(e&1&&(a(0,"div",14),h(1,"div",15),a(2,"div")(3,"p"),m(4),s(),a(5,"p"),m(6),s()()()),e&2){let i=t.$implicit;c(),l("ngStyle",Ce(3,Ji,i.progress+"%")),c(3),x(i.word),c(2),x(i.translations.join(", "))}}var Ut=class Ut{constructor(t,i){this.router=t,this.store=i,this.search=new yt("")}actionButtonPressed(){this.router.navigate([w.AddNewWord])}disableScroll(t){t.preventDefault(),t.stopPropagation()}ngOnInit(){this.store.dispatch(new ye),this.filteredDictionary$=ge([this.search.valueChanges.pipe(cn("")),this.userVocabulary$]).pipe(nt(([t,i])=>{let n=t.toLowerCase();return i.filter(o=>o.word.toLowerCase().includes(n))}))}};Ut.\u0275fac=function(i){return new(i||Ut)(_(k),_(T))},Ut.\u0275cmp=P({type:Ut,selectors:[["app-vocabulary-page"]],standalone:!0,features:[O],decls:19,vars:5,consts:[["appIosStyles","",1,"vocabulary-container"],[1,"header",3,"touchmove"],[1,"top-panel"],["src","assets/redesign/edit-.svg"],["src","assets/redesign/filter-.svg"],[1,"search"],["type","text","minlength","5","autocomplete","off","placeholder","Search for a word","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"main-content"],[1,"vocabulary-list"],["class","word-container",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/add-.svg"],[1,"word-container"],[1,"progress-bar",3,"ngStyle"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),u("touchmove",function(r){return n.disableScroll(r)}),a(2,"div",2)(3,"div"),h(4,"img",3),s(),a(5,"div"),m(6,"My Vocaburary"),s(),a(7,"div"),h(8,"img",4),s()(),a(9,"div",5),h(10,"input",6),s()(),a(11,"div",7)(12,"div",8),f(13,Qi,7,5,"div",9),Ct(14,"async"),s()(),a(15,"div",10),u("touchmove",function(r){return n.disableScroll(r)}),a(16,"app-footer-menu",11)(17,"div",12),u("click",function(){return n.actionButtonPressed()}),h(18,"img",13),s()()()()),i&2&&(c(10),l("formControl",n.search),c(3),l("ngForOf",xt(14,3,n.filteredDictionary$)),c(3),l("isButtonVisible",!0))},dependencies:[F,Mt,Ft,wt,Gt,Nt,Vt,At,L,yn,R,Et],styles:[`.vocabulary-container{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,1.1fr) minmax(0,8fr) minmax(0,1.2fr)}.vocabulary-container .header .top-panel{display:flex;justify-content:space-around;color:#a2a2b5;align-items:center;font-size:1.2em;margin-top:10px}.vocabulary-container .header .top-panel img{width:30px;filter:invert(67%) sepia(5%) saturate(796%) hue-rotate(202deg) brightness(97%) contrast(90%)}.vocabulary-container .header .search{margin:0 30px}.vocabulary-container .header .search input{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:8px 15px;border:1px solid #353542;border-radius:15px}.vocabulary-container .main-content{overflow:scroll}.vocabulary-container .main-content .vocabulary-list{margin:0 30px}.vocabulary-container .main-content .vocabulary-list .word-container{margin-top:7px;border:1px solid #353542;border-radius:16px;padding:10px;height:30px;box-shadow:-1px -1px #5858584d;background-color:#26262f;display:flex;align-items:center}.vocabulary-container .main-content .vocabulary-list .word-container .progress-bar{margin-right:10px;width:30px;height:30px;border-radius:50%;background:radial-gradient(closest-side,#26262F 79%,transparent 80%),conic-gradient(#00FAD9 var(--progress),#4E4E61 0)}.vocabulary-container .main-content .vocabulary-list .word-container p:nth-child(1){margin:0;color:#fff}.vocabulary-container .main-content .vocabulary-list .word-container p:nth-child(2){margin:3px 0 0;color:#a2a2b5;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 130px);white-space:nowrap}.vocabulary-container .footer .footer-action-button{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.vocabulary-container .footer .footer-action-button img{width:40px;height:40px}
`],encapsulation:2});var oe=Ut;C([$(rt.userVocabulary)],oe.prototype,"userVocabulary$",void 0);var mi=(()=>{let t=class t{constructor(n,o){this.router=n,this.store=o}logout(){this.store.dispatch(new Bn),this.router.navigate([w.Login])}disableScroll(n){n.preventDefault(),n.stopPropagation()}};t.\u0275fac=function(o){return new(o||t)(_(k),_(T))},t.\u0275cmp=P({type:t,selectors:[["app-user-profile-page"]],standalone:!0,features:[O],decls:8,vars:1,consts:[["appIosStyles","",1,"user-profile-container"],[1,"main-content"],[3,"click"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return r.logout()}),m(3,"LOGOUT"),s()(),a(4,"div",3),u("touchmove",function(d){return r.disableScroll(d)}),a(5,"app-footer-menu",4)(6,"div",5),h(7,"img",6),s()()()()),o&2&&(c(5),l("isButtonVisible",!1))},dependencies:[F,R],styles:[".user-profile-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.user-profile-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.user-profile-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});let e=t;return e})();var Re=(()=>{let t=class t{constructor(n){this.payload=n}};t.type="[Game] Init Pronunciation Game";let e=t;return e})(),Fe=(()=>{let t=class t{constructor(n){this.payload=n}};t.type="[Game] Finish Crossword Game";let e=t;return e})(),Ve=(()=>{let t=class t{};t.type="[Game] Clear Game Data";let e=t;return e})(),Ge=(()=>{let t=class t{};t.type="[Game] Init Crossword";let e=t;return e})(),Ne=(()=>{let t=class t{constructor(n){this.payload=n}};t.type="[Game] Highlight Cells";let e=t;return e})(),We=(()=>{let t=class t{constructor(n){this.payload=n}};t.type="[Game] Save Correct Word";let e=t;return e})(),je=(()=>{let t=class t{};t.type="[Game] Init Dialog Game";let e=t;return e})();var gi=(()=>{let t=class t{constructor(n,o){this.store=n,this.router=o,this.routes=w}goToPage(n){this.router.navigate([n])}disableScroll(n){n.preventDefault(),n.stopPropagation()}ngOnInit(){this.store.dispatch(new Ve)}};t.\u0275fac=function(o){return new(o||t)(_(T),_(k))},t.\u0275cmp=P({type:t,selectors:[["app-exercises-main"]],standalone:!0,features:[O],decls:28,vars:0,consts:[["appIosStyles","",1,"exercises-container"],[1,"main-content"],[1,"game-item",3,"click"],["src","assets/redesign/loudspeaker.svg",1,"image"],[1,"title"],[1,"description"],["src","assets/redesign/dialog.svg",1,"image"],["src","assets/redesign/crossword.svg",1,"image"],[1,"footer",3,"touchmove"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),u("click",function(){return r.goToPage(r.routes.PronunciationPreparation)}),a(3,"div"),h(4,"img",3),s(),a(5,"div")(6,"div",4),m(7,"Pronunciation"),s(),a(8,"div",5),m(9,"Using examples as hints, pronounce the hidden word"),s()()(),a(10,"div",2),u("click",function(){return r.goToPage(r.routes.Dialog)}),a(11,"div"),h(12,"img",6),s(),a(13,"div")(14,"div",4),m(15,"Dialog"),s(),a(16,"div",5),m(17,"Maintain the dialog using the words form the vocabulary"),s()()(),a(18,"div",2),u("click",function(){return r.goToPage(r.routes.Crossword)}),a(19,"div"),h(20,"img",7),s(),a(21,"div")(22,"div",4),m(23,"Crossword"),s(),a(24,"div",5),m(25,"Solve the crossword"),s()()()(),a(26,"div",8),u("touchmove",function(d){return r.disableScroll(d)}),h(27,"app-footer-menu"),s()())},dependencies:[F,R],styles:[".exercises-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:20px;gap:10px;background:#4e4e6133;border-radius:16px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{height:50px;width:50px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4em;margin-bottom:10px}.exercises-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .game-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#a2a2b5;font-size:.8em}"]});let e=t;return e})();var zt=(()=>{let t=class t{constructor(n,o){this.http=n,this.store=o,this.getSearchWordUrl=r=>`${st.apiUrl}/words/search?q=${r}`,this.getAddWordToVocabularyUrl=r=>`${st.apiUrl}/words/${r}`,this.getRandomWordsUrl=r=>`${st.apiUrl}/words/random/${r}`,this.getUserVocabularyUrl=`${st.apiUrl}/words`,this.updateWordsProgressUrl=`${st.apiUrl}/words/progress/update`,this.speechRecognitionUrl=`${st.apiUrl}/speech/recognize`,this.randomDialogUrl=`${st.apiUrl}/words/dialog`}getToken(){return this.store.selectSnapshot($t.token)}searchWord(n){return this.http.get(this.getSearchWordUrl(n),{headers:new Pt({Authorization:`Bearer ${this.getToken()}`})})}addWordToUserVocabulary(n){return this.http.post(this.getAddWordToVocabularyUrl(n),{},{headers:new Pt({Authorization:`Bearer ${this.getToken()}`})})}getUserVocabulary(n){let o=new Be({fromObject:{include:n}});return this.http.get(this.getUserVocabularyUrl,{headers:new Pt({Authorization:`Bearer ${this.getToken()}`}),params:o})}getSeveralRandomWords(n,o,r){let p=new Be({fromObject:{include:o,limitIncludedEntities:r}});return this.http.get(this.getRandomWordsUrl(n),{headers:new Pt({Authorization:`Bearer ${this.getToken()}`}),params:p})}getRandomDialog(){return this.http.get(this.randomDialogUrl,{headers:new Pt({Authorization:`Bearer ${this.getToken()}`})})}recognizeSpeech(n){return this.http.post(this.speechRecognitionUrl,n,{headers:new Pt({Authorization:`Bearer ${this.getToken()}`})})}updateWordsProgress(n){return this.http.post(this.updateWordsProgressUrl,{userWordIds:n},{headers:new Pt({Authorization:`Bearer ${this.getToken()}`})})}};t.\u0275fac=function(o){return new(o||t)(W(xe),W(T))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function to(e,t){e&1&&h(0,"img",12)}function eo(e,t){if(e&1){let i=Q();a(0,"img",18),u("click",function(){Y(i);let o=v().$implicit,r=v();return J(r.addWordToUserDictionary(o))}),s()}}function no(e,t){e&1&&(he(),a(0,"svg",19),h(1,"polyline",20),s())}function io(e,t){if(e&1&&(a(0,"li")(1,"div")(2,"p",13),m(3),s(),a(4,"p",14),m(5),s()(),a(6,"div",15),f(7,eo,1,0,"img",16)(8,no,2,0,"svg",17),s()()),e&2){let i=t.$implicit;c(3),x(i.word),c(2),x(i.translations.join(", ")),c(),N("actionable",!i.added),c(),l("ngIf",!i.added),c(),l("ngIf",i.added)}}var ui=(()=>{let t=class t{constructor(n,o,r){this.wordService=n,this.router=o,this.store=r,this.wordSearch=new yt(""),this.isSearchInProgress=!1,this.possibleWords=[]}goBack(){this.router.navigate([w.Dictionary])}addWordToUserDictionary(n){this.store.dispatch(new Wt(n.id)),n.added=!0}getPossibleWordOptions(n){this.isSearchInProgress=!1,n&&this.wordService.searchWord(n).subscribe({next:o=>{let p=this.store.selectSnapshot(rt.userVocabulary).map(g=>g.wordId),d=o.filter(g=>!p.includes(g.id)).map(g=>lt(q({},g),{translations:g.Translation.map(y=>y.translation)}));this.possibleWords=d}})}disableScroll(n){n.preventDefault(),n.stopPropagation()}ngOnInit(){this.wordSearch.valueChanges.pipe(X(()=>{this.isSearchInProgress=!0})).pipe(rn(()=>on(1e3))).pipe(sn()).subscribe({next:n=>this.getPossibleWordOptions(n)})}ngOnDestroy(){}};t.\u0275fac=function(o){return new(o||t)(_(zt),_(k),_(T))},t.\u0275cmp=P({type:t,selectors:[["app-add-user-word"]],standalone:!0,features:[O],decls:17,vars:3,consts:[["appIosStyles","",1,"add-new-word-container"],[1,"header"],[1,"top-panel"],[3,"click"],["src","assets/redesign/back-icon.svg"],[1,"search"],["class","loader","src","assets/redesign/loader-circle.svg",4,"ngIf"],["type","text","minlength","5","autocomplete","off","placeholder","Start typing","appClickOutside","","required","",1,"input-field",3,"formControl"],[1,"options"],[1,"potential-list"],[4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],["src","assets/redesign/loader-circle.svg",1,"loader"],[1,"word"],[1,"translations"],[1,"add-btn"],["src","assets/redesign/plus-sign.svg",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2",4,"ngIf"],["src","assets/redesign/plus-sign.svg",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2"],["fill","none","stroke","#FF8A70","stroke-width","10","stroke-linecap","round","stroke-miterlimit","10","points","100.2,40.2 51.5,88.8 29.8,67.5 ",1,"check","path"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u("click",function(){return r.goBack()}),h(4,"img",4),s(),a(5,"div"),m(6,"Add New Word"),s(),h(7,"div"),s(),a(8,"div",5),f(9,to,1,0,"img",6),h(10,"input",7),s()(),a(11,"div",8)(12,"div",9)(13,"ul"),f(14,io,9,6,"li",10),s()()(),a(15,"div",11),u("touchmove",function(d){return r.disableScroll(d)}),h(16,"app-footer-menu"),s()()),o&2&&(c(9),l("ngIf",r.isSearchInProgress),c(),l("formControl",r.wordSearch),c(4),l("ngForOf",r.possibleWords))},dependencies:[F,H,Mt,Ft,wt,Gt,Nt,Vt,At,L,R],styles:[".add-new-word-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,1.1fr) minmax(0,8fr) minmax(0,1.2fr)}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .top-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-around;color:#a2a2b5;align-items:center;font-size:1.2em;margin-top:15px}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .top-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin:5px 30px;position:relative}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;top:calc(50% - 12px);right:10px;animation-name:_ngcontent-%COMP%_spin;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}.add-new-word-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;font-size:15px;outline:none;box-sizing:border-box;color:#fff;background:#1c1c23;padding:8px 15px;border:1px solid #353542;border-radius:15px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]{margin:0 30px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;background:#4e4e6133;height:60px;border-radius:16px;margin-bottom:5px;animation:_ngcontent-%COMP%_fadeIn .5s linear;animation-fill-mode:both;display:flex;justify-content:space-between;align-items:center}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.word[_ngcontent-%COMP%]{margin:0 0 5px 20px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.translations[_ngcontent-%COMP%]{margin:0 0 0 20px;color:#a2a2b5;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 130px);white-space:nowrap}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{width:40px;height:40px;text-align:center;line-height:40px;border-radius:16px;margin-right:10px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn.actionable[_ngcontent-%COMP%]{background:#4e4e6133;box-shadow:-1px -1px #585858}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:25px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:25px}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path.check[_ngcontent-%COMP%]{stroke-dashoffset:-100;animation:_ngcontent-%COMP%_dash-check .9s .35s ease-in-out forwards}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1000;stroke-dashoffset:0}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){animation-delay:.25s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){animation-delay:.5s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){animation-delay:.75s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){animation-delay:1s}.add-new-word-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .potential-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){animation-delay:1.25s}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;top:100px}75%{opacity:.5;top:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_dash-check{0%{stroke-dashoffset:-100;opacity:1}99%{opacity:1}to{stroke-dashoffset:900;opacity:0}}"]});let e=t;return e})();var U=function(e){return e.Translation="Translation",e.Definition="Definition",e.Example="Example",e}(U||{});function oo(e,t){if(e&1){let i=Q();a(0,"div",9),u("click",function(){let o=Y(i).$implicit,r=v();return J(r.selectTask(o.value))}),a(1,"span",10),m(2),s()()}if(e&2){let i=t.$implicit,n=v();N("activated",i.value===n.selectedTask),c(2),Tt("",i.value,"s")}}function ro(e,t){if(e&1){let i=Q();a(0,"div",11),u("click",function(){let o=Y(i).$implicit,r=v();return J(r.selectNumber(o))}),a(1,"span",10),m(2),s()()}if(e&2){let i=t.$implicit,n=v();N("activated",i===n.selectedNumber),c(2),x(i)}}var fi=(()=>{let t=class t{constructor(n,o){this.store=n,this.router=o,this.tasks=U,this.numberOfWords=[5,10,15],this.selectedTask=U.Example,this.selectedNumber=this.numberOfWords[1]}disableScroll(n){n.preventDefault(),n.stopPropagation()}selectTask(n){this.selectedTask=n}selectNumber(n){this.selectedNumber=n}startGame(){let n={task:this.selectedTask,numberOfWords:this.selectedNumber};this.store.dispatch(new Re(n)),this.router.navigate([w.Pronunciation])}};t.\u0275fac=function(o){return new(o||t)(_(T),_(k))},t.\u0275cmp=P({type:t,selectors:[["app-pronunciation-preparation"]],standalone:!0,features:[O],decls:14,vars:5,consts:[["appIosStyles","",1,"pronunciation-preparation-container"],[1,"main-content"],["class","type activated",3,"activated","click",4,"ngFor","ngForOf"],[1,"number-of-words"],["class","item",3,"activated","click",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/play.svg"],[1,"type","activated",3,"click"],[1,"title"],[1,"item",3,"click"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Select what will be used for tasks:"),s(),f(4,oo,3,3,"div",2),Ct(5,"keyvalue"),a(6,"h3"),m(7,"Select a number of words:"),s(),a(8,"div",3),f(9,ro,3,3,"div",4),s()(),a(10,"div",5),u("touchmove",function(d){return r.disableScroll(d)}),a(11,"app-footer-menu",6)(12,"div",7),u("click",function(){return r.startGame()}),h(13,"img",8),s()()()()),o&2&&(c(4),l("ngForOf",xt(5,3,r.tasks)),c(5),l("ngForOf",r.numberOfWords),c(2),l("isButtonVisible",!0))},dependencies:[F,L,R,Mn],styles:[".pronunciation-preparation-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#a2a2b5}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:#4e4e6133;border-radius:16px;padding:20px;margin-bottom:5px;text-align:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .type.activated[_ngcontent-%COMP%]{background:#4e4e61}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background:#4e4e6133;border-radius:16px;padding:20px;width:30px;height:10px;margin-bottom:5px;display:flex;align-items:center;justify-content:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .number-of-words[_ngcontent-%COMP%]   .item.activated[_ngcontent-%COMP%]{background:#4e4e61}.pronunciation-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.pronunciation-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;padding-left:5px}"]});let e=t;return e})();var kt=function(e){return e.Vertical="Vertical",e.Horizontal="Horizontal",e}(kt||{}),ao=(e,t)=>{if(e.to>t.length)for(let n=t.length;n<e.to;n++)t.push(new Array(t[0].length).fill(null));if(e.from<0)for(let n=e.from;n<0;n++)t.unshift(new Array(t[0].length).fill(null));let i=e.from<0?0:e.from;for(let n=0;n<e.newWord.length;n++){let o=i+n,r=e.matchedCell[1];t[o][r]=e.newWord[n]}},so=(e,t)=>{if(e.to>t[0].length){let n=e.to-t[0].length;for(let o of t)o.push(...new Array(n).fill(null))}if(e.from<0)for(let n of t)n.unshift(...new Array(Math.abs(e.from)).fill(null));let i=e.from<0?0:e.from;for(let n=0;n<e.newWord.length;n++){let o=e.matchedCell[0],r=i+n;t[o][r]=e.newWord[n]}},co=(e,t,i,n,o)=>{let[r,p]=[o-1,o+1],d=n-i,g=d+t.length,y=!0,V=0,M=-1;(K(e,`${d-1}.${o}`)||K(e,`${g+1}.${o}`))&&(y=!1);for(let b=d;b<=g;b++){M++;let E=K(e,`${b}.${o}`),j=K(e,`${b}.${r}`),It=K(e,`${b}.${p}`);if(E&&E===t[M]){V++;continue}if((E||j||It)&&E!==t[M]){y=!1;break}}return y?[{wordIndex:i,priority:V,matchedCell:[n,o],maxSpan:Math.max(i,t.length-i-1),letter:t[i],targetDirection:kt.Vertical,newWord:t,from:d,to:g}]:[]},lo=(e,t,i,n,o)=>{let[r,p]=[n-1,n+1],d=o-i,g=d+t.length,y=!0,V=0,M=-1;(K(e,`${n}.${d-1}`)||K(e,`${n}.${g+1}`))&&(y=!1);for(let b=d;b<=g;b++){M++;let E=K(e,`${n}.${b}`),j=K(e,`${r}.${b}`),It=K(e,`${p}.${b}`);if(E&&E===t[M]){V++;continue}if((E||j||It)&&E!==t[M]){y=!1;break}}return y?[{wordIndex:i,priority:V,matchedCell:[n,o],maxSpan:Math.max(i,t.length-i-1),letter:t[i],targetDirection:kt.Horizontal,newWord:t,from:d,to:g}]:[]},po=(e,t)=>{let i=[];for(let n=0;n<t.length;n++){let o=t[n];for(let r=0;r<e.length;r++)for(let p=0;p<e[r].length;p++)if(o===e[r][p]){let d=!K(e,`${r}.${p-1}`)&&!K(e,`${r}.${p+1}`),g=!K(e,`${r-1}.${p}`)&&!K(e,`${r+1}.${p}`);if(!g&&!d)continue;g?i.push(...co(e,t,n,r,p)):i.push(...lo(e,t,n,r,p))}}return i},mo=e=>{let t=[];e.sort((d,g)=>g.word.length-d.word.length),e.forEach((d,g)=>{let y=d.word.split("");if(!t.length)t.push(y),d.startCoordinates=[0,0],d.direction=kt.Horizontal;else{let V=po(t,y);V.sort((b,z)=>z.priority-b.priority||b.maxSpan-z.maxSpan);let M=V.shift();if(M){if(d.direction=M.targetDirection,M.targetDirection===kt.Horizontal&&(so(M,t),d.startCoordinates=M.matchedCell,d.startCoordinates[1]=M.from,M.from<0)){d.startCoordinates[1]=0;let b=Math.abs(M.from);for(let z=0;z<g;z++)e[z].startCoordinates[1]+=b}if(M.targetDirection===kt.Vertical&&(ao(M,t),d.startCoordinates=M.matchedCell,d.startCoordinates[0]=M.from,M.from<0)){d.startCoordinates[0]=0;let b=Math.abs(M.from);for(let z=0;z<g;z++)e[z].startCoordinates[0]+=b}}}});let n=Te(e,d=>d.startCoordinates).reduce((d,g)=>{let y=Hn(d),V=bt(g);return y?Ie(y.startCoordinates,V.startCoordinates)?V.questionNumber=y.questionNumber:V.questionNumber=y.questionNumber+1:V.questionNumber=1,d.push(V),d},[]),o=Xe(n,{direction:kt.Horizontal}),r=Xe(n,{direction:kt.Vertical}),p=t.map((d,g)=>d.map((y,V)=>y?{letter:y,row:g,column:V}:{}));return n.forEach(d=>{let[g,y]=d.startCoordinates;p[g][y].questionNumber=d.questionNumber}),{crossword:p,horizontalWords:o,verticalWords:r}},hi=mo;var gt,S=(gt=class{constructor(t){this.wordService=t}initPronunciationGameSuccess(t,i){return D(this,null,function*(){console.log(i.payload),t.patchState({pronunciation:i.payload})})}initCrossword(t){return D(this,null,function*(){return yield new Promise(i=>setTimeout(i,500)),this.wordService.getSeveralRandomWords(10,[U.Definition,U.Translation],2).pipe(X(i=>{t.patchState({crossword:hi(i)})}))})}initDialogGame(t){return D(this,null,function*(){return yield new Promise(i=>setTimeout(i,500)),this.wordService.getRandomDialog().pipe(X(i=>{t.patchState({dialog:i})}))})}finishPronunciationGame(t,i){return D(this,null,function*(){t.patchState({pronunciation:{results:i.payload}})})}FinishDialogGame(t,i){return D(this,null,function*(){t.patchState({dialogResults:i.payload})})}FinishCrosswordGame(t,i){return D(this,null,function*(){t.patchState({crossword:i.payload});let n=[...i.payload.horizontalWords,...i.payload.verticalWords].filter(o=>o.isCorrect).map(o=>o.id);return n.length&&this.wordService.updateWordsProgress(n)})}HighlightCells(t,i){return D(this,null,function*(){let n=t.getState();t.patchState({crossword:lt(q({},n.crossword),{highlighted:i.payload})})})}SaveCorrectWord(t,i){return D(this,null,function*(){let n=t.getState(),{crossword:o,horizontalWords:r,verticalWords:p,highlighted:d}=bt(n.crossword);d?.forEach(([V,M])=>o[V][M].isCorrect=!0);let y=(i.payload.direction==="Vertical"?p:r).find(V=>V.id===i.payload.id);y.isCorrect=!0,t.patchState({crossword:{crossword:o,horizontalWords:r,verticalWords:p,highlighted:[]}})})}ClearGameData(t){t.patchState({pronunciation:{},latestHeardData:null,crossword:null,dialog:null})}static pronunciation(t){return t.pronunciation}static crossword(t){return t.crossword}static dialog(t){return t.dialog}static dialogResults(t){return t.dialogResults}},gt.\u0275fac=function(i){return new(i||gt)(W(zt))},gt.\u0275prov=G({token:gt,factory:gt.\u0275fac}),gt);C([Z(be)],S.prototype,"initPronunciationGameSuccess",null);C([Z(Ge)],S.prototype,"initCrossword",null);C([Z(je)],S.prototype,"initDialogGame",null);C([Z(jt)],S.prototype,"finishPronunciationGame",null);C([Z(Lt)],S.prototype,"FinishDialogGame",null);C([Z(Fe)],S.prototype,"FinishCrosswordGame",null);C([Z(Ne)],S.prototype,"HighlightCells",null);C([Z(We)],S.prototype,"SaveCorrectWord",null);C([Z(Ve)],S.prototype,"ClearGameData",null);C([ht()],S,"pronunciation",null);C([ht()],S,"crossword",null);C([ht()],S,"dialog",null);C([ht()],S,"dialogResults",null);S=C([Rt({name:"game"})],S);function go(e,t){if(e&1&&(a(0,"div",8),m(1),s()),e&2){let i=t.$implicit;l("ngClass",i.isCorrect?"correct":"wrong"),c(),x(i.word)}}var Bt=class Bt{constructor(t){this.router=t}disableScroll(t){t.preventDefault(),t.stopPropagation()}ngOnInit(){this.results$=this.pronunciation$.pipe(B(Boolean)).pipe(nt(t=>t.results))}goToVocabularyPage(){this.router.navigate([w.Dictionary])}};Bt.\u0275fac=function(i){return new(i||Bt)(_(k))},Bt.\u0275cmp=P({type:Bt,selectors:[["app-pronunciation-results"]],standalone:!0,features:[O],decls:10,vars:4,consts:[["appIosStyles","",1,"pronunciation-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),m(3,"Results:"),s(),f(4,go,2,2,"div",3),Ct(5,"async"),s(),a(6,"div",4),u("touchmove",function(r){return n.disableScroll(r)}),a(7,"app-footer-menu",5)(8,"div",6)(9,"img",7),u("click",function(){return n.goToVocabularyPage()}),s()()()()()),i&2&&(c(4),l("ngForOf",xt(5,2,n.results$)),c(3),l("isButtonVisible",!0))},dependencies:[F,L,ot,R,Et],styles:[".pronunciation-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.pronunciation-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.pronunciation-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var re=Bt;C([$(S.pronunciation)],re.prototype,"pronunciation$",void 0);var ut=Dt("SpeechRecognition",{web:()=>import("./chunk-DO46T7OB.js").then(e=>new e.SpeechRecognitionWeb)});function uo(e,t){e&1&&(a(0,"div",10),h(1,"img",11),s())}function fo(e,t){e&1&&(a(0,"p",19),m(1,"Tip: say a part of the sentence that includes the hidden word for better result"),s())}function ho(e,t){e&1&&(a(0,"p",19),m(1,"Pronounce the word that corresponds to these translations"),s())}function _o(e,t){e&1&&(a(0,"p",19),m(1,"Pronounce the word that corresponds to this definition"),s())}function vo(e,t){if(e&1&&(a(0,"span",22),m(1),s()),e&2){let i=v(3);l("ngClass",i.examplesTasks[i.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),c(),x(i.examplesTasks[i.currentTaskIndex].inclusion)}}function Co(e,t){if(e&1&&(a(0,"span"),m(1),s()),e&2){let i=v(3);c(),x(i.examplesTasks[i.currentTaskIndex].substitution)}}function xo(e,t){if(e&1&&(a(0,"div",20)(1,"span"),m(2),s(),f(3,vo,2,2,"span",21)(4,Co,2,1,"span",18),a(5,"span"),m(6),s()()),e&2){let i=v(2);c(2),x(i.examplesTasks[i.currentTaskIndex].beforeInclusion),c(),l("ngIf",i.examplesTasks[i.currentTaskIndex].isRevealed),c(),l("ngIf",!i.examplesTasks[i.currentTaskIndex].isRevealed),c(2),x(i.examplesTasks[i.currentTaskIndex].afterInclusion)}}function Po(e,t){if(e&1&&(a(0,"p"),m(1),s()),e&2){let i=t.$implicit;c(),x(i)}}function Oo(e,t){if(e&1&&(a(0,"span",22),m(1),s()),e&2){let i=v(3);l("ngClass",i.translationsTasks[i.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),c(),x(i.translationsTasks[i.currentTaskIndex].word)}}function wo(e,t){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,Po,2,1,"p",25),s(),a(3,"div",26),f(4,Oo,2,2,"span",21),s()()),e&2){let i=v(2);c(2),l("ngForOf",i.translationsTasks[i.currentTaskIndex].translations),c(2),l("ngIf",i.translationsTasks[i.currentTaskIndex].isRevealed)}}function yo(e,t){if(e&1&&(a(0,"p"),m(1),s()),e&2){let i=t.$implicit;c(),x(i)}}function Mo(e,t){if(e&1&&(a(0,"span",22),m(1),s()),e&2){let i=v(3);l("ngClass",i.definitionsTasks[i.currentTaskIndex].isCorrect?"revealing-correct":"revealing-wrong"),c(),x(i.definitionsTasks[i.currentTaskIndex].word)}}function bo(e,t){if(e&1&&(a(0,"div",27)(1,"div",24),f(2,yo,2,1,"p",25),s(),a(3,"div",26),f(4,Mo,2,2,"span",21),s()()),e&2){let i=v(2);c(2),l("ngForOf",i.definitionsTasks[i.currentTaskIndex].definitions),c(2),l("ngIf",i.definitionsTasks[i.currentTaskIndex].isRevealed)}}function So(e,t){if(e&1&&(a(0,"p",29),m(1),s()),e&2){let i=t.$implicit;c(),x(i)}}function ko(e,t){if(e&1&&(a(0,"div")(1,"p"),m(2,"What we heard:"),s(),f(3,So,2,1,"p",28),s()),e&2){let i=v(2);c(3),l("ngForOf",i.getCurrentPlayingTasks()[i.currentTaskIndex].arrayOfHeardWords)}}function Io(e,t){if(e&1&&(a(0,"div",12),f(1,fo,2,0,"p",13)(2,ho,2,0,"p",13)(3,_o,2,0,"p",13),a(4,"div",14),f(5,xo,7,4,"div",15)(6,wo,5,2,"div",16)(7,bo,5,2,"div",17),s(),f(8,ko,4,1,"div",18),s()),e&2){let i=v();c(),l("ngIf",i.task===i.WordIncludeOptions.Example),c(),l("ngIf",i.task===i.WordIncludeOptions.Translation),c(),l("ngIf",i.task===i.WordIncludeOptions.Definition),c(2),l("ngIf",i.task===i.WordIncludeOptions.Example),c(),l("ngIf",i.task===i.WordIncludeOptions.Translation),c(),l("ngIf",i.task===i.WordIncludeOptions.Definition),c(),l("ngIf",i.getCurrentPlayingTasks()[i.currentTaskIndex].isRevealed&&!i.getCurrentPlayingTasks()[i.currentTaskIndex].isCorrect)}}function To(e,t){e&1&&h(0,"img",30)}function Eo(e,t){e&1&&h(0,"img",31)}function Do(e,t){e&1&&h(0,"img",32)}var Ht=class Ht{constructor(t,i,n){this.store=t,this.router=i,this.modalService=n,this.isLoading=!0,this.isRecordingInitiated=!1,this.examplesTasks=[],this.translationsTasks=[],this.definitionsTasks=[],this.currentTaskIndex=0,this.recordingInProgress=!1,this.validatingResults=!1,this.WordIncludeOptions=U,this.audio=new Audio}playAudio(t){this.audio.paused||this.audio.pause(),this.audio.src=t,this.audio.play()}canDeactivate(t){return D(this,null,function*(){return t?.url===w.PronunciationResult?!0:yield this.modalService.showConfirmation("There are several words left. Would you still like to leave?")})}ngOnInit(){this.pronunciationSubscription=this.pronunciation$.pipe(B(Boolean)).subscribe(t=>{this.task=t.task,this.task===U.Example&&this.prepareExamples(t.wordData),this.task===U.Translation&&this.prepareTranslations(t.wordData),this.task===U.Definition&&this.prepareDefinitions(t.wordData)})}prepareExamples(t){this.examplesTasks=t.filter(i=>i.Example[0]).map(i=>{let n=i.Example[0];return{word:i.word,id:i.id,beforeInclusion:n.example.substring(0,n.inclusionStart),inclusion:n.example.substring(n.inclusionStart,n.inclusionEnd+1),substitution:"".padEnd(n.inclusionEnd-n.inclusionStart+1,"-"),afterInclusion:n.example.substring(n.inclusionEnd+1),original:n.example,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[],pronunciation:n.pronunciation}}),console.log(this.examplesTasks),this.currentTaskIndex=0,this.isLoading=!1}prepareTranslations(t){console.log(t),this.translationsTasks=t.filter(i=>i.Translation[0]).map(i=>{let n=i.Translation.map(o=>o.translation);return{word:i.word,id:i.id,translations:n,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[]}}),this.currentTaskIndex=0,this.isLoading=!1}prepareDefinitions(t){console.log(t),this.definitionsTasks=t.filter(i=>i.Definition[0]).map(i=>{let n=i.Definition.map(o=>o.definition);return{word:i.word,id:i.id,definitions:n,isRevealed:!1,isCorrect:null,arrayOfHeardWords:[]}}),this.currentTaskIndex=0,this.isLoading=!1}pronounce(){let t=this.getCurrentPlayingTasks();if(!(this.isRecordingInitiated&&!this.recordingInProgress||this.validatingResults)){if(t[this.currentTaskIndex].isRevealed){if(this.currentTaskIndex+1===t.length){this.store.dispatch(new jt(t)),this.router.navigate([w.PronunciationResult]);return}this.audio.paused||this.audio.pause(),this.currentTaskIndex++;return}this.recordingInProgress?(clearTimeout(this.speechTimeout),this.stopRecording()):(this.startRecording(),this.speechTimeout=setTimeout(()=>{this.stopRecording()},1e4))}}startRecording(){return D(this,null,function*(){this.isRecordingInitiated=!0,yield ut.requestPermissions(),this.recordingInProgress=!0;try{console.log("before start");let t=yield ut.start({language:"en-US",maxResults:3});console.log("after start"),this.giveCorrectnessVerdict(t?.matches||[])}catch(t){console.log(t?.message),this.giveCorrectnessVerdict([])}})}stopRecording(){return D(this,null,function*(){clearTimeout(this.speechTimeout),this.recordingInProgress=!1,this.isRecordingInitiated=!1,this.validatingResults=!0,yield ut.removeAllListeners(),yield ut.stop()})}getCurrentPlayingTasks(){return this.task===U.Example?this.examplesTasks:this.task===U.Translation?this.translationsTasks:this.definitionsTasks}giveCorrectnessVerdict(t){let n=this.getCurrentPlayingTasks()[this.currentTaskIndex],o;this.task===U.Example?(o=t.some(r=>r.toLowerCase().includes(n.inclusion.toLowerCase())),this.playAudio(n.pronunciation)):o=t.some(r=>r.toLowerCase().includes(n.word.toLowerCase())),o?n.isCorrect=!0:(n.isCorrect=!1,n.arrayOfHeardWords=t),n.isRevealed=!0,this.validatingResults=!1}disableScroll(t){t.preventDefault(),t.stopPropagation()}ngOnDestroy(){this.audio.pause(),this.pronunciationSubscription.unsubscribe()}};Ht.\u0275fac=function(i){return new(i||Ht)(_(T),_(k),_(dt))},Ht.\u0275cmp=P({type:Ht,selectors:[["app-pronunciation-game"]],standalone:!0,features:[O],decls:10,vars:8,consts:[["appIosStyles","",1,"pronunciation-game-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","task-container",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/mic.svg","width","35",4,"ngIf"],["src","assets/redesign/loader-circle.svg","width","25",4,"ngIf"],["src","assets/redesign/next.svg","width","18",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"task-container"],["class","hint",4,"ngIf"],[1,"task-block"],["class","task task-examples",4,"ngIf"],["class","task task-translations",4,"ngIf"],["class","task task-definitions",4,"ngIf"],[4,"ngIf"],[1,"hint"],[1,"task","task-examples"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"task","task-translations"],[1,"translations"],[4,"ngFor","ngForOf"],[1,"answer"],[1,"task","task-definitions"],["class","heard-options",4,"ngFor","ngForOf"],[1,"heard-options"],["src","assets/redesign/mic.svg","width","35"],["src","assets/redesign/loader-circle.svg","width","25"],["src","assets/redesign/next.svg","width","18"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),f(2,uo,2,0,"div",2)(3,Io,9,7,"div",3),s(),a(4,"div",4),u("touchmove",function(r){return n.disableScroll(r)}),a(5,"app-footer-menu",5)(6,"div",6),u("click",function(){return n.pronounce()}),f(7,To,1,0,"img",7)(8,Eo,1,0,"img",8)(9,Do,1,0,"img",9),s()()()()),i&2&&(c(2),l("ngIf",n.isLoading),c(),l("ngIf",!n.isLoading),c(2),l("isButtonVisible",!n.isLoading),c(),N("listening",n.recordingInProgress),c(),l("ngIf",!n.validatingResults&&(!n.getCurrentPlayingTasks().length||!n.getCurrentPlayingTasks()[n.currentTaskIndex].isRevealed)),c(),l("ngIf",n.validatingResults),c(),l("ngIf",!n.validatingResults&&n.getCurrentPlayingTasks().length&&n.getCurrentPlayingTasks()[n.currentTaskIndex].isRevealed))},dependencies:[F,H,ot,L,R],styles:[".pronunciation-game-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{text-align:center;color:#83839c}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .heard-options[_ngcontent-%COMP%]{color:#fff}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   div.task-block[_ngcontent-%COMP%]{color:#fff;width:auto;height:400px;background:#4e4e6133;border-radius:20px;text-align:center;padding:10px;display:flex;align-items:center;justify-content:center}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{font-size:1.3em}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .revealing-correct[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cinematicInGreen 2s forwards}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .revealing-wrong[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cinematicInRed 2s forwards}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:5fr 1fr;width:100%;height:100%}.pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%]   .translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-translations[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]   .translations[_ngcontent-%COMP%], .pronunciation-game-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .task.task-definitions[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{overflow:scroll}.pronunciation-game-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.pronunciation-game-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button.listening[_ngcontent-%COMP%]{box-shadow:none;background:red}@keyframes _ngcontent-%COMP%_cinematicInGreen{0%{color:green;text-shadow:0 0 1em green;opacity:0}to{color:green;text-shadow:0 0 0 green;opacity:1}}@keyframes _ngcontent-%COMP%_cinematicInRed{0%{color:#b1060f;text-shadow:0 0 1em #B1060F;opacity:0}to{color:#b1060f;text-shadow:0 0 0 #B1060F;opacity:1}}"]});var ae=Ht;C([$(S.pronunciation)],ae.prototype,"pronunciation$",void 0);function Ro(e,t){e&1&&(a(0,"div",9),h(1,"img",10),s())}function Fo(e,t){if(e&1&&(a(0,"i"),m(1),s()),e&2){let i=v(2).$implicit;c(),x(i.questionNumber)}}function Vo(e,t){if(e&1){let i=Q();a(0,"span",17),u("click",function(){Y(i);let o=v().$implicit,r=v(3);return J(r.highlightWord(o))}),f(1,Fo,2,1,"i",18),h(2,"input",19),s()}if(e&2){let i=v(),n=i.$implicit,o=i.index,r=v().index;c(),l("ngIf",n.questionNumber),c(),N("highlighted",n.highlighted),fn("id","",r,"-",o,""),l("readonly",!0)("value",n.isCorrect?n.letter:"")}}function Go(e,t){e&1&&h(0,"span",20)}function No(e,t){if(e&1&&(a(0,"span"),f(1,Vo,3,8,"span",15)(2,Go,1,0,"span",16),s()),e&2){let i=t.$implicit;c(),l("ngIf",i.letter),c(),l("ngIf",!i.letter)}}function Wo(e,t){if(e&1&&(a(0,"div",13),f(1,No,3,2,"span",14),s()),e&2){let i=t.$implicit;c(),l("ngForOf",i)}}function jo(e,t){if(e&1&&(a(0,"div",11),f(1,Wo,2,1,"div",12),s()),e&2){let i=v();c(),l("ngForOf",i.crosswordData.crossword)}}function Lo(e,t){e&1&&h(0,"img",21)}function $o(e,t){e&1&&h(0,"img",22)}var Le=function(e){return e.Vertical="Vertical",e.Horizontal="Horizontal",e}(Le||{}),qt=class qt{disableScroll(t){t.preventDefault(),t.stopPropagation()}constructor(t,i,n){this.store=t,this.router=i,this.modalService=n,this.highlightedCells=[]}canDeactivate(t){return D(this,null,function*(){return t?.url.startsWith(w.CrosswordWordEditor)?!0:yield this.modalService.showConfirmation("There are unresolved words. Would you still like to leave?")})}ngOnInit(){this.crosswordSubscription=this.crossword$.subscribe(t=>{t?this.crosswordData=bt(t):this.store.dispatch(new Ge)})}processBtnClick(){this.highlightedWordData?(this.store.dispatch(new Ne(this.highlightedCells)),this.router.navigate([w.CrosswordWordEditor,{wordId:this.highlightedWordData.id}])):(this.store.dispatch(new Fe(this.crosswordData)),this.router.navigate([w.CrosswordResults]))}highlightWord(t){if(!t.questionNumber)return;let i=[t.row,t.column];if(![...this.crosswordData.verticalWords,...this.crosswordData.horizontalWords].find(g=>Ie(i,g.startCoordinates)&&!g.isCorrect))return;let{horizontalWords:o,verticalWords:r}=this.crosswordData,p=o.find(g=>g.questionNumber===t.questionNumber),d=r.find(g=>g.questionNumber===t.questionNumber);if(this.highlightedCells.length&&(this.highlightedCells.forEach(([g,y])=>{this.crosswordData.crossword[g][y].highlighted=!1}),this.highlightedCells=[]),p&&d&&this.highlightedDirection){this.highlightedDirection===Le.Vertical?this.highlightHorizontalWord(p):this.highlightVerticalWord(d);return}if(p){this.highlightHorizontalWord(p);return}if(d){this.highlightVerticalWord(d);return}}highlightHorizontalWord(t){if(t===this.highlightedWordData){this.highlightedWordData=null;return}this.highlightedDirection=Le.Horizontal;let[i,n]=t.startCoordinates,o=t.word.length;for(let r=0;r<o;r++){let p=n+r;this.crosswordData.crossword[i][p].highlighted=!0,this.highlightedCells.push([i,p])}this.highlightedWordData=t}highlightVerticalWord(t){if(t===this.highlightedWordData){this.highlightedWordData=null;return}this.highlightedDirection=Le.Vertical;let[i,n]=t.startCoordinates,o=t.word.length;for(let r=0;r<o;r++){let p=i+r;this.crosswordData.crossword[p][n].highlighted=!0,this.highlightedCells.push([p,n])}this.highlightedWordData=t}ngOnDestroy(){this.crosswordSubscription.unsubscribe()}};qt.\u0275fac=function(i){return new(i||qt)(_(T),_(k),_(dt))},qt.\u0275cmp=P({type:qt,selectors:[["app-crossword-main"]],standalone:!0,features:[O],decls:9,vars:5,consts:[["appIosStyles","",1,"crossword-preparation-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","crossword",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["class","edit","src","assets/redesign/edit-.svg","width","35","height","35",4,"ngIf"],["src","assets/redesign/tick.svg","width","30","height","30",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"crossword"],["class","do-not-wrap-cells",4,"ngFor","ngForOf"],[1,"do-not-wrap-cells"],[4,"ngFor","ngForOf"],["class","letter-input",3,"click",4,"ngIf"],["class","letter-placeholder",4,"ngIf"],[1,"letter-input",3,"click"],[4,"ngIf"],["maxlength","1",3,"id","readonly","value"],[1,"letter-placeholder"],["src","assets/redesign/edit-.svg","width","35","height","35",1,"edit"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),f(2,Ro,2,0,"div",2)(3,jo,2,1,"div",3),s(),a(4,"div",4),u("touchmove",function(r){return n.disableScroll(r)}),a(5,"app-footer-menu",5)(6,"div",6),u("click",function(){return n.processBtnClick()}),f(7,Lo,1,0,"img",7)(8,$o,1,0,"img",8),s()()()()),i&2&&(c(2),l("ngIf",!n.crosswordData),c(),l("ngIf",n.crosswordData),c(2),l("isButtonVisible",!0),c(2),l("ngIf",n.highlightedWordData),c(),l("ngIf",!n.highlightedWordData))},dependencies:[F,H,L,R],styles:[".crossword-preparation-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:10px}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .do-not-wrap-cells[_ngcontent-%COMP%]{white-space:nowrap}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   span.letter-input[_ngcontent-%COMP%]{position:relative}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   span.letter-input[_ngcontent-%COMP%]   input.highlighted[_ngcontent-%COMP%]{background-color:#fea004}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0;width:35px;height:35px;border:none;margin:1px;border-radius:2px;outline:none;font-size:30px;font-weight:700;background:#4e4e61;color:#fff;caret-color:#fff;text-align:center}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;font-size:1em;color:#a2a2b5;font-weight:700}.crossword-preparation-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .letter-placeholder[_ngcontent-%COMP%]{display:inline-block;width:35px;margin:1px}.crossword-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.crossword-preparation-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]   img.edit[_ngcontent-%COMP%]{filter:invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg) brightness(102%) contrast(102%)}"]});var se=qt;C([$(S.crossword)],se.prototype,"crossword$",void 0);var Ao=(e,t)=>({correct:e,wrong:t});function Uo(e,t){e&1&&h(0,"img",20)}function zo(e,t){e&1&&h(0,"img",20)}function Bo(e,t){if(e&1&&(a(0,"span"),m(1),s()),e&2){let i=v().$implicit;c(),x(i.answered)}}function Ho(e,t){if(e&1){let i=Q();a(0,"div",21),u("click",function(){let o=Y(i).$implicit,r=v();return J(r.removeLetter(o))}),f(1,Bo,2,1,"span",22),s()}if(e&2){let i=t.$implicit,n=v();N("pending",i.index===n.currentIndex),l("ngClass",On(4,Ao,i.answered&&i.answered===i.letter,i.answered&&i.answered!==i.letter)),c(),l("ngIf",i.answered)}}function qo(e,t){if(e&1){let i=Q();a(0,"div",23),u("click",function(){let o=Y(i),r=o.$implicit,p=o.index,d=v();return J(d.addLetter(r,p))}),m(1),s()}if(e&2){let i=t.$implicit;N("hidden",!i.letter),c(),x(i.letter)}}function Ko(e,t){e&1&&h(0,"img",24)}function Xo(e,t){e&1&&h(0,"img",25)}var Kt=class Kt{constructor(t,i,n){this.activatedRoute=t,this.router=i,this.store=n,this.letters=[],this.lettersShuffled=[],this.currentIndex=0,this.isCorrect=!1,this.isDefinitionsAsTask=!1,this.translationIndex=0,this.definitionIndex=0}canDeactivate(t){return t?.url.startsWith(w.Crossword)?!0:confirm("There are still words to solve, do you want to leave?")}ngOnInit(){let t=Number(this.activatedRoute.snapshot.paramMap.get("wordId"));this.crossword$.pipe(nt(i=>[...i.horizontalWords,...i.verticalWords])).pipe(nn()).pipe(B(i=>i.id===t)).pipe(an(1)).subscribe(i=>this.prepareTheWord(i))}disableScroll(t){t.preventDefault(),t.stopPropagation()}prepareTheWord(t){this.wordData=t,this.letters=t.word.toUpperCase().split("").map((i,n)=>({letter:i,answered:"",index:n})),this.lettersShuffled=Kn(bt(this.letters))}removeLetter(t){if(this.isCorrect||!t.answered||t.answered===t.letter)return;let i=this.lettersShuffled[t.originalIndex];i.letter=t.answered,t.answered="",this.currentIndex=this.letters.findIndex(n=>!n.answered)}addLetter(t,i){if(this.isCorrect||!t.letter)return;let n=this.letters[this.currentIndex];n.answered=t.letter,n.originalIndex=i,t.letter="",this.currentIndex=this.letters.findIndex(o=>!o.answered),this.currentIndex===-1&&(this.isCorrect=!0,this.store.dispatch(new We(this.wordData)))}handleButtonClick(){this.router.navigate([w.Crossword])}goBack(){if(this.isDefinitionsAsTask){let t=this.definitionIndex-1;this.definitionIndex=t<0?this.wordData.Definition.length-1:t}if(!this.isDefinitionsAsTask){let t=this.translationIndex-1;this.translationIndex=t<0?this.wordData.Translation.length-1:t}}goForward(){if(this.isDefinitionsAsTask){let t=this.definitionIndex+1;this.definitionIndex=t>this.wordData.Definition.length-1?0:t}if(!this.isDefinitionsAsTask){let t=this.translationIndex+1;this.translationIndex=t>this.wordData.Translation.length-1?0:t}}areArrowsVisible(){return this.isDefinitionsAsTask&&this.wordData.Definition.length>1||!this.isDefinitionsAsTask&&this.wordData.Translation.length>1}getProperHint(){return this.isDefinitionsAsTask?this.wordData.Definition[this.definitionIndex].definition:this.wordData.Translation[this.translationIndex].translation}};Kt.\u0275fac=function(i){return new(i||Kt)(_(En),_(k),_(T))},Kt.\u0275cmp=P({type:Kt,selectors:[["app-crossword-word-editor"]],standalone:!0,features:[O],decls:27,vars:13,consts:[["appIosStyles","",1,"crossword-word-editor"],[1,"task-block"],[1,"selector"],[1,"checkbox"],["type","checkbox","id","task-type-selector",3,"ngModelChange","ngModel"],["for","task-type-selector"],[1,"task-text"],[1,"navigation-button",3,"click"],["src","assets/redesign/back-icon.svg","height","30px","width","30px",4,"ngIf"],[1,"hint-area"],[1,"forward-arrow","navigation-button",3,"click"],[1,"letter-placeholders"],[3,"pending","ngClass","click",4,"ngFor","ngForOf"],[1,"letters-to-insert"],[3,"hidden","click",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/arrow-back.svg","width","35","height","35",4,"ngIf"],["src","assets/redesign/tick.svg","width","30","height","30",4,"ngIf"],["src","assets/redesign/back-icon.svg","height","30px","width","30px"],[3,"click","ngClass"],[4,"ngIf"],[3,"click"],["src","assets/redesign/arrow-back.svg","width","35","height","35"],["src","assets/redesign/tick.svg","width","30","height","30"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),m(4,"Translations"),s(),a(5,"div",3)(6,"input",4),Pn("ngModelChange",function(r){return xn(n.isDefinitionsAsTask,r)||(n.isDefinitionsAsTask=r),r}),s(),a(7,"label",5),m(8,"Toggle"),s()(),a(9,"p"),m(10,"Definitions"),s()(),a(11,"div",6)(12,"div",7),u("click",function(){return n.goBack()}),f(13,Uo,1,0,"img",8),s(),a(14,"div",9),m(15),s(),a(16,"div",10),u("click",function(){return n.goForward()}),f(17,zo,1,0,"img",8),s()()(),a(18,"div",11),f(19,Ho,2,7,"div",12),s(),a(20,"div",13),f(21,qo,2,3,"div",14),s(),a(22,"div",15),u("touchmove",function(r){return n.disableScroll(r)}),a(23,"app-footer-menu",16)(24,"div",17),u("click",function(){return n.handleButtonClick()}),f(25,Ko,1,0,"img",18)(26,Xo,1,0,"img",19),s()()()()),i&2&&(c(3),N("highlighted",!n.isDefinitionsAsTask),c(3),Cn("ngModel",n.isDefinitionsAsTask),c(3),N("highlighted",n.isDefinitionsAsTask),c(4),l("ngIf",n.areArrowsVisible()),c(2),x(n.getProperHint()),c(2),l("ngIf",n.areArrowsVisible()),c(2),l("ngForOf",n.letters),c(2),l("ngForOf",n.lettersShuffled),c(2),l("isButtonVisible",!0),c(2),l("ngIf",!n.isCorrect),c(),l("ngIf",n.isCorrect))},dependencies:[F,Mt,$n,wt,Un,An,H,L,ot,R],styles:['.crossword-word-editor[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,2.1fr) minmax(0,3.5fr) minmax(0,3.5fr) minmax(0,1.2fr)}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;display:flex;justify-content:center;justify-items:center}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .highlighted[_ngcontent-%COMP%]{color:#00fad9}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin:-6px 10px 0}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:0;width:0;visibility:hidden}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;text-indent:-9999px;width:50px;height:26px;background:gray;display:block;border-radius:26px;position:relative}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";position:absolute;top:3px;left:3px;width:20px;height:20px;background:#00fad9;border-radius:90px;transition:.3s}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{left:calc(100% - 3px);transform:translate(-100%)}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:active:after{width:25px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;justify-items:center;align-items:center;height:60%;margin:0 10px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .navigation-button[_ngcontent-%COMP%]{min-width:30px}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .hint-area[_ngcontent-%COMP%]{text-align:center}.crossword-word-editor[_ngcontent-%COMP%]   .task-block[_ngcontent-%COMP%]   .task-text[_ngcontent-%COMP%]   .forward-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]{margin:10px;text-align:center;overflow:scroll}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:4px;border:2px solid #353542;border-radius:5px;height:40px;font-size:25px;width:40px;display:inline-block;background-color:#26262f;vertical-align:top;text-align:center;line-height:40px}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.pending[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.pending[_ngcontent-%COMP%]{border:none;background-color:#ffffe0}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.correct[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.correct[_ngcontent-%COMP%]{border:2px solid green}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   div.wrong[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   div.wrong[_ngcontent-%COMP%]{border:2px solid #B1060F}.crossword-word-editor[_ngcontent-%COMP%]   .letter-placeholders[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%], .crossword-word-editor[_ngcontent-%COMP%]   .letters-to-insert[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{opacity:0}.crossword-word-editor[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}']});var ce=Kt;C([$(S.crossword)],ce.prototype,"crossword$",void 0);function Yo(e,t){if(e&1&&(a(0,"div",8),m(1),s()),e&2){let i=t.$implicit;l("ngClass",i.isCorrect?"correct":"wrong"),c(),x(i.word)}}var Xt=class Xt{constructor(t){this.router=t}disableScroll(t){t.preventDefault(),t.stopPropagation()}ngOnInit(){this.results$=this.crossword$.pipe(B(Boolean)).pipe(nt(t=>[...t.horizontalWords,...t.verticalWords]))}goToVocabularyPage(){this.router.navigate([w.Dictionary])}};Xt.\u0275fac=function(i){return new(i||Xt)(_(k))},Xt.\u0275cmp=P({type:Xt,selectors:[["app-crossword-results"]],standalone:!0,features:[O],decls:10,vars:4,consts:[["appIosStyles","",1,"crossword-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),m(3,"Results:"),s(),f(4,Yo,2,2,"div",3),Ct(5,"async"),s(),a(6,"div",4),u("touchmove",function(r){return n.disableScroll(r)}),a(7,"app-footer-menu",5)(8,"div",6)(9,"img",7),u("click",function(){return n.goToVocabularyPage()}),s()()()()()),i&2&&(c(4),l("ngForOf",xt(5,2,n.results$)),c(3),l("isButtonVisible",!0))},dependencies:[F,L,ot,R,Et],styles:[".crossword-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.crossword-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.crossword-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var le=Xt;C([$(S.crossword)],le.prototype,"crossword$",void 0);var de=(e,t,i,n)=>e.canDeactivate(n);var Jo=e=>({inactive:e});function Qo(e,t){e&1&&(a(0,"div",10),h(1,"img",11),s())}function Zo(e,t){if(e&1){let i=Q();a(0,"img",27),u("click",function(){Y(i);let o=v(5).$implicit,r=v(2);return J(r.addWordToUserDictionary(o))}),s()}}function tr(e,t){e&1&&(he(),a(0,"svg",28),h(1,"polyline",29),s())}function er(e,t){if(e&1&&(a(0,"div",22)(1,"div",23)(2,"div",24),f(3,Zo,1,0,"img",25)(4,tr,2,0,"svg",26),s()()()),e&2){let i=v(4).$implicit;c(2),N("actionable",!i.isInVocabulary),c(),l("ngIf",!i.addedToVocabulary),c(),l("ngIf",i.addedToVocabulary)}}function nr(e,t){if(e&1){let i=Q();a(0,"span",19)(1,"span",20),u("click",function(){Y(i);let o=v(3).$implicit,r=v(2);return J(r.togglePopUp(o))}),m(2),s(),f(3,er,5,4,"div",21),s()}if(e&2){let i=v(3).$implicit;c(2),x(i.inclusion),c(),l("ngIf",i.isPopUpVisible)}}function ir(e,t){if(e&1){let i=Q();a(0,"span",20),u("click",function(){Y(i);let o=v(4).$implicit,r=v(2);return J(r.rotateTranslations(o))}),a(1,"span"),m(2),s()()}if(e&2){let i=v(4).$implicit;c(2),Tt("[",i.translations[i.activeTranslationIndex],"]")}}function or(e,t){if(e&1&&(a(0,"span",32),m(1),s()),e&2){let i=v(4).$implicit;l("ngClass",i.isCorrect?"correct":"wrong"),c(),x(i.inclusion)}}function rr(e,t){if(e&1&&(a(0,"span"),f(1,ir,3,1,"span",30)(2,or,2,2,"span",31),s()),e&2){let i=v(3).$implicit;c(),l("ngIf",i.isCorrect===void 0),c(),l("ngIf",i.isCorrect!==void 0)}}function ar(e,t){if(e&1&&(a(0,"span")(1,"span"),m(2),s(),f(3,nr,4,2,"span",18)(4,rr,3,2,"span",17),a(5,"span"),m(6),s()()),e&2){let i=v(2).$implicit;c(2),x(i.beforeInclusion),c(),l("ngIf",!i.isInVocabulary),c(),l("ngIf",i.isInVocabulary),c(2),x(i.afterInclusion)}}function sr(e,t){if(e&1&&(a(0,"span"),m(1),s()),e&2){let i=v(2).$implicit;c(),x(i.phrase)}}function cr(e,t){if(e&1&&(a(0,"div",16),f(1,ar,7,4,"span",17)(2,sr,2,1,"span",17),s()),e&2){let i=v(),n=i.$implicit,o=i.index,r=v(2);l("ngClass",Ce(3,Jo,o===r.pendingIndex)),c(),l("ngIf",n.wordId),c(),l("ngIf",!n.wordId)}}function lr(e,t){if(e&1&&(a(0,"div",14),f(1,cr,3,5,"div",15),s()),e&2){let i=t.index,n=v(2);l("ngClass",i%2===0?"from-right":"from-left"),c(),l("ngIf",i<=n.pendingIndex)}}function dr(e,t){if(e&1&&(a(0,"div",12),f(1,lr,2,2,"div",13),s()),e&2){let i=v();c(),l("ngForOf",i.dialogData)}}function pr(e,t){e&1&&h(0,"img",33)}function mr(e,t){e&1&&h(0,"img",34)}function gr(e,t){e&1&&h(0,"img",35)}var Yt=class Yt{constructor(t,i,n){this.store=t,this.router=i,this.modalService=n,this.validatingResults=!1,this.initialized=!1,this.readyToListen=!1,this.isRecordingInitiated=!1,this.isLastOnePlayed=!1,this.recordingInProgress=!1,this.audio=new Audio}disableScroll(t){t.preventDefault(),t.stopPropagation()}playAudio(t){return D(this,null,function*(){return new Promise(i=>{this.audio.src=t,this.audio.play(),this.audio.addEventListener("ended",()=>i())})})}canDeactivate(t){return D(this,null,function*(){return t?.url===w.DialogResults?!0:yield this.modalService.showConfirmation("There are several words left. Would you still like to leave?")})}ngOnInit(){this.store.dispatch(new je),this.dialogAndVocabularySubscription=ge([this.dialog$.pipe(B(Boolean)),this.userVocabulary$.pipe(B(Boolean))]).subscribe(n=>D(this,[n],function*([t,i]){let o=i.map(p=>p.wordId);this.dialogData=t.map(p=>{let d=q({},p);if(p.wordId&&o.includes(p.wordId)&&(d.isInVocabulary=!0),p.wordId){let g=d.word.Translation.map(y=>y.translation);d.translations=g,d.activeTranslationIndex=0,d.beforeInclusion=d.phrase.substring(0,d.inclusionStart),d.inclusion=d.phrase.substring(d.inclusionStart,d.inclusionEnd+1),d.afterInclusion=d.phrase.substring(d.inclusionEnd+1)}return d});let r=this.dialogData.findIndex(p=>p.wordId&&p.isInVocabulary);for(this.pendingIndex=0;this.pendingIndex<r;){let p=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(p),this.pendingIndex++}this.readyToListen=!0,this.initialized=!0}))}ngOnDestroy(){this.dialogAndVocabularySubscription.unsubscribe()}togglePopUp(t){t.isPopUpVisible=!t.isPopUpVisible}rotateTranslations(t){t.activeTranslationIndex=(t.activeTranslationIndex+1)%t.translations.length}addWordToUserDictionary(t){return D(this,null,function*(){t.addedToVocabulary=!0,yield new Promise(i=>setTimeout(i,1e3)),t.isCorrect=!0,t.isPopUpVisible=!1,t.isInVocabulary=!0,this.store.dispatch(new Wt(t.wordId))})}processRecognizedText(t){return D(this,null,function*(){let i=this.dialogData[this.pendingIndex],n=i.phrase.substring(i.inclusionStart,i.inclusionEnd+1);for(i.isCorrect=t.some(r=>r.toLowerCase().includes(n.toLowerCase()));this.pendingIndex<this.dialogData.length-1;){let r=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(r),this.pendingIndex++;let p=this.dialogData[this.pendingIndex];if(p.wordId&&p.isInVocabulary)break}let o=this.dialogData[this.pendingIndex];if(this.isLastOnePlayed=this.pendingIndex===this.dialogData.length-1&&(!o.wordId||qn(o.isCorrect)),this.isLastOnePlayed){let r=this.dialogData[this.pendingIndex].pronunciation;yield this.playAudio(r),this.pendingIndex++;return}this.readyToListen=!0,this.validatingResults=!1})}processBtnClick(){if(this.isLastOnePlayed){this.store.dispatch(new Lt(this.dialogData)),this.router.navigate([w.DialogResults]);return}this.isRecordingInitiated&&!this.recordingInProgress||this.validatingResults||!this.readyToListen||(this.recordingInProgress?(clearTimeout(this.speechTimeout),this.stopRecording()):(this.startRecording(),this.speechTimeout=setTimeout(()=>{this.stopRecording()},1e4)))}startRecording(){return D(this,null,function*(){this.isRecordingInitiated=!0,yield ut.requestPermissions(),this.recordingInProgress=!0;try{let t=yield ut.start({language:"en-US",maxResults:3});this.processRecognizedText(t?.matches||[])}catch(t){console.log(t?.message),this.processRecognizedText([])}})}stopRecording(){return D(this,null,function*(){clearTimeout(this.speechTimeout),this.recordingInProgress=!1,this.validatingResults=!0,this.readyToListen=!1,this.isRecordingInitiated=!1,yield ut.removeAllListeners(),yield ut.stop()})}};Yt.\u0275fac=function(i){return new(i||Yt)(_(T),_(k),_(dt))},Yt.\u0275cmp=P({type:Yt,selectors:[["app-dialog"]],standalone:!0,features:[O],decls:10,vars:8,consts:[["appIosStyles","",1,"dialog-container"],[1,"main-content"],["class","loader",4,"ngIf"],["class","chat",4,"ngIf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button",3,"click"],["src","assets/redesign/mic.svg","width","35",4,"ngIf"],["src","assets/redesign/loader-circle.svg","width","25",4,"ngIf"],["src","assets/redesign/next.svg","width","18",4,"ngIf"],[1,"loader"],["src","assets/redesign/loader-circle.svg","width","50","height","50"],[1,"chat"],["class","messages",3,"ngClass",4,"ngFor","ngForOf"],[1,"messages",3,"ngClass"],["class","message",3,"ngClass",4,"ngIf"],[1,"message",3,"ngClass"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"container"],[1,"highlighted",3,"click"],["class","overlay",4,"ngIf"],[1,"overlay"],[1,"content"],[1,"add-btn"],["src","assets/redesign/plus-sign.svg",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2",4,"ngIf"],["src","assets/redesign/plus-sign.svg",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 130.2 130.2"],["fill","none","stroke","#FF8A70","stroke-width","10","stroke-linecap","round","stroke-miterlimit","10","points","100.2,40.2 51.5,88.8 29.8,67.5 ",1,"check","path"],["class","highlighted",3,"click",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["src","assets/redesign/mic.svg","width","35"],["src","assets/redesign/loader-circle.svg","width","25"],["src","assets/redesign/next.svg","width","18"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),f(2,Qo,2,0,"div",2)(3,dr,2,1,"div",3),s(),a(4,"div",4),u("touchmove",function(r){return n.disableScroll(r)}),a(5,"app-footer-menu",5)(6,"div",6),u("click",function(){return n.processBtnClick()}),f(7,pr,1,0,"img",7)(8,mr,1,0,"img",8)(9,gr,1,0,"img",9),s()()()()),i&2&&(c(2),l("ngIf",!n.dialogData),c(),l("ngIf",n.dialogData),c(2),l("isButtonVisible",n.initialized),c(),N("listening",n.recordingInProgress),c(),l("ngIf",n.readyToListen&&!n.validatingResults),c(),l("ngIf",n.validatingResults&&!n.isLastOnePlayed),c(),l("ngIf",n.isLastOnePlayed))},dependencies:[F,H,L,ot,R],styles:['.dialog-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{margin:5px;overflow:scroll}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{width:calc(100% - 20px);display:flex;overflow:hidden;flex-direction:column;padding:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{border-radius:20px;padding:8px 15px;margin-top:5px;margin-bottom:5px;display:inline-block;line-height:1.3}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .highlighted[_ngcontent-%COMP%]{text-decoration:underline dashed;text-decoration-thickness:2px;text-decoration-color:#ffff9f;text-underline-offset:4px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{color:#0f0}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .wrong[_ngcontent-%COMP%]{color:#ff7178}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]{align-items:flex-start}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]{align-items:flex-end}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]{margin-right:25%;background-color:gray;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;left:-7px;height:20px;width:20px;background-color:gray;border-bottom-right-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]{margin-left:25%;background:gray;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message.inactive[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;right:-8px;height:20px;width:20px;background:gray;border-bottom-left-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-right:25%;background-color:#5e00f5;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;left:-7px;height:20px;width:20px;background-color:#5e00f5;border-bottom-right-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-left[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:1;bottom:0;left:-10px;width:10px;height:20px;background-color:#1c1c23;border-bottom-right-radius:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#fff;margin-left:25%;background:#924eff;position:relative}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:0;bottom:0;right:-8px;height:20px;width:20px;background:#924eff;border-bottom-left-radius:15px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .from-right[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:1;bottom:0;right:-10px;width:10px;height:20px;background:#1c1c23;border-bottom-left-radius:10px}.dialog-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{left:0;right:0;top:40%;margin:0 auto;position:absolute;width:50px}.dialog-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}.dialog-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button.listening[_ngcontent-%COMP%]{box-shadow:none;background:red}.dialog-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}.dialog-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:-50px;display:flex;justify-content:center}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;background-color:#2f2f39;border-radius:16px;height:40px;width:40px}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:0;right:0;margin:0 auto;width:0;height:0;border-top:solid 8px #2f2f39;border-left:solid 5px transparent;border-right:solid 5px transparent}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{width:40px;height:40px;text-align:center;line-height:40px;border-radius:16px;margin-right:20px}.dialog-container[_ngcontent-%COMP%]   .add-btn.actionable[_ngcontent-%COMP%]{background:#4e4e6133;box-shadow:-1px -1px #585858}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:25px}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:25px}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path.check[_ngcontent-%COMP%]{stroke-dashoffset:-100;animation:_ngcontent-%COMP%_dash-check .9s .35s ease-in-out forwards}.dialog-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1000;stroke-dashoffset:0}@keyframes _ngcontent-%COMP%_dash-check{0%{stroke-dashoffset:-100;opacity:1}99%{opacity:1}to{stroke-dashoffset:900;opacity:0}}']});var Jt=Yt;C([$(S.dialog)],Jt.prototype,"dialog$",void 0);C([$(rt.userVocabulary)],Jt.prototype,"userVocabulary$",void 0);function ur(e,t){if(e&1&&(a(0,"div",10),m(1),s()),e&2){let i=t.$implicit;l("ngClass",i.isCorrect?"correct":"wrong"),c(),x(i.word.word)}}function fr(e,t){e&1&&(a(0,"h3",2),m(1,"Added to vocabulary:"),s())}function hr(e,t){if(e&1&&(a(0,"div",11),m(1),s()),e&2){let i=t.$implicit;c(),x(i.word.word)}}var Qt=class Qt{constructor(t){this.router=t,this.played=[],this.added=[]}ngOnInit(){this.subscription=this.dialogResults$.pipe(B(Boolean)).subscribe({next:t=>{t.forEach(i=>{i.addedToVocabulary?this.added.push(i):i.wordId&&i.isInVocabulary&&this.played.push(i)})}})}disableScroll(t){t.preventDefault(),t.stopPropagation()}goToVocabularyPage(){this.router.navigate([w.Dictionary])}ngOnDestroy(){this.subscription.unsubscribe()}};Qt.\u0275fac=function(i){return new(i||Qt)(_(k))},Qt.\u0275cmp=P({type:Qt,selectors:[["app-dialog-results"]],standalone:!0,features:[O],decls:11,vars:4,consts:[["appIosStyles","",1,"dialog-results-container"],[1,"main-content"],[1,"result-title"],["class","result-word",3,"ngClass",4,"ngFor","ngForOf"],["class","result-title",4,"ngIf"],["class","result-word correct",4,"ngFor","ngForOf"],[1,"footer",3,"touchmove"],[3,"isButtonVisible"],[1,"footer-action-button"],["src","assets/redesign/tick.svg","width","30","height","30",3,"click"],[1,"result-word",3,"ngClass"],[1,"result-word","correct"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),m(3,"Results:"),s(),f(4,ur,2,2,"div",3)(5,fr,2,0,"h3",4)(6,hr,2,1,"div",5),s(),a(7,"div",6),u("touchmove",function(r){return n.disableScroll(r)}),a(8,"app-footer-menu",7)(9,"div",8)(10,"img",9),u("click",function(){return n.goToVocabularyPage()}),s()()()()()),i&2&&(c(4),l("ngForOf",n.played),c(),l("ngIf",n.added.length),c(),l("ngForOf",n.added),c(2),l("isButtonVisible",!0))},dependencies:[F,L,ot,H,R],styles:[".dialog-results-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-auto-rows:minmax(0,9.1fr) minmax(0,1.2fr)}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{overflow:scroll;margin:30px}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{text-align:center}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word[_ngcontent-%COMP%]{display:flex;padding:16px 20px;margin-bottom:10px;gap:10px;background:#4e4e6133;border-radius:16px}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.correct[_ngcontent-%COMP%]{border-left:5px solid green}.dialog-results-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .result-word.wrong[_ngcontent-%COMP%]{border-left:5px solid #B1060F}.dialog-results-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-action-button[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:56px;height:56px;text-align:center;vertical-align:middle;line-height:14vw;left:calc(50% - 28px);top:-4px;background:radial-gradient(100% 100% at 50% 100%,#fff0 43.25%,#ff7f3780),#ff7966;box-shadow:0 8px 25px #ff796680;border-radius:999px;z-index:50;display:flex;justify-content:center;align-items:center}"]});var pe=Qt;C([$(S.dialogResults)],pe.prototype,"dialogResults$",void 0);var _i=[{path:A.Login,component:li},{path:A.Admin,loadChildren:()=>import("./chunk-SYLX4UQD.js").then(e=>e.adminRoutes)},{path:A.HomePage,component:di,canActivate:[ee],children:[{path:A.Dictionary,canActivate:[ee],children:[{path:A.AddNewWord,component:ui},{path:"",component:oe}]},{path:A.Exercises,canActivate:[ee],children:[{path:A.Pronunciation,canDeactivate:[de],component:ae},{path:A.PronunciationPreparation,component:fi},{path:A.PronunciationResult,component:re},{path:A.Crossword,canDeactivate:[de],component:se},{path:A.CrosswordWordEditor,canDeactivate:[de],component:ce},{path:A.CrosswordResults,component:le},{path:A.Dialog,canDeactivate:[de],component:Jt},{path:A.DialogResults,component:pe},{path:"",component:gi}]},{path:A.UserProfile,canActivate:[ee],component:mi}]},{path:"",pathMatch:"full",redirectTo:A.Login}];var vi=(()=>{let t=class t{constructor(n){this.http=n,this.loginUrl=`${st.apiUrl}/auth/login`,this.registerUrl=`${st.apiUrl}/auth/register`}registerUser(n){return this.http.post(this.registerUrl,n)}loginUser(n){return this.http.post(this.loginUrl,n)}};t.\u0275fac=function(o){return new(o||t)(W(xe))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ci=(()=>{let t=class t{constructor(n,o,r,p){this.actions$=n,this.wordService=o,this.authService=r,this.store=p,this.addWordToUserVocabulary$=this.actions$.pipe(Ot(Wt),vt(d=>this.wordService.addWordToUserVocabulary(d.wordId).pipe(it(g=>_t())))).subscribe(),this.getUserVocabulary$=this.actions$.pipe(Ot(ye),vt(()=>this.wordService.getUserVocabulary([U.Translation]).pipe(it(d=>_t()))),X(d=>{d&&this.store.dispatch(new Me(d))})).subscribe(),this.initPronunciationGame$=this.actions$.pipe(Ot(Re),vt(({payload:d})=>this.wordService.getSeveralRandomWords(d.numberOfWords,[d.task],3).pipe(nt(g=>({payload:d,wordData:g}))).pipe(it(g=>_t()))),X(({payload:d,wordData:g})=>{d&&g&&this.store.dispatch(new be(lt(q({},d),{wordData:g})))})).subscribe(),this.finishPronunciationGame$=this.actions$.pipe(Ot(jt),nt(({payload:d})=>d.filter(g=>g.isCorrect).map(g=>g.id)),B(d=>!!d.length),vt(d=>this.wordService.updateWordsProgress(d).pipe(it(g=>_t())))).subscribe(),this.finishDialogGame$=this.actions$.pipe(Ot(Lt),nt(({payload:d})=>d.filter(g=>g.isCorrect&&!g.addedToVocabulary).map(g=>g.wordId)),B(d=>!!d.length),vt(d=>this.wordService.updateWordsProgress(d).pipe(it(g=>_t())))).subscribe(),this.login$=this.actions$.pipe(Ot(Se),vt(({payload:d})=>this.authService.loginUser(d).pipe(it(g=>(this.store.dispatch(new te(g.error)),_t())))),X(d=>{d&&this.store.dispatch(new Ke(d))})).subscribe(),this.register$=this.actions$.pipe(Ot(ke),vt(({payload:d})=>this.authService.registerUser(d).pipe(it(g=>(this.store.dispatch(new te(g.error)),_t())))),X(d=>{d&&this.store.dispatch(new Ke(d))})).subscribe()}};t.\u0275fac=function(o){return new(o||t)(W(jn),W(zt),W(vi),W(T))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var xi=(()=>{let t=class t{constructor(n){this.modalService=n}intercept(n,o){return o.handle(n).pipe(it(r=>(this.modalService.showError(r.error.message),en(()=>r))))}};t.\u0275fac=function(o){return new(o||t)(W(dt))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();var Pi={providers:[Dn(_i),Ln([$t,rt,S,St],{developmentMode:wn()},ii({keys:"*"})),si(),{provide:Ae,multi:!0,useValue:()=>et(Ci)},{provide:bn,useClass:xi,multi:!0},Sn(kn())]};In(Qn,Pi);
